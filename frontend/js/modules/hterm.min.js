const lib={assert:function(e){globalThis.chai?lib.assert=globalThis.chai.assert:lib.assert=function(e){},lib.assert(e)},notNull:function(e){return lib.assert(null!==e),e},notUndefined:function(e){return lib.assert(void 0!==e),e},polyfill:{},codec:{}};lib.codec.codeUnitArrayToString=function(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t},lib.codec.stringToCodeUnitArray=function(e,t=new Uint8Array(e.length)){for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r);return t},lib.colors={},lib.colors.re_={hex16:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?$/i,hex24:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?$/i,rgb:new RegExp("^/s*rgb/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*/)/s*$".replace(/\//g,"\\"),"i"),rgba:new RegExp("^/s*rgba/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*(?:,/s*(/d+(?:/./d+)?)/s*)/)/s*$".replace(/\//g,"\\"),"i"),rgbx:new RegExp("^/s*rgba?/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*(?:,/s*(/d+(?:/./d+)?)/s*)?/)/s*$".replace(/\//g,"\\"),"i"),hsl:new RegExp("^/s*hsl/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*%/s*,/s*(/d{1,3})/s*%/s*/)/s*$".replace(/\//g,"\\"),"i"),hsla:new RegExp("^/s*hsla/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*%/s*,/s*(/d{1,3})/s*%/s*(?:,/s*(/d+(?:/./d+)?)/s*)/)/s*$".replace(/\//g,"\\"),"i"),hslx:new RegExp("^/s*hsla?/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*%/s*,/s*(/d{1,3})/s*%/s*(?:,/s*(/d+(?:/./d+)?)/s*)?/)/s*$".replace(/\//g,"\\"),"i"),x11rgb:/^\s*rgb:([a-f0-9]{1,4})\/([a-f0-9]{1,4})\/([a-f0-9]{1,4})\s*$/i,name:/[a-z][a-z0-9\s]+/},lib.colors.rgbToX11=function(e){function t(e){return e=(257*Math.min(e,255)).toString(16),lib.f.zpad(e,4)}const r=e.match(lib.colors.re_.rgbx);return r?"rgb:"+t(r[1])+"/"+t(r[2])+"/"+t(r[3]):null},lib.colors.x11HexToCSS=function(e){if(!e.startsWith("#"))return null;if(e=e.substr(1),-1==[3,6,9,12].indexOf(e.length))return null;if(e.match(/[^a-f0-9]/i))return null;const t=e.length/3,r=e.substr(0,t),o=e.substr(t,t),s=e.substr(t+t,t);return lib.colors.arrayToRGBA([r,o,s].map((function(e){return e=parseInt(e,16),2==t?e:1==t?e<<4:e>>4*(t-2)})))},lib.colors.x11ToCSS=function(e){const t=e.match(lib.colors.re_.x11rgb);return t?(t.splice(0,1),lib.colors.arrayToRGBA(t.map((function(e){return 1==e.length?parseInt(e+e,16):2==e.length?parseInt(e,16):(3==e.length&&(e+=e.substr(2)),Math.round(parseInt(e,16)/257))})))):e.startsWith("#")?lib.colors.x11HexToCSS(e):lib.colors.nameToRGB(e)},lib.colors.hexToRGB=function(e){const t=lib.colors.re_.hex16,r=lib.colors.re_.hex24;t.test(e)&&(e=`#${e.match(/[a-f0-9]/gi).map((e=>`${e}${e}`)).join("")}`);const o=e.match(r);if(!o)return null;const s=e=>parseInt(o[e+1],16);return void 0===o[4]||255===s(3)?`rgb(${s(0)}, ${s(1)}, ${s(2)})`:`rgba(${s(0)}, ${s(1)}, ${s(2)}, ${s(3)/255})`},lib.colors.rgbToHex=function(e){const t=lib.colors.crackRGB(e);if(!t)return null;const r="#"+lib.f.zpad((parseInt(t[0],10)<<16|parseInt(t[1],10)<<8|parseInt(t[2],10)<<0).toString(16),6);if(void 0===t[3]||"1"===t[3])return r;{const e=Math.round(255*parseFloat(t[3])).toString(16);return`${r}${lib.f.zpad(e,2)}`}},lib.colors.crackHSL=function(e){if(e.startsWith("hsla")){const t=e.match(lib.colors.re_.hsla);if(t)return t.shift(),Array.from(t)}else{const t=e.match(lib.colors.re_.hsl);if(t)return t.shift(),t.push("1"),Array.from(t)}return console.error(`Couldn't crack: ${e}`),null},lib.colors.hslxArrayToRgbaArray=function(e){const t=parseInt(e[0],10)/60,r=parseInt(e[1],10)/100,o=parseInt(e[2],10)/100,s=(e,t,r)=>(r<0&&(r+=6),r>=6&&(r-=6),r<1?(t-e)*r+e:r<3?t:r<4?(t-e)*(4-r)+e:e),i=o<=.5?o*(r+1):o+r-o*r,n=2*o-i;return[255*s(n,i,t+2),255*s(n,i,t),255*s(n,i,t-2),void 0!==e[3]?+e[3]:1]},lib.colors.hsvxArrayToHslaArray=function(e){const t=e=>lib.f.clamp(e,0,100),[r,o,s]=e.map(parseFloat),i=t(s*(100-o/2)/100);let n=0;return 0!==i&&100!==i&&(n=t((s-i)/Math.min(i,100-i)*100)),[r,n,i,4===e.length?+e[3]:1]},lib.colors.hslxArrayToHsvaArray=function(e){const t=e=>lib.f.clamp(e,0,100),[r,o,s]=e.map(parseFloat),i=t(s+o*Math.min(s,100-s)/100);let n=0;return 0!==i&&(n=t(200*(1-s/i))),[r,n,i,4===e.length?+e[3]:1]},lib.colors.hslToRGB=function(e){const t=lib.colors.crackHSL(e);if(!t)return null;const[r,o,s,i]=lib.colors.hslxArrayToRgbaArray(t),n=[r,o,s].map(Math.round).join(", ");return 1===i?`rgb(${n})`:`rgba(${n}, ${i})`},lib.colors.rgbxArrayToHslaArray=function(e){const t=parseInt(e[0],10)/255,r=parseInt(e[1],10)/255,o=parseInt(e[2],10)/255,s=Math.min(t,r,o),i=Math.max(t,r,o),n=i-s,a=(i+s)/2;if(0==n)return[0,0,100*a,void 0!==e[3]?+e[3]:1];let h=(()=>{switch(i){case t:return(r-o)/n%6;case r:return(o-t)/n+2;case o:return(t-r)/n+4}})();h*=60,h<0&&(h+=360);return[h,100*(n/(1-Math.abs(2*a-1))),100*a,void 0!==e[3]?+e[3]:1]},lib.colors.rgbToHsl=function(e){const t=lib.colors.crackRGB(e);if(!t)return null;let[r,o,s,i]=lib.colors.rgbxArrayToHslaArray(t);return r=Math.round(r),o=Math.round(o),s=Math.round(s),1===i?`hsl(${r}, ${o}%, ${s}%)`:`hsla(${r}, ${o}%, ${s}%, ${i})`},lib.colors.normalizeCSS=function(e){return e.startsWith("#")?lib.colors.hexToRGB(e):lib.colors.re_.rgbx.test(e)?e:lib.colors.re_.hslx.test(e)?lib.colors.hslToRGB(e):lib.colors.nameToRGB(e)},lib.colors.normalizeCSSToHSL=function(e){if(lib.colors.re_.hslx.test(e))return e;const t=lib.colors.normalizeCSS(e);return t?lib.colors.rgbToHsl(t):t},lib.colors.arrayToRGBA=function(e){return 3==e.length?`rgb(${e[0]}, ${e[1]}, ${e[2]})`:`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`},lib.colors.arrayToHSLA=function(e){const t=e.length>3?e[3]:1;return`hsla(${Math.round(e[0])}, ${Math.round(e[1])}%, ${Math.round(e[2])}%, ${t})`},lib.colors.setAlpha=function(e,t){const r=lib.colors.crackRGB(e).slice(0,3);return"1"!==(t=t.toString())&&(r[3]=t),lib.colors.arrayToRGBA(r)},lib.colors.mix=function(e,t,r){const o=lib.colors.crackRGB(e),s=lib.colors.crackRGB(t);for(let t=0;t<4;++t){const i=parseInt(o[t],10),n=parseInt(s[t],10)-i;o[t]=Math.round(e+n*r).toString()}return lib.colors.arrayToRGBA(o)},lib.colors.crackRGB=function(e){if(e.startsWith("rgba")){const t=e.match(lib.colors.re_.rgba);if(t)return t.shift(),Array.from(t)}else{const t=e.match(lib.colors.re_.rgb);if(t)return t.shift(),t.push("1"),Array.from(t)}return console.error("Couldn't crack: "+e),null},lib.colors.nameToRGB=function(e){return e in lib.colors.colorNames||(e=e.toLowerCase())in lib.colors.colorNames||(e=e.replace(/\s+/g,""))in lib.colors.colorNames?lib.colors.colorNames[e]:null},lib.colors.luminance=function(e,t,r){const[o,s,i]=[e,t,r].map((e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)));return.2126*o+.7152*s+.0722*i},lib.colors.contrastRatio=function(e,t){return(Math.max(e,t)+.05)/(Math.min(e,t)+.05)},lib.colors.stockPalette=["#000000","#CC0000","#4E9A06","#C4A000","#3465A4","#75507B","#06989A","#D3D7CF","#555753","#EF2929","#00BA13","#FCE94F","#729FCF","#F200CB","#00B5BD","#EEEEEC","#000000","#00005F","#000087","#0000AF","#0000D7","#0000FF","#005F00","#005F5F","#005F87","#005FAF","#005FD7","#005FFF","#008700","#00875F","#008787","#0087AF","#0087D7","#0087FF","#00AF00","#00AF5F","#00AF87","#00AFAF","#00AFD7","#00AFFF","#00D700","#00D75F","#00D787","#00D7AF","#00D7D7","#00D7FF","#00FF00","#00FF5F","#00FF87","#00FFAF","#00FFD7","#00FFFF","#5F0000","#5F005F","#5F0087","#5F00AF","#5F00D7","#5F00FF","#5F5F00","#5F5F5F","#5F5F87","#5F5FAF","#5F5FD7","#5F5FFF","#5F8700","#5F875F","#5F8787","#5F87AF","#5F87D7","#5F87FF","#5FAF00","#5FAF5F","#5FAF87","#5FAFAF","#5FAFD7","#5FAFFF","#5FD700","#5FD75F","#5FD787","#5FD7AF","#5FD7D7","#5FD7FF","#5FFF00","#5FFF5F","#5FFF87","#5FFFAF","#5FFFD7","#5FFFFF","#870000","#87005F","#870087","#8700AF","#8700D7","#8700FF","#875F00","#875F5F","#875F87","#875FAF","#875FD7","#875FFF","#878700","#87875F","#878787","#8787AF","#8787D7","#8787FF","#87AF00","#87AF5F","#87AF87","#87AFAF","#87AFD7","#87AFFF","#87D700","#87D75F","#87D787","#87D7AF","#87D7D7","#87D7FF","#87FF00","#87FF5F","#87FF87","#87FFAF","#87FFD7","#87FFFF","#AF0000","#AF005F","#AF0087","#AF00AF","#AF00D7","#AF00FF","#AF5F00","#AF5F5F","#AF5F87","#AF5FAF","#AF5FD7","#AF5FFF","#AF8700","#AF875F","#AF8787","#AF87AF","#AF87D7","#AF87FF","#AFAF00","#AFAF5F","#AFAF87","#AFAFAF","#AFAFD7","#AFAFFF","#AFD700","#AFD75F","#AFD787","#AFD7AF","#AFD7D7","#AFD7FF","#AFFF00","#AFFF5F","#AFFF87","#AFFFAF","#AFFFD7","#AFFFFF","#D70000","#D7005F","#D70087","#D700AF","#D700D7","#D700FF","#D75F00","#D75F5F","#D75F87","#D75FAF","#D75FD7","#D75FFF","#D78700","#D7875F","#D78787","#D787AF","#D787D7","#D787FF","#D7AF00","#D7AF5F","#D7AF87","#D7AFAF","#D7AFD7","#D7AFFF","#D7D700","#D7D75F","#D7D787","#D7D7AF","#D7D7D7","#D7D7FF","#D7FF00","#D7FF5F","#D7FF87","#D7FFAF","#D7FFD7","#D7FFFF","#FF0000","#FF005F","#FF0087","#FF00AF","#FF00D7","#FF00FF","#FF5F00","#FF5F5F","#FF5F87","#FF5FAF","#FF5FD7","#FF5FFF","#FF8700","#FF875F","#FF8787","#FF87AF","#FF87D7","#FF87FF","#FFAF00","#FFAF5F","#FFAF87","#FFAFAF","#FFAFD7","#FFAFFF","#FFD700","#FFD75F","#FFD787","#FFD7AF","#FFD7D7","#FFD7FF","#FFFF00","#FFFF5F","#FFFF87","#FFFFAF","#FFFFD7","#FFFFFF","#080808","#121212","#1C1C1C","#262626","#303030","#3A3A3A","#444444","#4E4E4E","#585858","#626262","#6C6C6C","#767676","#808080","#8A8A8A","#949494","#9E9E9E","#A8A8A8","#B2B2B2","#BCBCBC","#C6C6C6","#D0D0D0","#DADADA","#E4E4E4","#EEEEEE"].map(lib.colors.hexToRGB),lib.colors.colorNames={aliceblue:"rgb(240, 248, 255)",antiquewhite:"rgb(250, 235, 215)",antiquewhite1:"rgb(255, 239, 219)",antiquewhite2:"rgb(238, 223, 204)",antiquewhite3:"rgb(205, 192, 176)",antiquewhite4:"rgb(139, 131, 120)",aquamarine:"rgb(127, 255, 212)",aquamarine1:"rgb(127, 255, 212)",aquamarine2:"rgb(118, 238, 198)",aquamarine3:"rgb(102, 205, 170)",aquamarine4:"rgb(69, 139, 116)",azure:"rgb(240, 255, 255)",azure1:"rgb(240, 255, 255)",azure2:"rgb(224, 238, 238)",azure3:"rgb(193, 205, 205)",azure4:"rgb(131, 139, 139)",beige:"rgb(245, 245, 220)",bisque:"rgb(255, 228, 196)",bisque1:"rgb(255, 228, 196)",bisque2:"rgb(238, 213, 183)",bisque3:"rgb(205, 183, 158)",bisque4:"rgb(139, 125, 107)",black:"rgb(0, 0, 0)",blanchedalmond:"rgb(255, 235, 205)",blue:"rgb(0, 0, 255)",blue1:"rgb(0, 0, 255)",blue2:"rgb(0, 0, 238)",blue3:"rgb(0, 0, 205)",blue4:"rgb(0, 0, 139)",blueviolet:"rgb(138, 43, 226)",brown:"rgb(165, 42, 42)",brown1:"rgb(255, 64, 64)",brown2:"rgb(238, 59, 59)",brown3:"rgb(205, 51, 51)",brown4:"rgb(139, 35, 35)",burlywood:"rgb(222, 184, 135)",burlywood1:"rgb(255, 211, 155)",burlywood2:"rgb(238, 197, 145)",burlywood3:"rgb(205, 170, 125)",burlywood4:"rgb(139, 115, 85)",cadetblue:"rgb(95, 158, 160)",cadetblue1:"rgb(152, 245, 255)",cadetblue2:"rgb(142, 229, 238)",cadetblue3:"rgb(122, 197, 205)",cadetblue4:"rgb(83, 134, 139)",chartreuse:"rgb(127, 255, 0)",chartreuse1:"rgb(127, 255, 0)",chartreuse2:"rgb(118, 238, 0)",chartreuse3:"rgb(102, 205, 0)",chartreuse4:"rgb(69, 139, 0)",chocolate:"rgb(210, 105, 30)",chocolate1:"rgb(255, 127, 36)",chocolate2:"rgb(238, 118, 33)",chocolate3:"rgb(205, 102, 29)",chocolate4:"rgb(139, 69, 19)",coral:"rgb(255, 127, 80)",coral1:"rgb(255, 114, 86)",coral2:"rgb(238, 106, 80)",coral3:"rgb(205, 91, 69)",coral4:"rgb(139, 62, 47)",cornflowerblue:"rgb(100, 149, 237)",cornsilk:"rgb(255, 248, 220)",cornsilk1:"rgb(255, 248, 220)",cornsilk2:"rgb(238, 232, 205)",cornsilk3:"rgb(205, 200, 177)",cornsilk4:"rgb(139, 136, 120)",cyan:"rgb(0, 255, 255)",cyan1:"rgb(0, 255, 255)",cyan2:"rgb(0, 238, 238)",cyan3:"rgb(0, 205, 205)",cyan4:"rgb(0, 139, 139)",darkblue:"rgb(0, 0, 139)",darkcyan:"rgb(0, 139, 139)",darkgoldenrod:"rgb(184, 134, 11)",darkgoldenrod1:"rgb(255, 185, 15)",darkgoldenrod2:"rgb(238, 173, 14)",darkgoldenrod3:"rgb(205, 149, 12)",darkgoldenrod4:"rgb(139, 101, 8)",darkgray:"rgb(169, 169, 169)",darkgreen:"rgb(0, 100, 0)",darkgrey:"rgb(169, 169, 169)",darkkhaki:"rgb(189, 183, 107)",darkmagenta:"rgb(139, 0, 139)",darkolivegreen:"rgb(85, 107, 47)",darkolivegreen1:"rgb(202, 255, 112)",darkolivegreen2:"rgb(188, 238, 104)",darkolivegreen3:"rgb(162, 205, 90)",darkolivegreen4:"rgb(110, 139, 61)",darkorange:"rgb(255, 140, 0)",darkorange1:"rgb(255, 127, 0)",darkorange2:"rgb(238, 118, 0)",darkorange3:"rgb(205, 102, 0)",darkorange4:"rgb(139, 69, 0)",darkorchid:"rgb(153, 50, 204)",darkorchid1:"rgb(191, 62, 255)",darkorchid2:"rgb(178, 58, 238)",darkorchid3:"rgb(154, 50, 205)",darkorchid4:"rgb(104, 34, 139)",darkred:"rgb(139, 0, 0)",darksalmon:"rgb(233, 150, 122)",darkseagreen:"rgb(143, 188, 143)",darkseagreen1:"rgb(193, 255, 193)",darkseagreen2:"rgb(180, 238, 180)",darkseagreen3:"rgb(155, 205, 155)",darkseagreen4:"rgb(105, 139, 105)",darkslateblue:"rgb(72, 61, 139)",darkslategray:"rgb(47, 79, 79)",darkslategray1:"rgb(151, 255, 255)",darkslategray2:"rgb(141, 238, 238)",darkslategray3:"rgb(121, 205, 205)",darkslategray4:"rgb(82, 139, 139)",darkslategrey:"rgb(47, 79, 79)",darkturquoise:"rgb(0, 206, 209)",darkviolet:"rgb(148, 0, 211)",debianred:"rgb(215, 7, 81)",deeppink:"rgb(255, 20, 147)",deeppink1:"rgb(255, 20, 147)",deeppink2:"rgb(238, 18, 137)",deeppink3:"rgb(205, 16, 118)",deeppink4:"rgb(139, 10, 80)",deepskyblue:"rgb(0, 191, 255)",deepskyblue1:"rgb(0, 191, 255)",deepskyblue2:"rgb(0, 178, 238)",deepskyblue3:"rgb(0, 154, 205)",deepskyblue4:"rgb(0, 104, 139)",dimgray:"rgb(105, 105, 105)",dimgrey:"rgb(105, 105, 105)",dodgerblue:"rgb(30, 144, 255)",dodgerblue1:"rgb(30, 144, 255)",dodgerblue2:"rgb(28, 134, 238)",dodgerblue3:"rgb(24, 116, 205)",dodgerblue4:"rgb(16, 78, 139)",firebrick:"rgb(178, 34, 34)",firebrick1:"rgb(255, 48, 48)",firebrick2:"rgb(238, 44, 44)",firebrick3:"rgb(205, 38, 38)",firebrick4:"rgb(139, 26, 26)",floralwhite:"rgb(255, 250, 240)",forestgreen:"rgb(34, 139, 34)",gainsboro:"rgb(220, 220, 220)",ghostwhite:"rgb(248, 248, 255)",gold:"rgb(255, 215, 0)",gold1:"rgb(255, 215, 0)",gold2:"rgb(238, 201, 0)",gold3:"rgb(205, 173, 0)",gold4:"rgb(139, 117, 0)",goldenrod:"rgb(218, 165, 32)",goldenrod1:"rgb(255, 193, 37)",goldenrod2:"rgb(238, 180, 34)",goldenrod3:"rgb(205, 155, 29)",goldenrod4:"rgb(139, 105, 20)",gray:"rgb(190, 190, 190)",gray0:"rgb(0, 0, 0)",gray1:"rgb(3, 3, 3)",gray10:"rgb(26, 26, 26)",gray100:"rgb(255, 255, 255)",gray11:"rgb(28, 28, 28)",gray12:"rgb(31, 31, 31)",gray13:"rgb(33, 33, 33)",gray14:"rgb(36, 36, 36)",gray15:"rgb(38, 38, 38)",gray16:"rgb(41, 41, 41)",gray17:"rgb(43, 43, 43)",gray18:"rgb(46, 46, 46)",gray19:"rgb(48, 48, 48)",gray2:"rgb(5, 5, 5)",gray20:"rgb(51, 51, 51)",gray21:"rgb(54, 54, 54)",gray22:"rgb(56, 56, 56)",gray23:"rgb(59, 59, 59)",gray24:"rgb(61, 61, 61)",gray25:"rgb(64, 64, 64)",gray26:"rgb(66, 66, 66)",gray27:"rgb(69, 69, 69)",gray28:"rgb(71, 71, 71)",gray29:"rgb(74, 74, 74)",gray3:"rgb(8, 8, 8)",gray30:"rgb(77, 77, 77)",gray31:"rgb(79, 79, 79)",gray32:"rgb(82, 82, 82)",gray33:"rgb(84, 84, 84)",gray34:"rgb(87, 87, 87)",gray35:"rgb(89, 89, 89)",gray36:"rgb(92, 92, 92)",gray37:"rgb(94, 94, 94)",gray38:"rgb(97, 97, 97)",gray39:"rgb(99, 99, 99)",gray4:"rgb(10, 10, 10)",gray40:"rgb(102, 102, 102)",gray41:"rgb(105, 105, 105)",gray42:"rgb(107, 107, 107)",gray43:"rgb(110, 110, 110)",gray44:"rgb(112, 112, 112)",gray45:"rgb(115, 115, 115)",gray46:"rgb(117, 117, 117)",gray47:"rgb(120, 120, 120)",gray48:"rgb(122, 122, 122)",gray49:"rgb(125, 125, 125)",gray5:"rgb(13, 13, 13)",gray50:"rgb(127, 127, 127)",gray51:"rgb(130, 130, 130)",gray52:"rgb(133, 133, 133)",gray53:"rgb(135, 135, 135)",gray54:"rgb(138, 138, 138)",gray55:"rgb(140, 140, 140)",gray56:"rgb(143, 143, 143)",gray57:"rgb(145, 145, 145)",gray58:"rgb(148, 148, 148)",gray59:"rgb(150, 150, 150)",gray6:"rgb(15, 15, 15)",gray60:"rgb(153, 153, 153)",gray61:"rgb(156, 156, 156)",gray62:"rgb(158, 158, 158)",gray63:"rgb(161, 161, 161)",gray64:"rgb(163, 163, 163)",gray65:"rgb(166, 166, 166)",gray66:"rgb(168, 168, 168)",gray67:"rgb(171, 171, 171)",gray68:"rgb(173, 173, 173)",gray69:"rgb(176, 176, 176)",gray7:"rgb(18, 18, 18)",gray70:"rgb(179, 179, 179)",gray71:"rgb(181, 181, 181)",gray72:"rgb(184, 184, 184)",gray73:"rgb(186, 186, 186)",gray74:"rgb(189, 189, 189)",gray75:"rgb(191, 191, 191)",gray76:"rgb(194, 194, 194)",gray77:"rgb(196, 196, 196)",gray78:"rgb(199, 199, 199)",gray79:"rgb(201, 201, 201)",gray8:"rgb(20, 20, 20)",gray80:"rgb(204, 204, 204)",gray81:"rgb(207, 207, 207)",gray82:"rgb(209, 209, 209)",gray83:"rgb(212, 212, 212)",gray84:"rgb(214, 214, 214)",gray85:"rgb(217, 217, 217)",gray86:"rgb(219, 219, 219)",gray87:"rgb(222, 222, 222)",gray88:"rgb(224, 224, 224)",gray89:"rgb(227, 227, 227)",gray9:"rgb(23, 23, 23)",gray90:"rgb(229, 229, 229)",gray91:"rgb(232, 232, 232)",gray92:"rgb(235, 235, 235)",gray93:"rgb(237, 237, 237)",gray94:"rgb(240, 240, 240)",gray95:"rgb(242, 242, 242)",gray96:"rgb(245, 245, 245)",gray97:"rgb(247, 247, 247)",gray98:"rgb(250, 250, 250)",gray99:"rgb(252, 252, 252)",green:"rgb(0, 255, 0)",green1:"rgb(0, 255, 0)",green2:"rgb(0, 238, 0)",green3:"rgb(0, 205, 0)",green4:"rgb(0, 139, 0)",greenyellow:"rgb(173, 255, 47)",grey:"rgb(190, 190, 190)",grey0:"rgb(0, 0, 0)",grey1:"rgb(3, 3, 3)",grey10:"rgb(26, 26, 26)",grey100:"rgb(255, 255, 255)",grey11:"rgb(28, 28, 28)",grey12:"rgb(31, 31, 31)",grey13:"rgb(33, 33, 33)",grey14:"rgb(36, 36, 36)",grey15:"rgb(38, 38, 38)",grey16:"rgb(41, 41, 41)",grey17:"rgb(43, 43, 43)",grey18:"rgb(46, 46, 46)",grey19:"rgb(48, 48, 48)",grey2:"rgb(5, 5, 5)",grey20:"rgb(51, 51, 51)",grey21:"rgb(54, 54, 54)",grey22:"rgb(56, 56, 56)",grey23:"rgb(59, 59, 59)",grey24:"rgb(61, 61, 61)",grey25:"rgb(64, 64, 64)",grey26:"rgb(66, 66, 66)",grey27:"rgb(69, 69, 69)",grey28:"rgb(71, 71, 71)",grey29:"rgb(74, 74, 74)",grey3:"rgb(8, 8, 8)",grey30:"rgb(77, 77, 77)",grey31:"rgb(79, 79, 79)",grey32:"rgb(82, 82, 82)",grey33:"rgb(84, 84, 84)",grey34:"rgb(87, 87, 87)",grey35:"rgb(89, 89, 89)",grey36:"rgb(92, 92, 92)",grey37:"rgb(94, 94, 94)",grey38:"rgb(97, 97, 97)",grey39:"rgb(99, 99, 99)",grey4:"rgb(10, 10, 10)",grey40:"rgb(102, 102, 102)",grey41:"rgb(105, 105, 105)",grey42:"rgb(107, 107, 107)",grey43:"rgb(110, 110, 110)",grey44:"rgb(112, 112, 112)",grey45:"rgb(115, 115, 115)",grey46:"rgb(117, 117, 117)",grey47:"rgb(120, 120, 120)",grey48:"rgb(122, 122, 122)",grey49:"rgb(125, 125, 125)",grey5:"rgb(13, 13, 13)",grey50:"rgb(127, 127, 127)",grey51:"rgb(130, 130, 130)",grey52:"rgb(133, 133, 133)",grey53:"rgb(135, 135, 135)",grey54:"rgb(138, 138, 138)",grey55:"rgb(140, 140, 140)",grey56:"rgb(143, 143, 143)",grey57:"rgb(145, 145, 145)",grey58:"rgb(148, 148, 148)",grey59:"rgb(150, 150, 150)",grey6:"rgb(15, 15, 15)",grey60:"rgb(153, 153, 153)",grey61:"rgb(156, 156, 156)",grey62:"rgb(158, 158, 158)",grey63:"rgb(161, 161, 161)",grey64:"rgb(163, 163, 163)",grey65:"rgb(166, 166, 166)",grey66:"rgb(168, 168, 168)",grey67:"rgb(171, 171, 171)",grey68:"rgb(173, 173, 173)",grey69:"rgb(176, 176, 176)",grey7:"rgb(18, 18, 18)",grey70:"rgb(179, 179, 179)",grey71:"rgb(181, 181, 181)",grey72:"rgb(184, 184, 184)",grey73:"rgb(186, 186, 186)",grey74:"rgb(189, 189, 189)",grey75:"rgb(191, 191, 191)",grey76:"rgb(194, 194, 194)",grey77:"rgb(196, 196, 196)",grey78:"rgb(199, 199, 199)",grey79:"rgb(201, 201, 201)",grey8:"rgb(20, 20, 20)",grey80:"rgb(204, 204, 204)",grey81:"rgb(207, 207, 207)",grey82:"rgb(209, 209, 209)",grey83:"rgb(212, 212, 212)",grey84:"rgb(214, 214, 214)",grey85:"rgb(217, 217, 217)",grey86:"rgb(219, 219, 219)",grey87:"rgb(222, 222, 222)",grey88:"rgb(224, 224, 224)",grey89:"rgb(227, 227, 227)",grey9:"rgb(23, 23, 23)",grey90:"rgb(229, 229, 229)",grey91:"rgb(232, 232, 232)",grey92:"rgb(235, 235, 235)",grey93:"rgb(237, 237, 237)",grey94:"rgb(240, 240, 240)",grey95:"rgb(242, 242, 242)",grey96:"rgb(245, 245, 245)",grey97:"rgb(247, 247, 247)",grey98:"rgb(250, 250, 250)",grey99:"rgb(252, 252, 252)",honeydew:"rgb(240, 255, 240)",honeydew1:"rgb(240, 255, 240)",honeydew2:"rgb(224, 238, 224)",honeydew3:"rgb(193, 205, 193)",honeydew4:"rgb(131, 139, 131)",hotpink:"rgb(255, 105, 180)",hotpink1:"rgb(255, 110, 180)",hotpink2:"rgb(238, 106, 167)",hotpink3:"rgb(205, 96, 144)",hotpink4:"rgb(139, 58, 98)",indianred:"rgb(205, 92, 92)",indianred1:"rgb(255, 106, 106)",indianred2:"rgb(238, 99, 99)",indianred3:"rgb(205, 85, 85)",indianred4:"rgb(139, 58, 58)",ivory:"rgb(255, 255, 240)",ivory1:"rgb(255, 255, 240)",ivory2:"rgb(238, 238, 224)",ivory3:"rgb(205, 205, 193)",ivory4:"rgb(139, 139, 131)",khaki:"rgb(240, 230, 140)",khaki1:"rgb(255, 246, 143)",khaki2:"rgb(238, 230, 133)",khaki3:"rgb(205, 198, 115)",khaki4:"rgb(139, 134, 78)",lavender:"rgb(230, 230, 250)",lavenderblush:"rgb(255, 240, 245)",lavenderblush1:"rgb(255, 240, 245)",lavenderblush2:"rgb(238, 224, 229)",lavenderblush3:"rgb(205, 193, 197)",lavenderblush4:"rgb(139, 131, 134)",lawngreen:"rgb(124, 252, 0)",lemonchiffon:"rgb(255, 250, 205)",lemonchiffon1:"rgb(255, 250, 205)",lemonchiffon2:"rgb(238, 233, 191)",lemonchiffon3:"rgb(205, 201, 165)",lemonchiffon4:"rgb(139, 137, 112)",lightblue:"rgb(173, 216, 230)",lightblue1:"rgb(191, 239, 255)",lightblue2:"rgb(178, 223, 238)",lightblue3:"rgb(154, 192, 205)",lightblue4:"rgb(104, 131, 139)",lightcoral:"rgb(240, 128, 128)",lightcyan:"rgb(224, 255, 255)",lightcyan1:"rgb(224, 255, 255)",lightcyan2:"rgb(209, 238, 238)",lightcyan3:"rgb(180, 205, 205)",lightcyan4:"rgb(122, 139, 139)",lightgoldenrod:"rgb(238, 221, 130)",lightgoldenrod1:"rgb(255, 236, 139)",lightgoldenrod2:"rgb(238, 220, 130)",lightgoldenrod3:"rgb(205, 190, 112)",lightgoldenrod4:"rgb(139, 129, 76)",lightgoldenrodyellow:"rgb(250, 250, 210)",lightgray:"rgb(211, 211, 211)",lightgreen:"rgb(144, 238, 144)",lightgrey:"rgb(211, 211, 211)",lightpink:"rgb(255, 182, 193)",lightpink1:"rgb(255, 174, 185)",lightpink2:"rgb(238, 162, 173)",lightpink3:"rgb(205, 140, 149)",lightpink4:"rgb(139, 95, 101)",lightsalmon:"rgb(255, 160, 122)",lightsalmon1:"rgb(255, 160, 122)",lightsalmon2:"rgb(238, 149, 114)",lightsalmon3:"rgb(205, 129, 98)",lightsalmon4:"rgb(139, 87, 66)",lightseagreen:"rgb(32, 178, 170)",lightskyblue:"rgb(135, 206, 250)",lightskyblue1:"rgb(176, 226, 255)",lightskyblue2:"rgb(164, 211, 238)",lightskyblue3:"rgb(141, 182, 205)",lightskyblue4:"rgb(96, 123, 139)",lightslateblue:"rgb(132, 112, 255)",lightslategray:"rgb(119, 136, 153)",lightslategrey:"rgb(119, 136, 153)",lightsteelblue:"rgb(176, 196, 222)",lightsteelblue1:"rgb(202, 225, 255)",lightsteelblue2:"rgb(188, 210, 238)",lightsteelblue3:"rgb(162, 181, 205)",lightsteelblue4:"rgb(110, 123, 139)",lightyellow:"rgb(255, 255, 224)",lightyellow1:"rgb(255, 255, 224)",lightyellow2:"rgb(238, 238, 209)",lightyellow3:"rgb(205, 205, 180)",lightyellow4:"rgb(139, 139, 122)",limegreen:"rgb(50, 205, 50)",linen:"rgb(250, 240, 230)",magenta:"rgb(255, 0, 255)",magenta1:"rgb(255, 0, 255)",magenta2:"rgb(238, 0, 238)",magenta3:"rgb(205, 0, 205)",magenta4:"rgb(139, 0, 139)",maroon:"rgb(176, 48, 96)",maroon1:"rgb(255, 52, 179)",maroon2:"rgb(238, 48, 167)",maroon3:"rgb(205, 41, 144)",maroon4:"rgb(139, 28, 98)",mediumaquamarine:"rgb(102, 205, 170)",mediumblue:"rgb(0, 0, 205)",mediumorchid:"rgb(186, 85, 211)",mediumorchid1:"rgb(224, 102, 255)",mediumorchid2:"rgb(209, 95, 238)",mediumorchid3:"rgb(180, 82, 205)",mediumorchid4:"rgb(122, 55, 139)",mediumpurple:"rgb(147, 112, 219)",mediumpurple1:"rgb(171, 130, 255)",mediumpurple2:"rgb(159, 121, 238)",mediumpurple3:"rgb(137, 104, 205)",mediumpurple4:"rgb(93, 71, 139)",mediumseagreen:"rgb(60, 179, 113)",mediumslateblue:"rgb(123, 104, 238)",mediumspringgreen:"rgb(0, 250, 154)",mediumturquoise:"rgb(72, 209, 204)",mediumvioletred:"rgb(199, 21, 133)",midnightblue:"rgb(25, 25, 112)",mintcream:"rgb(245, 255, 250)",mistyrose:"rgb(255, 228, 225)",mistyrose1:"rgb(255, 228, 225)",mistyrose2:"rgb(238, 213, 210)",mistyrose3:"rgb(205, 183, 181)",mistyrose4:"rgb(139, 125, 123)",moccasin:"rgb(255, 228, 181)",navajowhite:"rgb(255, 222, 173)",navajowhite1:"rgb(255, 222, 173)",navajowhite2:"rgb(238, 207, 161)",navajowhite3:"rgb(205, 179, 139)",navajowhite4:"rgb(139, 121, 94)",navy:"rgb(0, 0, 128)",navyblue:"rgb(0, 0, 128)",oldlace:"rgb(253, 245, 230)",olivedrab:"rgb(107, 142, 35)",olivedrab1:"rgb(192, 255, 62)",olivedrab2:"rgb(179, 238, 58)",olivedrab3:"rgb(154, 205, 50)",olivedrab4:"rgb(105, 139, 34)",orange:"rgb(255, 165, 0)",orange1:"rgb(255, 165, 0)",orange2:"rgb(238, 154, 0)",orange3:"rgb(205, 133, 0)",orange4:"rgb(139, 90, 0)",orangered:"rgb(255, 69, 0)",orangered1:"rgb(255, 69, 0)",orangered2:"rgb(238, 64, 0)",orangered3:"rgb(205, 55, 0)",orangered4:"rgb(139, 37, 0)",orchid:"rgb(218, 112, 214)",orchid1:"rgb(255, 131, 250)",orchid2:"rgb(238, 122, 233)",orchid3:"rgb(205, 105, 201)",orchid4:"rgb(139, 71, 137)",palegoldenrod:"rgb(238, 232, 170)",palegreen:"rgb(152, 251, 152)",palegreen1:"rgb(154, 255, 154)",palegreen2:"rgb(144, 238, 144)",palegreen3:"rgb(124, 205, 124)",palegreen4:"rgb(84, 139, 84)",paleturquoise:"rgb(175, 238, 238)",paleturquoise1:"rgb(187, 255, 255)",paleturquoise2:"rgb(174, 238, 238)",paleturquoise3:"rgb(150, 205, 205)",paleturquoise4:"rgb(102, 139, 139)",palevioletred:"rgb(219, 112, 147)",palevioletred1:"rgb(255, 130, 171)",palevioletred2:"rgb(238, 121, 159)",palevioletred3:"rgb(205, 104, 137)",palevioletred4:"rgb(139, 71, 93)",papayawhip:"rgb(255, 239, 213)",peachpuff:"rgb(255, 218, 185)",peachpuff1:"rgb(255, 218, 185)",peachpuff2:"rgb(238, 203, 173)",peachpuff3:"rgb(205, 175, 149)",peachpuff4:"rgb(139, 119, 101)",peru:"rgb(205, 133, 63)",pink:"rgb(255, 192, 203)",pink1:"rgb(255, 181, 197)",pink2:"rgb(238, 169, 184)",pink3:"rgb(205, 145, 158)",pink4:"rgb(139, 99, 108)",plum:"rgb(221, 160, 221)",plum1:"rgb(255, 187, 255)",plum2:"rgb(238, 174, 238)",plum3:"rgb(205, 150, 205)",plum4:"rgb(139, 102, 139)",powderblue:"rgb(176, 224, 230)",purple:"rgb(160, 32, 240)",purple1:"rgb(155, 48, 255)",purple2:"rgb(145, 44, 238)",purple3:"rgb(125, 38, 205)",purple4:"rgb(85, 26, 139)",red:"rgb(255, 0, 0)",red1:"rgb(255, 0, 0)",red2:"rgb(238, 0, 0)",red3:"rgb(205, 0, 0)",red4:"rgb(139, 0, 0)",rosybrown:"rgb(188, 143, 143)",rosybrown1:"rgb(255, 193, 193)",rosybrown2:"rgb(238, 180, 180)",rosybrown3:"rgb(205, 155, 155)",rosybrown4:"rgb(139, 105, 105)",royalblue:"rgb(65, 105, 225)",royalblue1:"rgb(72, 118, 255)",royalblue2:"rgb(67, 110, 238)",royalblue3:"rgb(58, 95, 205)",royalblue4:"rgb(39, 64, 139)",saddlebrown:"rgb(139, 69, 19)",salmon:"rgb(250, 128, 114)",salmon1:"rgb(255, 140, 105)",salmon2:"rgb(238, 130, 98)",salmon3:"rgb(205, 112, 84)",salmon4:"rgb(139, 76, 57)",sandybrown:"rgb(244, 164, 96)",seagreen:"rgb(46, 139, 87)",seagreen1:"rgb(84, 255, 159)",seagreen2:"rgb(78, 238, 148)",seagreen3:"rgb(67, 205, 128)",seagreen4:"rgb(46, 139, 87)",seashell:"rgb(255, 245, 238)",seashell1:"rgb(255, 245, 238)",seashell2:"rgb(238, 229, 222)",seashell3:"rgb(205, 197, 191)",seashell4:"rgb(139, 134, 130)",sienna:"rgb(160, 82, 45)",sienna1:"rgb(255, 130, 71)",sienna2:"rgb(238, 121, 66)",sienna3:"rgb(205, 104, 57)",sienna4:"rgb(139, 71, 38)",skyblue:"rgb(135, 206, 235)",skyblue1:"rgb(135, 206, 255)",skyblue2:"rgb(126, 192, 238)",skyblue3:"rgb(108, 166, 205)",skyblue4:"rgb(74, 112, 139)",slateblue:"rgb(106, 90, 205)",slateblue1:"rgb(131, 111, 255)",slateblue2:"rgb(122, 103, 238)",slateblue3:"rgb(105, 89, 205)",slateblue4:"rgb(71, 60, 139)",slategray:"rgb(112, 128, 144)",slategray1:"rgb(198, 226, 255)",slategray2:"rgb(185, 211, 238)",slategray3:"rgb(159, 182, 205)",slategray4:"rgb(108, 123, 139)",slategrey:"rgb(112, 128, 144)",snow:"rgb(255, 250, 250)",snow1:"rgb(255, 250, 250)",snow2:"rgb(238, 233, 233)",snow3:"rgb(205, 201, 201)",snow4:"rgb(139, 137, 137)",springgreen:"rgb(0, 255, 127)",springgreen1:"rgb(0, 255, 127)",springgreen2:"rgb(0, 238, 118)",springgreen3:"rgb(0, 205, 102)",springgreen4:"rgb(0, 139, 69)",steelblue:"rgb(70, 130, 180)",steelblue1:"rgb(99, 184, 255)",steelblue2:"rgb(92, 172, 238)",steelblue3:"rgb(79, 148, 205)",steelblue4:"rgb(54, 100, 139)",tan:"rgb(210, 180, 140)",tan1:"rgb(255, 165, 79)",tan2:"rgb(238, 154, 73)",tan3:"rgb(205, 133, 63)",tan4:"rgb(139, 90, 43)",thistle:"rgb(216, 191, 216)",thistle1:"rgb(255, 225, 255)",thistle2:"rgb(238, 210, 238)",thistle3:"rgb(205, 181, 205)",thistle4:"rgb(139, 123, 139)",tomato:"rgb(255, 99, 71)",tomato1:"rgb(255, 99, 71)",tomato2:"rgb(238, 92, 66)",tomato3:"rgb(205, 79, 57)",tomato4:"rgb(139, 54, 38)",turquoise:"rgb(64, 224, 208)",turquoise1:"rgb(0, 245, 255)",turquoise2:"rgb(0, 229, 238)",turquoise3:"rgb(0, 197, 205)",turquoise4:"rgb(0, 134, 139)",violet:"rgb(238, 130, 238)",violetred:"rgb(208, 32, 144)",violetred1:"rgb(255, 62, 150)",violetred2:"rgb(238, 58, 140)",violetred3:"rgb(205, 50, 120)",violetred4:"rgb(139, 34, 82)",wheat:"rgb(245, 222, 179)",wheat1:"rgb(255, 231, 186)",wheat2:"rgb(238, 216, 174)",wheat3:"rgb(205, 186, 150)",wheat4:"rgb(139, 126, 102)",white:"rgb(255, 255, 255)",whitesmoke:"rgb(245, 245, 245)",yellow:"rgb(255, 255, 0)",yellow1:"rgb(255, 255, 0)",yellow2:"rgb(238, 238, 0)",yellow3:"rgb(205, 205, 0)",yellow4:"rgb(139, 139, 0)",yellowgreen:"rgb(154, 205, 50)"},lib.Event=class{constructor(){this.observers=[]}emit(...e){this.observers.forEach((t=>t.apply(null,e)))}addListener(e){this.observers.push(e)}removeListener(e){this.observers=this.observers.filter((t=>t!==e))}},lib.f={},lib.f.replaceVars=function(e,t){return e.replace(/%([a-z]*)\(([^)]+)\)/gi,(function(e,r,o){if(void 0===t[o])throw new Error(`Unknown variable: ${o}`);let s=t[o];if(r in lib.f.replaceVars.functions)s=lib.f.replaceVars.functions[r](s);else if(r)throw new Error(`Unknown escape function: ${r}`);return s}))},lib.f.replaceVars.functions={encodeURI:encodeURI,encodeURIComponent:encodeURIComponent,escapeHTML:function(e){const t={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"};return e.replace(/[<>&"']/g,(e=>t[e]))}},lib.f.getURL=function(e){return lib.f.getURL.chromeSupported()?chrome.runtime.getURL(e):e.startsWith("/")?globalThis.location.origin+e:e},lib.f.getURL.chromeSupported=function(){return!!globalThis.chrome?.runtime?.getURL},lib.f.clamp=function(e,t,r){return e<t?t:e>r?r:e},lib.f.zpad=function(e,t){return String(e).padStart(t,"0")},lib.f.longestCommonPrefix=function(e,t=0){if(0===e.length)return t;for(;;){const r=e[0][t];if(void 0===r)break;if(!e.slice(1).every((e=>e[t]===r)))break;++t}return t},lib.f.getStack=function(e=0,t=void 0){const r=(new Error).stack.split("\n");e+=2;const o=r.length-e;t=void 0===t?o:lib.f.clamp(t,0,o);const s=new Array;for(let o=e;o<t+e;++o)s.push(r[o].replace(/^\s*at\s+/,""));return s},lib.f.smartFloorDivide=function(e,t){const r=e/t,o=Math.ceil(r);return o-r<1e-4?o:Math.floor(r)},lib.f.randomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},lib.f.getOs=function(){if(globalThis.browser?.runtime?.getPlatformInfo)return browser.runtime.getPlatformInfo().then((e=>e.os));if(globalThis.chrome?.runtime?.getPlatformInfo)return new Promise(((e,t)=>chrome.runtime.getPlatformInfo((t=>e(t.os)))));if(globalThis.navigator?.userAgent){const e=navigator.userAgent;if(e.includes("Mac OS X"))return Promise.resolve("mac");if(e.includes("CrOS"))return Promise.resolve("cros");if(e.includes("Linux"))return Promise.resolve("linux");if(e.includes("Android"))return Promise.resolve("android");if(e.includes("Windows"))return Promise.resolve("windows")}return Promise.reject(null)},lib.f.getChromeMilestone=function(){if(globalThis.navigator?.userAgent){const e=navigator.userAgent.match(/\sChrome\/(\d+)/);if(e)return parseInt(e[1],10)}return NaN},lib.f.lastError=function(e=null){let t;return globalThis.browser?.runtime?t=browser.runtime.lastError:globalThis.chrome?.runtime&&(t=chrome.runtime.lastError),t&&t.message?t.message:e},lib.f.isValidUrl=function(e){if(e?.startsWith("/"))return!0;try{new URL(e)}catch(e){return!1}return!0},lib.f.openWindow=function(e,t=void 0,r=void 0){if(void 0!==e&&!lib.f.isValidUrl(e))return null;if(void 0===globalThis.open){if("_blank"===t)chrome.tabs.create({url:e});else{let t=chrome.windows.CreateType.NORMAL;void 0!==r&&r.includes("chrome=no")&&(t=chrome.windows.CreateType.POPUP),chrome.windows.create({focused:!0,type:t,url:e})}return}const o=globalThis.open(void 0,t,r);return null!==o&&(o.opener=null,e&&(o.location=e)),o},lib.i18n={},lib.i18n.browser_=globalThis.browser?.i18n?browser.i18n:globalThis.chrome?.i18n?chrome.i18n:null,lib.i18n.browserSupported=function(){return null!==lib.i18n.browser_},lib.i18n.getAcceptLanguages=function(){const e=navigator.languages||[navigator.language];return Promise.resolve(e)},lib.i18n.getMessage=function(e,t=[],r=""){if(lib.i18n.browser_){const r=lib.i18n.browser_.getMessage(e,t);if(r)return r}return lib.i18n.replaceReferences(r,t)},lib.i18n.replaceReferences=function(e,t=[]){return null===t&&(t=[]),t instanceof Array||(t=[t]),e.replace(/\$(\d+)/g,((e,r)=>r<=t.length?t[r-1]:""))},lib.i18n.resolveLanguage=function(e){const[t,r]=e.toLowerCase().split(/[-_]/,2);return"es"==t?[void 0,"es"].includes(r)?["es"]:["es_419"]:"pt"==t?[void 0,"br"].includes(r)?["pt_BR"]:["pt_PT"]:"zh"==t?["tw","hk","mo"].includes(r)?["zh_TW"]:["zh_CN"]:"en"==t?[void 0,"us","lr","ph"].includes(r)?["en"]:["en_GB","en"]:r?[e.replace(/-/g,"_"),t]:[t]},lib.MessageManager=function(e,t=!1){this.languages_=[];let r=!1;for(let t=0;t<e.length&&!r;t++)for(const o of lib.i18n.resolveLanguage(e[t])){if("en"==o){r=!0;break}this.languages_.includes(o)||this.languages_.push(o)}this.languages_.push("en"),this.useCrlf=t,this.messages_={}},lib.MessageManager.Messages,lib.MessageManager.prototype.addMessages=function(e){for(const t in e){const r=e[t];r.placeholders?this.messages_[t.toUpperCase()]=r.message.replace(/\$([a-z][^\s$]+)\$/gi,(function(r,o){return e[t].placeholders[o.toUpperCase()].content})):this.messages_[t.toUpperCase()]=r.message}},lib.MessageManager.prototype.findAndLoadMessages=async function(e){if(!lib.i18n.browserSupported())for(let t=this.languages_.length-1;t>=0;t--){const r=this.languages_[t],o=lib.i18n.replaceReferences(e,r);try{await this.loadMessages(o)}catch(e){console.warn(`Error fetching ${r} messages at ${o}`,e,"Trying all languages in reverse order:",this.languages_)}}},lib.MessageManager.prototype.loadMessages=function(e){return new Promise(((t,r)=>{const o=new XMLHttpRequest;o.onload=()=>{try{this.addMessages(JSON.parse(o.responseText)),t()}catch(e){r(e)}},o.onerror=()=>r(o),o.open("GET",e),o.send()}))},lib.MessageManager.prototype.get=function(e,t,r){let o=lib.i18n.getMessage(e,t);return o||(o=this.messages_[e],o||(console.warn("Unknown message: "+e),o=void 0===r?e:r,this.messages_[e]=o),o=lib.i18n.replaceReferences(o,t)),this.useCrlf&&(o=o.replace(/\n/g,"\r\n")),o},lib.MessageManager.prototype.processI18nAttributes=function(e){const t=e.querySelectorAll("[i18n]");for(let e=0;e<t.length;e++)this.processI18nAttribute(t[e])},lib.MessageManager.prototype.processI18nAttribute=function(e){let t=e.getAttribute("i18n");if(t){try{t=JSON.parse(t)}catch(r){throw console.error("Can't parse "+e.tagName+"#"+e.id+": "+t),r}for(let o in t){const s=o;let i=t[o];i.startsWith("=")&&(o=i.substr(1),i=t[o]),i.startsWith("$")&&(r=e.getAttribute(i.substr(1))+"_"+o,i=r.replace(/-/g,"_").toUpperCase());const n=this.get(i);"_"==s?e.textContent=n:e.setAttribute(s,n)}var r}},lib.PreferenceManager=class{constructor(e,t="/",{finegrain:r=!0}={}){t.endsWith("/")||(t+="/"),this.prefix=t,this.finegrain_=r,this.realStorage_=this.storage=e,this.finegrain_||(this.storage=new lib.Storage.Condenser(this.realStorage_,this.prefix)),this.storageObserver_=this.onStorageChange_.bind(this),this.storage.addObserver(this.storageObserver_),this.trace=!1,this.isImportingJson_=!1,this.prefRecords_={},this.globalObservers_=new lib.Event,this.onPrefixChange=new lib.Event,this.childFactories_={},this.childLists_={}}async setPrefix(e){if(e.endsWith("/")||(e+="/"),e!==this.prefix){this.prefix=e;for(const e in this.prefRecords_)this.prefRecords_[e].currentValue=this.DEFAULT_VALUE;this.finegrain_||(this.storage=new lib.Storage.Condenser(this.realStorage_,this.prefix)),await this.readStorage(),this.onPrefixChange.emit(this.prefix,this),this.notifyAll()}}async readStorage(){const e=Object.keys(this.prefRecords_).map((e=>this.prefix+e));if(this.trace&&console.log(`Preferences read: ${this.prefix}`),!this.finegrain_){const t=await this.realStorage_.getItems(e),r=Object.keys(t);if(r.length){const o=await this.storage.getItems(e);0===Object.keys(o).length&&await this.storage.setItems(t),await this.realStorage_.removeItems(r)}}const t=await this.storage.getItems(e),r=this.prefix.length;for(const e in t){const o=t[e],s=e.substr(r),i=s in this.childLists_&&JSON.stringify(o)!=JSON.stringify(this.prefRecords_[s].currentValue);this.prefRecords_[s].currentValue=o,i&&await this.syncChildList(s)}}definePreference(e,t,r=void 0){let o=this.prefRecords_[e];o?this.changeDefault(e,t):o=this.prefRecords_[e]=new Record(e,t),r&&o.onChange.addListener(r)}definePreferences(e){for(let t=0;t<e.length;t++)this.definePreference(e[t][0],e[t][1],e[t][2])}defineChildren(e,t){this.definePreference(e,[],this.onChildListChange_.bind(this,e)),this.childFactories_[e]=t,this.childLists_[e]={}}addObserver(e,t){if(!(e in this.prefRecords_))throw new Error(`Unknown preference: ${e}`);this.prefRecords_[e].onChange.addListener(t)}addObservers(e,t){if(e&&"function"!=typeof e)throw new Error("Invalid param: globals");if(e&&this.globalObservers_.addListener(e),t)for(const e in t)this.addObserver(e,t[e])}removeObserver(e,t){if(!(e in this.prefRecords_))throw new Error(`Unknown preference: ${e}`);this.prefRecords_[e].onChange.removeListener(t)}notifyAll(){for(const e in this.prefRecords_)this.notifyChange_(e)}notifyChange_(e){const t=this.prefRecords_[e];if(!t)throw new Error(`Unknown preference: ${e}`);const r=t.get();this.globalObservers_.emit(e,r),t.onChange.emit(r,e,this)}createChild(e,t=void 0,r=void 0){const o=this.get(e);if(r){if(-1!=o.indexOf(r))throw new Error(`Duplicate child: ${e}: ${r}`)}else r=lib.PreferenceManager.newRandomId(o,t);const s=this.childFactories_[e](this,r);return s.trace=this.trace,s.resetAll(),this.childLists_[e][r]=s,o.push(r),this.set(e,o,!this.isImportingJson_),s}removeChild(e,t){this.getChild(e,t).resetAll();const r=this.get(e),o=r.indexOf(t);-1!=o&&(r.splice(o,1),this.set(e,r,!this.isImportingJson_)),delete this.childLists_[e][t]}getChild(e,t,r=void 0){if(!(e in this.childLists_))throw new Error(`Unknown child list: ${e}`);const o=this.childLists_[e];if(!(t in o)){if(void 0===r)throw new Error(`Unknown "${e}" child: ${t}`);return r}return o[t]}async syncChildList(e){const t=this.get(e),r=Object.keys(this.childLists_[e]);for(let o=0;o<t.length;o++){const s=t[o],i=r.indexOf(s);if(i>=0&&r.splice(i,1),!this.childLists_[e][s]){const t=this.childFactories_[e](this,s);if(!t){console.warn(`Unable to restore child: ${e}: ${s}`);continue}t.trace=this.trace,this.childLists_[e][s]=t,await t.readStorage()}}for(let t=0;t<r.length;t++)delete this.childLists_[e][r[t]]}reset(e){const t=this.prefRecords_[e];if(!t)throw new Error(`Unknown preference: ${e}`);this.storage.removeItem(this.prefix+e),t.currentValue!==this.DEFAULT_VALUE&&(t.currentValue=this.DEFAULT_VALUE,this.notifyChange_(e))}resetAll(){const e=[];for(const e in this.childLists_){const t=this.childLists_[e];for(const e in t)t[e].resetAll()}for(const t in this.prefRecords_)this.prefRecords_[t].currentValue!==this.DEFAULT_VALUE&&(this.prefRecords_[t].currentValue=this.DEFAULT_VALUE,e.push(t));const t=Object.keys(this.prefRecords_).map(function(e){return this.prefix+e}.bind(this));this.storage.removeItems(t),e.forEach(this.notifyChange_.bind(this))}diff(e,t){return typeof e!=typeof t||(/^(undefined|boolean|number|string)$/.test(typeof e)?e!==t:(null!==e||null!==t)&&JSON.stringify(e)!==JSON.stringify(t))}changeDefault(e,t){const r=this.prefRecords_[e];if(!r)throw new Error(`Unknown preference: ${e}`);this.diff(r.defaultValue,t)&&(r.currentValue===this.DEFAULT_VALUE?(r.defaultValue=t,this.notifyChange_(e)):r.defaultValue=t)}changeDefaults(e){for(const t in e)this.changeDefault(t,e[t])}async set(e,t,r=!0){const o=this.prefRecords_[e];if(!o)throw new Error(`Unknown preference: ${e}`);const s=o.get();this.diff(s,t)&&(this.diff(o.defaultValue,t)?(o.currentValue=t,r&&this.storage.setItem(this.prefix+e,t)):(o.currentValue=this.DEFAULT_VALUE,r&&this.storage.removeItem(this.prefix+e)),this.notifyChange_(e))}get(e){const t=this.prefRecords_[e];if(!t)throw new Error(`Unknown preference: ${e}`);return t.get()}getDefault(e){const t=this.prefRecords_[e];if(!t)throw new Error(`Unknown preference: ${e}`);return t.defaultValue}getBoolean(e){const t=this.get(e);return lib.assert("boolean"==typeof t),t}getNumber(e){const t=this.get(e);return lib.assert("number"==typeof t),t}getString(e){const t=this.get(e);return lib.assert("string"==typeof t),t}exportAsJson(){const e={};for(const t in this.prefRecords_)if(t in this.childLists_){e[t]=[];const r=this.get(t);for(let o=0;o<r.length;o++){const s=r[o];e[t].push({id:s,json:this.getChild(t,s).exportAsJson()})}}else{const r=this.prefRecords_[t];r.currentValue!=this.DEFAULT_VALUE&&(e[t]=r.currentValue)}return e}async importFromJson(e){this.isImportingJson_=!0;for(const e in this.childLists_){const t=this.childLists_[e];for(const r in t)this.removeChild(e,r)}this.resetAll();for(const t in e)if(t in this.childLists_){const r=e[t];for(let e=0;e<r.length;e++){const o=r[e].id;let s=this.childLists_[t][o];s||(s=this.createChild(t,null,o)),await s.importFromJson(r[e].json)}await this.storage.setItem(this.prefix+t,this.get(t))}else await this.set(t,e[t]);this.isImportingJson_=!1}onChildListChange_(e){this.syncChildList(e)}onStorageChange_(e){for(const t in e){if(this.prefix&&0!=t.lastIndexOf(this.prefix,0))continue;const r=t.substr(this.prefix.length);if(!(r in this.prefRecords_))continue;const o=this.prefRecords_[r],s=e[t].newValue;let i=o.currentValue;i===o.DEFAULT_VALUE&&(i=void 0),this.diff(i,s)&&(o.currentValue=null==s?o.DEFAULT_VALUE:s,this.notifyChange_(r))}}},lib.PreferenceManager.newRandomId=function(e=[],t=void 0){for(;;){let r=lib.f.randomInt(1,65535).toString(16);if(r=lib.f.zpad(r,4),t&&(r=`${t}:${r}`),-1===e.indexOf(r))return r}},lib.PreferenceManager.prototype.DEFAULT_VALUE=Symbol("DEFAULT_VALUE");class Record{constructor(e,t){this.name=e,this.defaultValue=t,this.currentValue=this.DEFAULT_VALUE,this.onChange=new lib.Event}get(){const e=this.currentValue===this.DEFAULT_VALUE?this.defaultValue:this.currentValue;return"object"==typeof this.defaultValue?JSON.parse(JSON.stringify(e)):e}}function parseJson_(e){if(null!==e)try{return JSON.parse(e)}catch(e){}return e}Record.prototype.DEFAULT_VALUE=lib.PreferenceManager.prototype.DEFAULT_VALUE,lib.resource={},lib.resource.resources_={},lib.resource.ResourceRecord,lib.resource.add=function(e,t,r){lib.resource.resources_[e]={type:t,name:e,data:r}},lib.resource.get=function(e,t){return e in lib.resource.resources_?lib.resource.resources_[e]:(lib.assert(void 0!==t),t)},lib.resource.getText=function(e){const t=lib.resource.resources_[e];if(void 0===t)throw new Error(`Error: Resource "${e}" does not exist`);if(!t.type.startsWith("text/")&&!t.type.startsWith("image/svg"))throw new Error(`Error: Resource "${e}" is not of type string`);return String(lib.resource.resources_[e].data)},lib.resource.getData=function(e,t){return e in lib.resource.resources_?lib.resource.resources_[e].data:t},lib.resource.getDataUrl=function(e,t){const r=lib.resource.get(e,t);return"data:"+r.type+","+r.data},lib.Storage=class{constructor(){this.observers_=[]}addObserver(e){this.observers_.push(e)}removeObserver(e){const t=this.observers_.indexOf(e);-1!==t&&this.observers_.splice(t,1)}async clear(){}async getItem(e){return this.getItems([e]).then((t=>t[e]))}async getItems(e){}async setItem(e,t){await this.setItems({[e]:t})}async setItems(e){}async removeItem(e){await this.removeItems([e])}async removeItems(e){}},lib.Storage.generateStorageChanges=function(e,t){const r={};for(const o in t){const s=t[o];if(e.hasOwnProperty(o)){const t=e[o];t!==s&&(r[o]={oldValue:t,newValue:s})}else r[o]={newValue:s}}for(const o in e)t.hasOwnProperty(o)||(r[o]={oldValue:e[o]});return r},lib.Storage.Chrome=class extends lib.Storage{constructor(e){super(),this.storage_=e,e.onChanged.addListener(this.onChanged_.bind(this))}onChanged_(e){this.observers_.forEach((t=>t(e)))}async clear(){return new Promise((e=>{this.storage_.clear(e)}))}async getItems(e){return new Promise((t=>{this.storage_.get(e,t)}))}async setItem(e,t){return new Promise((r=>{const o=()=>{const s=lib.f.lastError();if(s){if(s.indexOf("MAX_WRITE_OPERATIONS"))return console.warn(`Will retry '${e}' save after exceeding quota:`,s),void setTimeout((()=>this.setItem(e,t).then(o)),1e3);console.error(`Unknown runtime error: ${s}`)}r()};this.setItems({[e]:t}).then(o)}))}async setItems(e){return new Promise((t=>{this.storage_.set(e,t)}))}async removeItems(e){return new Promise((t=>{this.storage_.remove(e,t)}))}},lib.Storage.Condenser=class extends lib.Storage{constructor(e,t){super(),this.cacheSyncing_=null,this.storage_=e,this.key_=t,this.memStorage_=new lib.Storage.Memory,this.syncCallback_=null,this.syncDelay_=500}async initCache_(){null===this.cacheSyncing_&&(this.cacheSyncing_=this.initCache__()),await this.cacheSyncing_}async initCache__(){let e=await this.storage_.getItem(this.key_);if(void 0!==e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e=null}else e=null;"object"==typeof e&&null!==e?(await this.memStorage_.clear(),await this.memStorage_.setItems(e)):await this.storage_.removeItem(this.key_)}}queueWriteSync_(){this.cancelWriteSync_(),this.syncCallback_=setTimeout((async()=>{await this.storage_.setItem(this.key_,JSON.stringify(await this.memStorage_.getItems(null))),this.syncCallback_=null}),this.syncDelay_)}cancelWriteSync_(){null!==this.syncCallback_&&clearTimeout(this.syncCallback_),this.syncCallback_=null}addObserver(e){this.memStorage_.addObserver(e)}removeObserver(e){this.memStorage_.removeObserver(e)}async clear(){this.cancelWriteSync_(),await Promise.all([this.storage_.removeItem(this.key_),this.memStorage_.clear()])}async getItems(e){return await this.initCache_(),this.memStorage_.getItems(e)}async setItems(e){await this.initCache_(),await this.memStorage_.setItems(e),this.queueWriteSync_()}async removeItems(e){await this.initCache_(),await this.memStorage_.removeItems(e),this.queueWriteSync_()}},lib.Storage.Local=class extends lib.Storage{constructor(e=void 0){super(),this.storage_=e||lib.notNull(globalThis.localStorage),globalThis.addEventListener("storage",this.onStorage_.bind(this))}onStorage_(e){if(e.storageArea!=this.storage_)return;const t={};t[e.key]={oldValue:parseJson_(e.oldValue),newValue:parseJson_(e.newValue)};for(let e=0;e<this.observers_.length;e++)this.observers_[e](t)}async clear(){this.storage_.clear(),await 0}async getItems(e){const t={};if(!e){e=[];for(let t=0;t<this.storage_.length;t++)e.push(this.storage_.key(t))}for(const r of e){const e=this.storage_.getItem(r);"string"==typeof e&&(t[r]=parseJson_(e))}return await 0,t}async setItems(e){for(const t in e)this.storage_.setItem(t,JSON.stringify(e[t]));await 0}async removeItems(e){for(let t=0;t<e.length;t++)this.storage_.removeItem(e[t]);await 0}},lib.Storage.Memory=class extends lib.Storage{constructor(){super(),this.storage_={}}async update_(e){const t=lib.Storage.generateStorageChanges(this.storage_,e);this.storage_=e,await 0,Object.keys(t).length&&this.observers_.forEach((e=>e(t)))}async clear(){return this.update_({})}async getItems(e){const t={};return e||(e=Object.keys(this.storage_)),e.forEach((e=>{this.storage_.hasOwnProperty(e)&&(t[e]=this.storage_[e])})),await 0,t}async setItems(e){const t=Object.assign({},this.storage_);for(const r in e)t[r]=JSON.parse(JSON.stringify(e[r]));return this.update_(t)}async removeItems(e){const t=Object.assign({},this.storage_);return e.forEach((e=>delete t[e])),this.update_(t)}},lib.Storage.TerminalPrivate=class extends lib.Storage{constructor(e="crostini.terminal_settings",t=chrome.terminalPrivate){super(),this.prefPath_=lib.notUndefined(e),this.prefValue_={},this.prefValueWriteToResolve_=[],this.prefsLoaded_=!1,this.storage_=t,this.storage_.onPrefChanged.addListener(this.onPrefChanged_.bind(this))}initCache_(){return new Promise((e=>{this.prefsLoaded_?e():this.storage_.getPrefs([this.prefPath_],(t=>{const r=lib.f.lastError();r?console.error(r):this.prefValue_=lib.notNull(t[this.prefPath_]),this.prefsLoaded_=!0,e()}))}))}onPrefChanged_(e){const t=e[this.prefPath_];if(!t||"object"!=typeof t)return;const r=lib.Storage.generateStorageChanges(this.prefValue_,t);this.prefValue_=t,Object.keys(r).length&&setTimeout((()=>{this.observers_.forEach((e=>e(r)))}))}setPref_(){return lib.assert(this.prefsLoaded_),new Promise((e=>{this.prefValueWriteToResolve_.push(e),this.prefValueWriteToResolve_.length>1||setTimeout((()=>{this.storage_.setPrefs({[this.prefPath_]:this.prefValue_},(()=>{const e=lib.f.lastError();e&&console.error(e),this.prefValueWriteToResolve_.forEach((e=>e())),this.prefValueWriteToResolve_=[]}))}))}))}async update_(e){const t=lib.Storage.generateStorageChanges(this.prefValue_,e);this.prefValue_=e,await this.setPref_(),Object.keys(t).length&&this.observers_.forEach((e=>e(t)))}async clear(){return await this.initCache_(),this.update_({})}async getItems(e){await this.initCache_();const t={};e||(e=Object.keys(this.prefValue_));for(const r of e)this.prefValue_.hasOwnProperty(r)&&(t[r]=this.prefValue_[r]);return t}async setItems(e){return await this.initCache_(),this.update_(Object.assign({},this.prefValue_,e))}async removeItems(e){await this.initCache_();const t=Object.assign({},this.prefValue_);return e.forEach((e=>delete t[e])),this.update_(t)}};var a="9.0.0-main+g253a21c",r$1="Thu, 20 Mar 2025 07:57:07 -0700";lib.resource.add("libdot/changelog/version","text/plain",a),lib.resource.add("libdot/changelog/date","text/plain",r$1);const hterm={windowType:null,initWindowType_:async function(){if(globalThis.chrome?.tabs?.getCurrent){const e=await new Promise((e=>{chrome.tabs.getCurrent(e)}));if(e&&globalThis.chrome?.windows?.get){const t=await new Promise((t=>{chrome.windows.get(e.windowId,null,t)}));hterm.windowType=t.type}else hterm.windowType="normal"}else hterm.windowType="normal"},os:null,initOs_:function(){const e=e=>{hterm.os=e};return lib.f.getOs().then(e).catch(e)},desktopNotificationTitle:"♪ %(title) ♪",messageManager:null,init_:async function(){return await hterm.initWindowType_(),await hterm.initOs_(),lib.i18n.getAcceptLanguages().then((e=>{hterm.messageManager||(hterm.messageManager=new lib.MessageManager(e))}))}};hterm.initPromise=hterm.init_(),hterm.sanitizeHtml=function(e){return globalThis.trustedTypes?.createPolicy?(hterm.sanitizeHtml.policy||(hterm.sanitizeHtml.policy=trustedTypes.createPolicy("default",{createHTML:e=>e})),hterm.sanitizeHtml.policy.createHTML(e)):e},hterm.copySelectionToClipboard=function(e,t){const r=()=>{const r=e.createElement("pre");r.id="hterm:copy-to-clipboard-source",r.textContent=t,r.style.cssText="user-select: text;position: absolute;top: -99px",e.body.appendChild(r);const o=e.getSelection(),s=o.anchorNode,i=o.anchorOffset,n=o.focusNode,a=o.focusOffset;try{o.selectAllChildren(r)}catch(e){}try{e.execCommand("copy")}catch(e){}return o.extend&&(s&&o.collapse(s,i),n&&o.extend(n,a)),r.remove(),Promise.resolve()};return(navigator.permissions&&navigator.permissions.query?navigator.permissions.query({name:"clipboard-write"}).then((e=>{const t=(r,o)=>{switch(e.state){case"granted":return r();case"denied":return o();default:return new Promise(((r,o)=>{e.onchange=()=>t(r,o)}))}};return new Promise(t)})).catch((()=>Promise.resolve())):Promise.resolve()).then((()=>navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t).catch(r):r()))},hterm.msg=function(e,t=[],r=""){return hterm.messageManager.get("HTERM_"+e,t,r)},hterm.notify=function(e){const t=(e,t)=>void 0!==e?e:t;null==e&&(e={});const r={body:e.body,icon:t(e.icon,lib.resource.getDataUrl("hterm/images/icon-96"))};let o=t(e.title,globalThis.document.title);o||(o="hterm"),o=lib.f.replaceVars(hterm.desktopNotificationTitle,{title:o});const s=new Notification(o,r);return s.onclick=function(){globalThis.focus(),s.close()},s},hterm.openUrl=function(e){if(globalThis.chrome?.browser?.openTab)chrome.browser.openTab({url:e});else{const t=lib.f.openWindow(e,"_blank");t&&t.focus()}},hterm.Size=class{constructor(e,t){this.width=e,this.height=t}resize(e,t){this.width=e,this.height=t}clone(){return new this.constructor(this.width,this.height)}setTo(e){this.width=e.width,this.height=e.height}equals(e){return this.width==e.width&&this.height==e.height}toString(){return`[hterm.Size: ${this.width}, ${this.height}]`}},hterm.RowCol=class{constructor(e,t,r=!1){this.row=e,this.column=t,this.overflow=!!r}move(e,t,r=!1){this.row=e,this.column=t,this.overflow=!!r}clone(){return new this.constructor(this.row,this.column,this.overflow)}setTo(e){this.row=e.row,this.column=e.column,this.overflow=e.overflow}equals(e){return this.row==e.row&&this.column==e.column&&this.overflow==e.overflow}toString(){return`[hterm.RowCol: ${this.row}, ${this.column}, ${this.overflow}]`}};const n="1.92.1-main+g253a21c",r="253a21c3e9ade4276524df6e915d8eb871022dbe",g="Thu, 20 Mar 2025 07:57:07 -0700";function e(e,t){const r=t.match(/^data:([^,]+),(.*)$/);lib.resource.add(e,...r.slice(1))}function t(e,t){lib.resource.add(e,"text/html;utf8",t)}function i(e,t){lib.resource.add(e,"image/svg+xml;utf8",t)}e("hterm/audio/bell","data:audio/ogg;base64,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"),i("hterm/images/copy",'<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 48 48" fill="currentColor">\n  <path d="M32 2H8C5.79 2 4 3.79 4 6v28h4V6h24V2zm6 8H16c-2.21 0-4 1.79-4 4v28c0 2.21 1.79 4 4 4h22c2.21 0 4-1.79 4-4V14c0-2.21-1.79-4-4-4zm0 32H16V14h22v28z"/>\n</svg>\n'),i("hterm/images/close",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n  <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n</svg>\n'),i("hterm/images/keyboard_arrow_down",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n  <path d="M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z"/>\n</svg>\n'),i("hterm/images/keyboard_arrow_up",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n  <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>\n</svg>\n'),t("hterm/html/find_bar","<meta charset='utf-8'/>\n<style>\n:root {\n  --hterm-grey-200-rgb: 232, 234, 237;  /* #e8eaed */\n  --hterm-grey-200: rgb(var(--hterm-grey-200-rgb));\n  --hterm-grey-400-rgb: 189, 193, 198;  /* #bdc1c6 */\n  --hterm-grey-400: rgb(var(--hterm-grey-400-rgb));\n  --hterm-grey-600-rgb: 128, 134, 139;  /* #80868b */\n  --hterm-grey-600: rgb(var(--hterm-grey-600-rgb));\n  --hterm-grey-800-rgb: 60, 64, 67;  /* #3c4043 */\n  --hterm-grey-800: rgb(var(--hterm-grey-800-rgb));\n}\n\n#hterm\\:find-bar {\n  align-items: center;\n  background: white;\n  border: 1px solid var(--hterm-grey-600);\n  border-radius: 2px;\n  box-shadow: 0 2px 2px 1px rgba(var(--hterm-grey-600-rgb), .1);\n  display: none;\n  font-family: sans-serif;\n  padding: 5px 15px;\n  position: fixed;\n  right: 16px;\n  top : 0;\n  z-index: 1;\n}\n#hterm\\:find-bar.enabled {\n  display: flex;\n}\n#hterm\\:find-bar > input {\n  border: 0;\n  margin: 8px 0;\n  outline: none;\n  width: 200px;\n}\n#hterm\\:find-bar-vertical-separator {\n  align-self: stretch;\n  border-left: 1px solid var(--hterm-grey-400);\n  margin-left: 10px;\n}\n#hterm\\:find-bar > .button {\n  align-items: center;\n  border-radius: 50%;\n  cursor: var(--hterm-mouse-cursor-pointer);\n  display: flex;\n  height: 24px;\n  justify-content: center;\n  margin-left: 8px;\n  transition: background-color 0.3s linear;\n  width: 24px;\n}\n#hterm\\:find-bar > .button.enabled:hover {\n  background-color: var(--hterm-grey-200);\n}\n#hterm\\:find-bar > .button.enabled:active {\n  background-color: var(--hterm-grey-400);\n  transition: background-color 0s;\n}\n#hterm\\:find-bar > .button.enabled > svg {\n  fill: var(--hterm-grey-800);\n}\n#hterm\\:find-bar > .button > svg {\n  height: 20px;\n  fill: var(--hterm-grey-400);\n  width: 20px;\n}\n#hterm\\:find-bar-count {\n  color: var(--hterm-grey-600);\n}\n</style>\n<input type='text'>\n<div id='hterm:find-bar-count'>0/0</div>\n<div id='hterm:find-bar-vertical-separator' tabindex='-1'></div>\n<div id='hterm:find-bar-up' class='button' role='button'></div>\n<div id='hterm:find-bar-down' class='button' role='button'></div>\n<div id='hterm:find-bar-close' class='button enabled' role='button'></div>\n"),t("hterm/html/find_screen","<meta charset='utf-8'/>\n<style>\n#hterm\\:find-result-screen {\n  height: 100%;\n  left: var(--hterm-screen-padding-size);\n  pointer-events: none;\n  position: absolute;\n  top: var(--hterm-screen-padding-size);\n  width: 100%;\n}\n#hterm\\:find-result-screen > find-row {\n  display: block;\n  height: var(--hterm-charsize-height);\n  line-height: var(--hterm-charsize-height);\n}\n#hterm\\:find-result-screen > find-row > .find-highlighter {\n  background-color: var(--hterm-find-result-color);\n  height: var(--hterm-charsize-height);\n  position: absolute;\n}\n#hterm\\:find-result-screen > find-row > .find-highlighter.selected {\n  background-color: var(--hterm-find-result-selected-color);\n}\n</style>\n"),e("hterm/images/icon-96","data:image/png;base64,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"),lib.resource.add("hterm/concat/date","text/plain",g),lib.resource.add("hterm/changelog/version","text/plain",n),lib.resource.add("hterm/changelog/date","text/plain",g),lib.resource.add("hterm/git/HEAD","text/plain",r),hterm.AccessibilityReader=function(e){this.document_=e.ownerDocument;const t=this.document_.createElement("div");t.id="hterm:accessibility-live-region",t.style.cssText="position: absolute;\n                              width: 0; height: 0;\n                              overflow: hidden;\n                              left: -1000px; top: -1000px;",e.appendChild(t),this.accessibilityEnabled=!1,this.liveElement_=this.document_.createElement("p"),this.liveElement_.setAttribute("aria-live","polite"),t.appendChild(this.liveElement_),this.assertiveLiveElement_=this.document_.createElement("p"),this.assertiveLiveElement_.setAttribute("aria-live","assertive"),t.appendChild(this.assertiveLiveElement_),this.queue_=[],this.nextReadTimer_=null,this.cursorIsChanging_=!1,this.cursorChangeQueue_=[],this.lastCursorRowString_=null,this.lastCursorRow_=null,this.lastCursorColumn_=null,this.hasUserGesture=!1},hterm.AccessibilityReader.DELAY=50,hterm.AccessibilityReader.prototype.setAccessibilityEnabled=function(e){e||this.clear(),this.accessibilityEnabled=e},hterm.AccessibilityReader.prototype.decorate=function(e){["keydown","keypress","keyup","textInput"].forEach((t=>{e.addEventListener(t,(()=>{this.hasUserGesture=!0}))}))},hterm.AccessibilityReader.prototype.beforeCursorChange=function(e,t,r){this.accessibilityEnabled&&this.hasUserGesture&&!this.cursorIsChanging_&&(this.cursorIsChanging_=!0,this.lastCursorRowString_=e,this.lastCursorRow_=t,this.lastCursorColumn_=r)},hterm.AccessibilityReader.prototype.afterCursorChange=function(e,t,r){if(this.cursorIsChanging_){if(this.cursorIsChanging_=!1,!this.announceAction_(e,t,r))for(let e=0;e<this.cursorChangeQueue_.length;++e)this.announce(this.cursorChangeQueue_[e]);this.cursorChangeQueue_=[],this.lastCursorRowString_=null,this.lastCursorRow_=null,this.lastCursorColumn_=null,this.hasUserGesture=!1}},hterm.AccessibilityReader.prototype.announce=function(e){if(this.accessibilityEnabled)if(this.cursorIsChanging_)this.cursorChangeQueue_.push(e);else if("\n"==e&&this.queue_.length>0)this.queue_.push("");else{if(0==this.queue_.length)this.queue_.push(e);else{let t="";0!=this.queue_[this.queue_.length-1].length&&(t=" "),this.queue_[this.queue_.length-1]+=t+e}if(!this.nextReadTimer_){if(1!=this.queue_.length)throw new Error("Expected only one item in queue_ or nextReadTimer_ to be running.");this.nextReadTimer_=setTimeout(this.addToLiveRegion_.bind(this),hterm.AccessibilityReader.DELAY)}}},hterm.AccessibilityReader.prototype.assertiveAnnounce=function(e){this.hasUserGesture&&" "==e&&(e=hterm.msg("SPACE_CHARACTER",[],"Space")),(e=e.trim())==this.assertiveLiveElement_.innerText&&(e="\n"+e),this.clear(),this.assertiveLiveElement_.innerText=e},hterm.AccessibilityReader.prototype.newLine=function(){this.announce("\n")},hterm.AccessibilityReader.prototype.clear=function(){this.liveElement_.innerText="",this.assertiveLiveElement_.innerText="",clearTimeout(this.nextReadTimer_),this.nextReadTimer_=null,this.queue_=[],this.cursorIsChanging_=!1,this.cursorChangeQueue_=[],this.lastCursorRowString_=null,this.lastCursorRow_=null,this.lastCursorColumn_=null,this.hasUserGesture=!1},hterm.AccessibilityReader.prototype.announceAction_=function(e,t,r){if(this.lastCursorRow_!=t)return!1;if(lib.notNull(this.lastCursorRowString_)===e){if(lib.notNull(this.lastCursorColumn_)!==r&&""==this.cursorChangeQueue_.join("").trim()){const e=Math.min(this.lastCursorColumn_,r),t=Math.abs(r-this.lastCursorColumn_);return this.assertiveAnnounce(hterm.wc.substr(this.lastCursorRowString_,e,t)),!0}return!1}if(this.lastCursorRowString_!=e){if(this.lastCursorColumn_+1==r&&" "==hterm.wc.substr(e,r-1,1)&&this.cursorChangeQueue_.length>0&&" "==this.cursorChangeQueue_[0])return this.assertiveAnnounce(" "),!0;const t=r;if(hterm.wc.strWidth(e)<=hterm.wc.strWidth(this.lastCursorRowString_)&&hterm.wc.substr(this.lastCursorRowString_,0,t)==hterm.wc.substr(e,0,t)){let r=hterm.wc.strWidth(e);for(;r>0&&(r!=t&&" "==hterm.wc.substr(e,r-1,1));--r);const o=hterm.wc.strWidth(this.lastCursorRowString_)-r,s=r-t;if(hterm.wc.substr(this.lastCursorRowString_,t+o,s)==hterm.wc.substr(e,t,s)){const e=hterm.wc.substr(this.lastCursorRowString_,t,o);if(""!=e)return this.assertiveAnnounce(e),!0}}return!1}return!1},hterm.AccessibilityReader.prototype.addToLiveRegion_=function(){this.nextReadTimer_=null;let e=this.queue_.join("\n").trim();e==this.liveElement_.innerText&&(e="\n"+e),this.liveElement_.innerText=e,this.queue_=[]},hterm.ContextMenu=function(){this.document_=null,this.element_=null,this.menu_=[]},hterm.ContextMenu.Item,hterm.ContextMenu.SEPARATOR=Symbol("-"),hterm.ContextMenu.prototype.setDocument=function(e){this.element_&&(this.element_.remove(),this.element_=null),this.document_=e,this.regenerate_(),this.document_.body.appendChild(this.element_)},hterm.ContextMenu.prototype.regenerate_=function(){for(this.element_?this.hide():(this.element_=this.document_.createElement("menu"),this.element_.id="hterm:context-menu");this.element_.firstChild;)this.element_.removeChild(this.element_.firstChild);this.menu_.forEach((({name:e,action:t})=>{const r=this.document_.createElement("menuitem");e===hterm.ContextMenu.SEPARATOR?(r.innerHTML=hterm.sanitizeHtml("<hr>"),r.className="separator"):(r.innerText=e,r.addEventListener("mousedown",(function(e){e.preventDefault(),t(e)}))),this.element_.appendChild(r)}))},hterm.ContextMenu.prototype.setItems=function(e){this.menu_=e,this.regenerate_()},hterm.ContextMenu.prototype.show=function(e,t){if(0==this.menu_.length)return;t&&(this.element_.style.fontSize=t.getFontSize(),this.element_.style.fontFamily=t.getFontFamily()),this.element_.style.top=`${e.clientY}px`,this.element_.style.left=`${e.clientX}px`;const r=this.document_.body.getBoundingClientRect();this.element_.style.display="block";const o=this.element_.getBoundingClientRect(),s=Math.max(0,r.height-o.height),i=Math.max(0,r.width-o.width);s<e.clientY&&(this.element_.style.top=`${s}px`),i<e.clientX&&(this.element_.style.left=`${i}px`)},hterm.ContextMenu.prototype.hide=function(){this.element_&&(this.element_.style.display="none")},hterm.FindBar=function(e){this.terminal_=e,this.scrollPort_=e.getScrollPort(),this.findBar_=null,this.input_=null,this.hasFocus=!1,this.upArrowButton_=null,this.downArrowButton_=null,this.closeButton_=null,this.counterLabel_=null,this.results_={},this.pendingFind_=null,this.pendingRedraw_=null,this.pendingNotifyChanges_=null,this.changedRows_=new Set,this.searchText_="",this.batchRow_=0,this.batchNum_=0,this.batchCallbacksForTest_={},this.batchSize=500,this.isVisible=!1,this.visibleRows_=[],this.onScroll_=this.scheduleRedraw_.bind(this),this.selectedRowNum_=0,this.selectedRowIndex_=0,this.selectedOrdinal_=-1,this.resultCount_=0,this.selectedResult_=null,this.matchingRowsIndex_=[],this.selectedResultKnown_=!0},hterm.FindBar.RowResult,hterm.FindBar.Result,hterm.FindBar.prototype.decorate=function(e){this.findBar_=e.createElement("div"),this.findBar_.id="hterm:find-bar",this.findBar_.setAttribute("aria-hidden","true"),this.findBar_.innerHTML=hterm.sanitizeHtml(lib.resource.getText("hterm/html/find_bar")),this.input_=this.findBar_.querySelector("input"),this.upArrowButton_=this.findBar_.querySelector("#hterm\\:find-bar-up"),this.downArrowButton_=this.findBar_.querySelector("#hterm\\:find-bar-down"),this.closeButton_=this.findBar_.querySelector("#hterm\\:find-bar-close"),this.counterLabel_=this.findBar_.querySelector("#hterm\\:find-bar-count"),this.upArrowButton_.innerHTML=hterm.sanitizeHtml(lib.resource.getText("hterm/images/keyboard_arrow_up")),this.downArrowButton_.innerHTML=hterm.sanitizeHtml(lib.resource.getText("hterm/images/keyboard_arrow_down")),this.closeButton_.innerHTML=hterm.sanitizeHtml(lib.resource.getText("hterm/images/close")),this.upArrowButton_.setAttribute("aria-label",hterm.msg("BUTTON_PREVIOUS")),this.downArrowButton_.setAttribute("aria-label",hterm.msg("BUTTON_NEXT")),this.input_.setAttribute("aria-label",hterm.msg("BUTTON_FIND")),this.closeButton_.setAttribute("aria-label",hterm.msg("BUTTON_CLOSE"));const t=e=>e.bind(this);this.input_.addEventListener("input",t(this.onInput_)),this.input_.addEventListener("keydown",t(this.onKeyDown_)),this.input_.addEventListener("keypress",t(this.onKeyPressed_)),this.input_.addEventListener("textInput",t(this.onInputText_)),this.input_.addEventListener("focus",t((()=>{this.hasFocus=!0}))),this.input_.addEventListener("blur",t((()=>{this.hasFocus=!1}))),this.closeButton_.addEventListener("click",t(this.close)),this.upArrowButton_.addEventListener("click",t(this.onPrevious_)),this.downArrowButton_.addEventListener("click",t(this.onNext_)),e.body.appendChild(this.findBar_),this.resultScreen_=e.createElement("div"),this.resultScreen_.id="hterm:find-result-screen",this.resultScreen_.innerHTML=hterm.sanitizeHtml(lib.resource.getText("hterm/html/find_screen")),this.resultScreen_.style.display="none",e.body.appendChild(this.resultScreen_)},hterm.FindBar.prototype.display=function(){this.scrollPort_.subscribe("scroll",this.onScroll_),this.findBar_.classList.add("enabled"),this.findBar_.removeAttribute("aria-hidden"),this.input_.focus(),this.resultScreen_.style.display="",this.isVisible=!0,this.input_.dispatchEvent(new Event("input"))},hterm.FindBar.prototype.close=function(){this.resultScreen_.style.display="none",this.scrollPort_.unsubscribe("scroll",this.onScroll_),this.findBar_.classList.remove("enabled"),this.findBar_.setAttribute("aria-hidden","true"),this.terminal_.focus(),this.isVisible=!1,this.stopSearch(),this.results_={},this.resultCount_=0},hterm.FindBar.prototype.stopSearch=function(){null!==this.pendingFind_&&(clearTimeout(this.pendingFind_),this.pendingFind_=null),this.runBatchCallbackForTest_(0)},hterm.FindBar.prototype.syncResults_=function(){if(this.batchRow_=0,this.batchNum_=0,this.results_={},this.resultCount_=0,this.matchingRowsIndex_.length=0,this.redraw_(),this.updateCounterLabel_(),!this.searchText_)return;const e=this.terminal_.getRowCount(),t=()=>{const r=Math.min(this.batchRow_+this.batchSize,e);for(;this.batchRow_<r;)this.findInRow_(this.batchRow_)&&this.matchingRowsIndex_.push(this.batchRow_),this.batchRow_++;this.batchRow_<e?this.pendingFind_=setTimeout(t):this.stopSearch(),++this.batchNum_,this.runBatchCallbackForTest_(this.batchNum_),this.updateCounterLabel_()};t()},hterm.FindBar.prototype.findInRow_=function(e,t=!1){if(!this.searchText_)return!1;const r=this.results_[e];if(r&&!t)return!0;const o=this.terminal_.getRowText(e).toLowerCase(),s=[];let i,n=0;for(;-1!=(i=o.indexOf(this.searchText_,n));)s.push({index:i,highlighter:null}),n=i+this.searchText_.length;s.length?(this.results_[e]={findRow:null,rowResult:s},0===this.resultCount_&&(this.selectedRowNum_=e,this.selectedOrdinal_=0,this.upArrowButton_.classList.add("enabled"),this.downArrowButton_.classList.add("enabled"),this.scrollToResult_())):delete this.results_[e];const a=s.length-(r?r.rowResult.length:0);return this.resultCount_+=a,e<this.selectedRowNum_&&(this.selectedOrdinal_+=a),s.length>0},hterm.FindBar.prototype.onInput_=function(e){this.searchText_=e.target.value.toLowerCase(),clearTimeout(this.pendingFind_),this.pendingFind_=setTimeout((()=>this.syncResults_()))},hterm.FindBar.prototype.onKeyPressed_=function(e){e.stopPropagation()},hterm.FindBar.prototype.onInputText_=function(e){e.stopPropagation()},hterm.FindBar.prototype.onKeyDown_=function(e){e.metaKey||e.altKey||("Escape"==e.key&&this.close(),"Enter"==e.key&&(e.shiftKey?this.onPrevious_():this.onNext_()),e.ctrlKey&&71==e.keyCode&&(e.shiftKey?this.onPrevious_():this.onNext_(),e.preventDefault()),e.ctrlKey&&70==e.keyCode&&e.preventDefault()),e.stopPropagation()},hterm.FindBar.prototype.setFindResultColor=function(e){void 0===e&&(e=this.terminal_.getPrefs().getString("find-result-color")),this.terminal_.setCssVar("find-result-color",e)},hterm.FindBar.prototype.setFindResultSelectedColor=function(e=void 0){void 0===e&&(e=this.terminal_.getPrefs().getString("find-result-selected-color")),this.terminal_.setCssVar("find-result-selected-color",e)},hterm.FindBar.prototype.setBatchCallbackForTest=function(e,t){this.batchCallbacksForTest_[e]=t},hterm.FindBar.prototype.redraw_=function(){const e=this.scrollPort_.getTopRowIndex(),t=this.scrollPort_.getBottomRowIndex(e);this.visibleRows_.forEach((e=>{e.remove()})),this.visibleRows_=[];for(let r=e;r<=t;r++){const e=this.fetchRowNode_(r);this.resultScreen_.appendChild(e),this.visibleRows_.push(e)}delete this.pendingRedraw_,this.highlightSelectedResult_()},hterm.FindBar.prototype.fetchRowNode_=function(e){e>=this.batchRow_&&this.findInRow_(e);const t=this.results_[e];if(t&&t.findRow)return t.findRow;const r=this.terminal_.getDocument().createElement("find-row");return t?(t.rowResult.forEach((e=>{const t=this.terminal_.getDocument().createElement("div");t.classList.add("find-highlighter"),t.style.left=`calc(var(--hterm-charsize-width) * ${e.index})`,t.style.width=`calc(var(--hterm-charsize-width) * ${this.searchText_.length})`,e.highlighter=t,r.appendChild(t)})),t.findRow=r):r},hterm.FindBar.prototype.scheduleRedraw_=function(){this.pendingRedraw_||(this.pendingRedraw_=setTimeout((()=>{this.redraw_()})))},hterm.FindBar.prototype.runBatchCallbackForTest_=function(e){const t=this.batchCallbacksForTest_[e];t&&(t(),delete this.batchCallbacksForTest_[e])},hterm.FindBar.prototype.updateCounterLabel_=function(){0===this.resultCount_&&(this.selectedRowNum_=0,this.selectedRowIndex_=0,this.selectedOrdinal_=-1,this.selectedResultKnown_=!0,this.upArrowButton_.classList.remove("enabled"),this.downArrowButton_.classList.remove("enabled")),this.selectedResultKnown_?this.counterLabel_.textContent=hterm.msg("FIND_COUNTER_LABEL",[this.selectedOrdinal_+1,this.resultCount_]):this.counterLabel_.textContent=hterm.msg("FIND_RESULT_COUNT",[this.resultCount_]),this.highlightSelectedResult_()},hterm.FindBar.indexOf=function(e,t){let r=-1,o=0,s=e.length-1;for(;o<=s;){const i=Math.floor((o+s)/2);e[i]<=t?(r=i,o=i+1):s=i-1}return r},hterm.FindBar.prototype.canUseMatchingRowsIndex_=function(e){const t=this.scrollPort_.getTopRowIndex(),r=this.scrollPort_.getBottomRowIndex(t),o=this.matchingRowsIndex_,s=this.selectedRowNum_;return this.batchRow_>r||e>0&&s<o[o.length-1]||e<0&&s<this.batchRow_&&s>o[0]},hterm.FindBar.prototype.selectNext_=function(e){const t=(e,t,r)=>(e+t+r)%r,r=(t,r)=>e>0?t:r,o=this.results_[this.selectedRowNum_];if(o&&void 0!==o.rowResult[this.selectedRowIndex_+e])this.selectedRowIndex_+=e;else{let o=this.scrollPort_.getTopRowIndex();const s=this.scrollPort_.getBottomRowIndex(o),i=this.matchingRowsIndex_,n=this.selectedRowNum_;if(this.canUseMatchingRowsIndex_(e)){let r=hterm.FindBar.indexOf(i,n);!this.selectedResultKnown_&&e<0&&r++,this.selectedRowNum_=i[t(r,e,i.length)]}else{let t=n+e;o=Math.max(o,this.batchRow_),(n<o||n>s)&&(t=r(o,s));const a=r(s+1,o-1);i.length>0&&(this.selectedRowNum_=i[r(0,i.length-1)]);for(let r=t;r!=a;r+=e)if(this.results_[r]){this.selectedRowNum_=r;break}}const a=this.results_[this.selectedRowNum_];this.selectedRowIndex_=r(0,a.rowResult.length-1)}const s=!this.selectedResultKnown_&&e>0?0:e;this.selectedOrdinal_=t(this.selectedOrdinal_,s,this.resultCount_),this.selectedResultKnown_=!0,this.scrollToResult_(),this.updateCounterLabel_()},hterm.FindBar.prototype.onNext_=function(){this.downArrowButton_.classList.contains("enabled")&&this.selectNext_(1)},hterm.FindBar.prototype.onPrevious_=function(){this.upArrowButton_.classList.contains("enabled")&&this.selectNext_(-1)},hterm.FindBar.prototype.scrollToResult_=function(){const e=this.scrollPort_.getTopRowIndex(),t=this.scrollPort_.getBottomRowIndex(e);(this.selectedRowNum_<e||this.selectedRowNum_>t)&&this.scrollPort_.scrollRowToMiddle(this.selectedRowNum_)},hterm.FindBar.prototype.highlightSelectedResult_=function(){this.selectedResult_&&(this.selectedResult_.classList.remove("selected"),this.selectedResult_=null),this.resultCount_&&this.selectedResultKnown_&&(this.selectedResult_=this.results_[this.selectedRowNum_].rowResult[this.selectedRowIndex_].highlighter,this.selectedResult_&&this.selectedResult_.classList.add("selected"))},hterm.FindBar.prototype.scheduleNotifyChanges=function(e){this.isVisible&&(this.changedRows_.add(e),this.pendingNotifyChanges_||(this.pendingNotifyChanges_=setTimeout((()=>{this.notifyChanges_()}))))},hterm.FindBar.prototype.notifyChanges_=function(){this.changedRows_.forEach((e=>{e+=this.scrollPort_.getTopRowIndex();const t=this.results_[e],r=this.findInRow_(e,!0);if(this.selectedRowNum_==e&&(this.selectedOrdinal_-=this.selectedRowIndex_,this.selectedRowIndex_=0,this.selectedResultKnown_=r),!!t!==r){const t=hterm.FindBar.indexOf(this.matchingRowsIndex_,e);r?this.matchingRowsIndex_.splice(t+1,0,e):this.matchingRowsIndex_.splice(t,1)}})),this.updateCounterLabel_(),this.redraw_(),this.changedRows_.clear(),delete this.pendingNotifyChanges_},hterm.Keyboard=function(e){this.terminal=e,this.keyboardElement_=null,this.handlers_=[["focusout",this.onFocusOut_.bind(this)],["keydown",this.onKeyDown_.bind(this)],["keypress",this.onKeyPress_.bind(this)],["keyup",this.onKeyUp_.bind(this)],["textInput",this.onTextInput_.bind(this)]],this.keyMap=new hterm.Keyboard.KeyMap(this),this.bindings=new hterm.Keyboard.Bindings,this.altGrMode="none",this.shiftInsertPaste=!0,this.homeKeysScroll=!1,this.pageKeysScroll=!1,this.ctrlPlusMinusZeroZoom=!0,this.ctrlCCopy=!1,this.ctrlVPaste=!1,this.applicationKeypad=!1,this.applicationCursor=!1,this.backspaceSendsBackspace=!1,this.metaSendsEscape=!0,this.passMetaV=!0,this.altSendsWhat="escape",this.altIsMeta=!1,this.altBackspaceIsMetaBackspace=!1,this.altKeyPressed=0,this.mediaKeysAreFKeys=!1,this.previousAltSendsWhat_=null},hterm.Keyboard.KeyActions={CANCEL:Symbol("CANCEL"),DEFAULT:Symbol("DEFAULT"),PASS:Symbol("PASS"),STRIP:Symbol("STRIP")},hterm.Keyboard.KeyAction,hterm.Keyboard.prototype.installKeyboard=function(e){if(e!=this.keyboardElement_){e&&this.keyboardElement_&&this.installKeyboard(null);for(let t=0;t<this.handlers_.length;t++){const r=this.handlers_[t];e?e.addEventListener(r[0],r[1]):this.keyboardElement_.removeEventListener(r[0],r[1])}this.keyboardElement_=e}},hterm.Keyboard.prototype.uninstallKeyboard=function(){this.installKeyboard(null)},hterm.Keyboard.prototype.onTextInput_=function(e){e.data&&this.terminal.onVTKeystroke(e.data)},hterm.Keyboard.prototype.onKeyPress_=function(e){const t=String.fromCharCode(e.which).toLowerCase();if((e.ctrlKey||e.metaKey)&&("c"==t||"v"==t))return;if(9==e.keyCode)return;let r;e.altKey&&"browser-key"==this.altSendsWhat&&0==e.charCode?(r=String.fromCharCode(e.keyCode),e.shiftKey||(r=r.toLowerCase())):e.charCode>=32&&(r=String.fromCharCode(e.charCode)),r&&this.terminal.onVTKeystroke(r),e.preventDefault(),e.stopPropagation()},hterm.Keyboard.prototype.onFocusOut_=function(e){this.altKeyPressed=0},hterm.Keyboard.prototype.onKeyUp_=function(e){18==e.keyCode&&(this.altKeyPressed=this.altKeyPressed&~(1<<e.location-1))},hterm.Keyboard.prototype.onKeyDown_=function(e){18==e.keyCode&&(this.altKeyPressed=this.altKeyPressed|1<<e.location-1);let t=this.keyMap.keyDefs[e.keyCode];t||(console.warn(`No definition for key ${e.key} (keyCode ${e.keyCode})`),t=this.keyMap.keyDefs[0],this.keyMap.addKeyDef(e.keyCode,t));let r=null;const o=s=>{r=s;let n=t[s];return"function"==typeof n&&(n=n.call(this.keyMap,e,t)),n===i&&"normal"!=s&&(n=o("normal")),n},s=hterm.Keyboard.KeyActions.CANCEL,i=hterm.Keyboard.KeyActions.DEFAULT,n=hterm.Keyboard.KeyActions.PASS,a=hterm.Keyboard.KeyActions.STRIP;let h=e.ctrlKey,l=e.shiftKey,c=!this.altIsMeta&&e.altKey,u=this.altIsMeta&&e.altKey||e.metaKey;const d=!/^\[\w+\]$/.test(t.keyCap);switch(this.altGrMode){case"ctrl-alt":d&&h&&c&&(h=!1,c=!1);break;case"right-alt":d&&2&this.terminal.keyboard.altKeyPressed&&(h=!1,c=!1);break;case"left-alt":d&&1&this.terminal.keyboard.altKeyPressed&&(h=!1,c=!1)}const g={keyCode:e.keyCode,shift:e.shiftKey,ctrl:h,alt:c,meta:u};let m;const p=this.bindings.getBinding(g);if(p)if(l=h=c=u=!1,r="normal","function"==typeof p.action){m=p.action.call(this,this.terminal,g)}else m=p.action;else m=o(h?"control":c?"alt":u?"meta":"normal"),l=!e.maskShiftKey&&e.shiftKey;if("function"==typeof m&&(m=m.call(this.keyMap,e,t)),c&&"browser-key"==this.altSendsWhat&&m==i&&(m=n),m!==n&&this.terminal.contextMenu.hide(),m!==n&&(m!==i||h||c||u)&&(m===a&&(c=h=!1,m=t.normal,"function"==typeof m&&(m=m.call(this.keyMap,e,t)),m==i&&2==t.keyCap.length&&(m=t.keyCap.substr(l?1:0,1))),e.preventDefault(),e.stopPropagation(),m!==s))if(m===i||"string"==typeof m){if("control"==r?h=!1:"alt"==r?c=!1:"meta"==r&&(u=!1),"string"==typeof m&&"["==m.substr(0,2)&&(c||h||l||u)){let e=1;l&&(e+=1),c&&(e+=2),h&&(e+=4),u&&(e+=8);const t=";"+e;m=3==m.length?"[1"+t+m.substr(2,1):m.substr(0,m.length-1)+t+m.substr(m.length-1)}else{if(m===i&&(m=t.keyCap.substr(l?1:0,1),h)){const e=t.keyCap.substr(0,1).charCodeAt(0);e>=64&&e<=95&&(m=String.fromCharCode(e-64))}if(c&&"8-bit"==this.altSendsWhat&&1==m.length){const e=m.charCodeAt(0)+128;m=String.fromCharCode(e)}(c&&"escape"==this.altSendsWhat||u&&this.metaSendsEscape)&&(m=""+m)}this.terminal.onVTKeystroke(m)}else console.warn("Invalid action: "+JSON.stringify(m))},hterm.Keyboard.KeyDown,hterm.Keyboard.KeyBindingFunction,hterm.Keyboard.KeyBindingAction,hterm.Keyboard.KeyBinding,hterm.Keyboard.Bindings=function(){this.bindings_={}},hterm.Keyboard.Bindings.OsDefaults={android:{},cros:{"Alt+Shift+I":"PASS","Ctrl+Alt+Z":"PASS","Ctrl+Space":"PASS"},linux:{},mac:{"Meta+Left":'"[H"',"Meta+Right":'"[F"'},windows:{}},hterm.Keyboard.Bindings.prototype.clear=function(){this.bindings_={}},hterm.Keyboard.Bindings.prototype.addBinding_=function(e,t){let r=null;const o=this.bindings_[e.keyCode];if(o)for(let t=0;t<o.length;t++)if(o[t].keyPattern.matchKeyPattern(e)){r=o[t];break}r?r.action=t:(r={keyPattern:e,action:t},o?(this.bindings_[e.keyCode].push(r),o.sort((function(e,t){return hterm.Keyboard.KeyPattern.sortCompare(e.keyPattern,t.keyPattern)}))):this.bindings_[e.keyCode]=[r])},hterm.Keyboard.Bindings.prototype.addBinding=function(e,t){if("string"!=typeof e)return void this.addBinding_(e,t);const r=new hterm.Parser;let o;r.reset(e);try{o=r.parseKeySequence()}catch(e){return void console.error(e)}if(r.isComplete()){if("string"==typeof t){r.reset(t);try{t=r.parseKeyAction()}catch(e){return void console.error(e)}}r.isComplete()?this.addBinding_(new hterm.Keyboard.KeyPattern(o),t):console.error(r.error("Expected end of sequence: "+o))}else console.error(r.error("Expected end of sequence: "+o))},hterm.Keyboard.Bindings.prototype.addBindings=function(e,t=!1){t&&this.addBindings(hterm.Keyboard.Bindings.OsDefaults[hterm.os]||{});for(const t in e)this.addBinding(t,e[t])},hterm.Keyboard.Bindings.prototype.getBinding=function(e){const t=this.bindings_[e.keyCode];if(!t)return null;for(let r=0;r<t.length;r++){const o=t[r];if(o.keyPattern.matchKeyDown(e))return o}return null},hterm.Keyboard.KeyDef,hterm.Keyboard.KeyDefFunction,hterm.Keyboard.KeyDefFunctionProvider,hterm.Keyboard.KeyDefAction,hterm.Keyboard.KeyMap=function(e){this.keyboard=e,this.keyDefs={},this.reset()},hterm.Keyboard.KeyMap.prototype.addKeyDef=function(e,t){e in this.keyDefs&&console.warn("Duplicate keyCode: "+e),this.keyDefs[e]=t},hterm.Keyboard.KeyMap.prototype.reset=function(){this.keyDefs={};const e=hterm.Keyboard.KeyActions.CANCEL,t=hterm.Keyboard.KeyActions.DEFAULT,r=hterm.Keyboard.KeyActions.PASS,o=hterm.Keyboard.KeyActions.STRIP,s=(e,t,r)=>{if("function"==typeof e){return e.call(this,t,r)}return e},i=(e,t)=>(r,o)=>{const i=r.shiftKey||r.ctrlKey||r.altKey||r.metaKey||!this.keyboard.applicationCursor?e:t;return s(i,r,o)},n=(e,t)=>(r,o)=>{const i=this.keyboard.backspaceSendsBackspace?t:e;return s(i,r,o)},a=(e,t)=>(r,o)=>{const i=r.shiftKey?t:e;return r.maskShiftKey=!0,s(i,r,o)},h=(e,t)=>(r,o)=>{const i=r.altKey?t:e;return s(i,r,o)},l=(e,t)=>(r,o)=>{const i=r.shiftKey||r.ctrlKey||r.altKey||r.metaKey?t:e;return s(i,r,o)},c=e=>String.fromCharCode(e.charCodeAt(0)-64),u=e=>(t,r)=>this[e](t,r),d=t=>(o,i)=>this.keyboard.mediaKeysAreFKeys?s(t,o,i):166==o.keyCode||167==o.keyCode||168==o.keyCode?e:r,g=(e,t,r,o,s,i)=>{this.addKeyDef(e,{keyCap:t,normal:r,control:o,alt:s,meta:i})};let m,p,b;globalThis.navigator?.userAgent&&globalThis.navigator.userAgent.includes("Firefox")?(m=59,p=61,b=173,g(171,"+*",t,u("onZoom_"),t,u("onZoom_"))):(m=186,p=187,b=189);g(0,"[UNKNOWN]",r,r,r,r),g(27,"[ESC]","",t,t,t),g(112,"[F1]",l("OP","[P"),t,"[23~",t),g(113,"[F2]",l("OQ","[Q"),t,"[24~",t),g(114,"[F3]",l("OR","[R"),t,"[25~",t),g(115,"[F4]",l("OS","[S"),t,"[26~",t),g(116,"[F5]","[15~",t,"[28~",t),g(117,"[F6]","[17~",t,"[29~",t),g(118,"[F7]","[18~",t,"[31~",t),g(119,"[F8]","[19~",t,"[32~",t),g(120,"[F9]","[20~",t,"[33~",t),g(121,"[F10]","[21~",t,"[34~",t),g(122,"[F11]",u("onF11_"),t,"[42~",t),g(123,"[F12]","[24~",t,"[43~",t),g(192,"`~",t,a(c("@"),c("^")),t,r),g(49,"1!",t,u("onCtrlNum_"),u("onAltNum_"),u("onMetaNum_")),g(50,"2@",t,u("onCtrlNum_"),u("onAltNum_"),u("onMetaNum_")),g(51,"3#",t,u("onCtrlNum_"),u("onAltNum_"),u("onMetaNum_")),g(52,"4$",t,u("onCtrlNum_"),u("onAltNum_"),u("onMetaNum_")),g(53,"5%",t,u("onCtrlNum_"),u("onAltNum_"),u("onMetaNum_")),g(54,"6^",t,u("onCtrlNum_"),u("onAltNum_"),u("onMetaNum_")),g(55,"7&",t,u("onCtrlNum_"),u("onAltNum_"),u("onMetaNum_")),g(56,"8*",t,u("onCtrlNum_"),u("onAltNum_"),u("onMetaNum_")),g(57,"9(",t,u("onCtrlNum_"),u("onAltNum_"),u("onMetaNum_")),g(48,"0)",t,u("onZoom_"),u("onAltNum_"),u("onZoom_")),g(b,"-_",t,u("onZoom_"),t,u("onZoom_")),g(p,"=+",t,u("onZoom_"),t,u("onZoom_")),g(8,"[BKSP]",n("","\b"),n("\b",""),t,t),g(9,"[TAB]",a("\t","[Z"),u("onCtrlTab_"),r,t),g(81,"qQ",t,c("Q"),t,t),g(87,"wW",t,u("onCtrlW_"),t,t),g(69,"eE",t,c("E"),t,t),g(82,"rR",t,c("R"),t,t),g(84,"tT",t,u("onCtrlT_"),t,t),g(89,"yY",t,c("Y"),t,t),g(85,"uU",t,c("U"),t,t),g(73,"iI",t,c("I"),t,t),g(79,"oO",t,c("O"),t,t),g(80,"pP",t,c("P"),t,t),g(219,"[{",t,c("["),t,t),g(221,"]}",t,c("]"),t,t),g(220,"\\|",t,c("\\"),t,t),g(20,"[CAPS]",r,r,r,t),g(65,"aA",t,a(c("A"),u("onCtrlShiftA_")),t,t),g(83,"sS",t,c("S"),t,t),g(68,"dD",t,c("D"),t,t),g(70,"fF",t,a(c("F"),u("onCtrlShiftF_")),t,t),g(71,"gG",t,c("G"),t,t),g(72,"hH",t,c("H"),t,t),g(74,"jJ",t,a(c("J"),r),t,t),g(75,"kK",t,a(c("K"),u("onClear_")),t,t),g(76,"lL",t,a(c("L"),r),t,t),g(m,";:",t,o,t,t),g(222,"'\"",t,o,t,t),g(13,"[ENTER]","\r",t,t,t),g(16,"[SHIFT]",r,r,r,t),g(90,"zZ",t,c("Z"),t,t),g(88,"xX",t,c("X"),t,t),g(67,"cC",t,u("onCtrlC_"),t,u("onMetaC_")),g(86,"vV",t,u("onCtrlV_"),t,u("onMetaV_")),g(66,"bB",t,c("B"),t,t),g(78,"nN",t,u("onCtrlN_"),t,u("onMetaN_")),g(77,"mM",t,c("M"),t,t),g(188,",<",t,h(o,r),t,t),g(190,".>",t,h(o,r),t,t),g(191,"/?",t,a(c("_"),c("?")),t,t),g(17,"[CTRL]",r,r,r,r),g(18,"[ALT]",r,r,r,r),g(91,"[LAPL]",r,r,r,r),g(32," ",t,c("@"),t,t),g(92,"[RAPL]",r,r,r,r),g(93,"[RMENU]",r,r,r,r),g(42,"[PRTSCR]",r,r,r,r),g(145,"[SCRLK]",r,r,r,r),g(19,"[BREAK]",r,r,r,r),g(45,"[INSERT]",u("onKeyInsert_"),t,t,t),g(36,"[HOME]",u("onKeyHome_"),t,t,t),g(33,"[PGUP]",u("onKeyPageUp_"),t,t,t),g(46,"[DEL]",u("onKeyDel_"),t,t,t),g(35,"[END]",u("onKeyEnd_"),t,t,t),g(34,"[PGDOWN]",u("onKeyPageDown_"),t,t,t),g(38,"[UP]",u("onKeyArrowUp_"),t,t,t),g(40,"[DOWN]",u("onKeyArrowDown_"),t,t,t),g(39,"[RIGHT]",i("[C","OC"),t,t,t),g(37,"[LEFT]",i("[D","OD"),t,t,t),g(144,"[NUMLOCK]",r,r,r,r),g(12,"[CLEAR]",r,r,r,r),g(96,"[KP0]",t,t,t,t),g(97,"[KP1]",t,t,t,t),g(98,"[KP2]",t,t,t,t),g(99,"[KP3]",t,t,t,t),g(100,"[KP4]",t,t,t,t),g(101,"[KP5]",t,t,t,t),g(102,"[KP6]",t,t,t,t),g(103,"[KP7]",t,t,t,t),g(104,"[KP8]",t,t,t,t),g(105,"[KP9]",t,t,t,t),g(107,"[KP+]",t,u("onZoom_"),t,u("onZoom_")),g(109,"[KP-]",t,u("onZoom_"),t,u("onZoom_")),g(106,"[KP*]",t,t,t,t),g(111,"[KP/]",t,t,t,t),g(110,"[KP.]",t,t,t,t),"cros"==hterm.os&&(g(166,"[BACK]",d(l("OP","[P")),t,"[23~",t),g(167,"[FWD]",d(l("OQ","[Q")),t,"[24~",t),g(168,"[RELOAD]",d(l("OR","[R")),t,"[25~",t),g(183,"[FSCR]",d(l("OS","[S")),t,"[26~",t),g(182,"[WINS]",d("[15~"),t,"[28~",t),g(216,"[BRIT-]",d("[17~"),t,"[29~",t),g(217,"[BRIT+]",d("[18~"),t,"[31~",t),g(173,"[MUTE]",d("[19~"),t,"[32~",t),g(174,"[VOL-]",d("[20~"),t,"[33~",t),g(175,"[VOL+]",d("[21~"),t,"[34~",t),g(152,"[POWER]",t,t,t,t),g(179,"[PLAY]",d("[18~"),t,"[31~",t),g(154,"[DOGS]",d("[23~"),t,"[42~",t),g(153,"[ASSIST]",t,t,t,t))},hterm.Keyboard.KeyMap.prototype.onKeyInsert_=function(e){return this.keyboard.shiftInsertPaste&&e.shiftKey?hterm.Keyboard.KeyActions.PASS:"[2~"},hterm.Keyboard.KeyMap.prototype.onKeyHome_=function(e){return this.keyboard.homeKeysScroll===e.shiftKey?e.altKey||e.ctrlKey||e.shiftKey||!this.keyboard.applicationCursor?"[H":"OH":(this.keyboard.terminal.scrollHome(),hterm.Keyboard.KeyActions.CANCEL)},hterm.Keyboard.KeyMap.prototype.onKeyEnd_=function(e){return this.keyboard.homeKeysScroll===e.shiftKey?e.altKey||e.ctrlKey||e.shiftKey||!this.keyboard.applicationCursor?"[F":"OF":(this.keyboard.terminal.scrollEnd(),hterm.Keyboard.KeyActions.CANCEL)},hterm.Keyboard.KeyMap.prototype.onKeyPageUp_=function(e){return this.keyboard.pageKeysScroll===e.shiftKey?"[5~":(this.keyboard.terminal.scrollPageUp(),hterm.Keyboard.KeyActions.CANCEL)},hterm.Keyboard.KeyMap.prototype.onKeyDel_=function(e){return this.keyboard.altBackspaceIsMetaBackspace&&this.keyboard.altKeyPressed&&!e.altKey?"":"[3~"},hterm.Keyboard.KeyMap.prototype.onKeyPageDown_=function(e){return this.keyboard.pageKeysScroll===e.shiftKey?"[6~":(this.keyboard.terminal.scrollPageDown(),hterm.Keyboard.KeyActions.CANCEL)},hterm.Keyboard.KeyMap.prototype.onKeyArrowUp_=function(e){return!this.keyboard.applicationCursor&&e.shiftKey?(this.keyboard.terminal.scrollLineUp(),hterm.Keyboard.KeyActions.CANCEL):e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||!this.keyboard.applicationCursor?"[A":"OA"},hterm.Keyboard.KeyMap.prototype.onKeyArrowDown_=function(e){return!this.keyboard.applicationCursor&&e.shiftKey?(this.keyboard.terminal.scrollLineDown(),hterm.Keyboard.KeyActions.CANCEL):e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||!this.keyboard.applicationCursor?"[B":"OB"},hterm.Keyboard.KeyMap.prototype.onClear_=function(e){return this.keyboard.terminal.wipeContents(),hterm.Keyboard.KeyActions.CANCEL},hterm.Keyboard.KeyMap.prototype.onF11_=function(e){return"popup"===hterm.windowType||"app"===hterm.windowType||e.shiftKey?"[23~":hterm.Keyboard.KeyActions.PASS},hterm.Keyboard.KeyMap.prototype.onCtrlNum_=function(e,t){function r(e){return String.fromCharCode(e.charCodeAt(0)-64)}if(this.keyboard.terminal.passCtrlNumber&&!e.shiftKey)return hterm.Keyboard.KeyActions.PASS;switch(t.keyCap.substr(0,1)){case"1":return"1";case"2":return r("@");case"3":return r("[");case"4":return r("\\");case"5":return r("]");case"6":return r("^");case"7":return r("_");case"8":return"";case"9":return"9"}return hterm.Keyboard.KeyActions.PASS},hterm.Keyboard.KeyMap.prototype.onAltNum_=function(e){return this.keyboard.terminal.passAltNumber&&!e.shiftKey?hterm.Keyboard.KeyActions.PASS:hterm.Keyboard.KeyActions.DEFAULT},hterm.Keyboard.KeyMap.prototype.onMetaNum_=function(e){return this.keyboard.terminal.passMetaNumber&&!e.shiftKey?hterm.Keyboard.KeyActions.PASS:hterm.Keyboard.KeyActions.DEFAULT},hterm.Keyboard.KeyMap.prototype.onCtrlTab_=function(e){return this.keyboard.terminal.passCtrlTab?hterm.Keyboard.KeyActions.PASS:hterm.Keyboard.KeyActions.STRIP},hterm.Keyboard.KeyMap.prototype.onCtrlW_=function(e){return this.keyboard.terminal.passCtrlW?hterm.Keyboard.KeyActions.PASS:""},hterm.Keyboard.KeyMap.prototype.onCtrlT_=function(e){return this.keyboard.terminal.passCtrlT?hterm.Keyboard.KeyActions.PASS:""},hterm.Keyboard.KeyMap.prototype.onCtrlShiftA_=function(e){return this.keyboard.terminal.getScrollPort().selectAll(),hterm.Keyboard.KeyActions.CANCEL},hterm.Keyboard.KeyMap.prototype.onCtrlShiftF_=function(e){return this.keyboard.terminal.findBar.display(),hterm.Keyboard.KeyActions.CANCEL},hterm.Keyboard.KeyMap.prototype.onCtrlC_=function(e){const t=this.keyboard.terminal.getDocument().getSelection();if(!t.isCollapsed){if(this.keyboard.ctrlCCopy&&!e.shiftKey)return this.keyboard.terminal.clearSelectionAfterCopy&&setTimeout(t.collapseToEnd.bind(t),50),hterm.Keyboard.KeyActions.PASS;if(!this.keyboard.ctrlCCopy&&e.shiftKey)return this.keyboard.terminal.clearSelectionAfterCopy&&setTimeout(t.collapseToEnd.bind(t),50),this.keyboard.terminal.copySelectionToClipboard(),hterm.Keyboard.KeyActions.CANCEL}return""},hterm.Keyboard.KeyMap.prototype.onCtrlN_=function(e){return this.keyboard.terminal.passCtrlN?hterm.Keyboard.KeyActions.PASS:e.shiftKey?(this.keyboard.terminal.onOpenNewSession(),hterm.Keyboard.KeyActions.CANCEL):""},hterm.Keyboard.KeyMap.prototype.onCtrlV_=function(e){return!e.shiftKey&&this.keyboard.ctrlVPaste||e.shiftKey&&!this.keyboard.ctrlVPaste?!1!==this.keyboard.terminal.paste()?hterm.Keyboard.KeyActions.CANCEL:hterm.Keyboard.KeyActions.PASS:""},hterm.Keyboard.KeyMap.prototype.onMetaN_=function(e){return e.shiftKey?(this.keyboard.terminal.onOpenNewSession(),hterm.Keyboard.KeyActions.CANCEL):hterm.Keyboard.KeyActions.DEFAULT},hterm.Keyboard.KeyMap.prototype.onMetaC_=function(e,t){const r=this.keyboard.terminal.getDocument();return e.shiftKey||r.getSelection().isCollapsed?t.keyCap.substr(e.shiftKey?1:0,1):(this.keyboard.terminal.clearSelectionAfterCopy&&setTimeout((function(){r.getSelection().collapseToEnd()}),50),hterm.Keyboard.KeyActions.PASS)},hterm.Keyboard.KeyMap.prototype.onMetaV_=function(e){return e.shiftKey||this.keyboard.passMetaV?hterm.Keyboard.KeyActions.PASS:hterm.Keyboard.KeyActions.DEFAULT},hterm.Keyboard.KeyMap.prototype.onZoom_=function(e,t){if(this.keyboard.ctrlPlusMinusZeroZoom===e.shiftKey)return"-_"==t.keyCap?"":hterm.Keyboard.KeyActions.CANCEL;const r=t.keyCap.substr(0,1);if("0"==r)this.keyboard.terminal.setFontSize(0);else{let e=this.keyboard.terminal.getFontSize();"-"==r||"[KP-]"==t.keyCap?e-=1:e+=1,this.keyboard.terminal.setFontSize(e)}return hterm.Keyboard.KeyActions.CANCEL},hterm.Keyboard.KeyPattern=function(e){this.wildcardCount=0,this.keyCode=e.keyCode,hterm.Keyboard.KeyPattern.modifiers.forEach(function(t){this[t]=e[t]||!1,"*"==this[t]&&this.wildcardCount++}.bind(this))},hterm.Keyboard.KeyPattern.modifiers=["shift","ctrl","alt","meta"],hterm.Keyboard.KeyPattern.sortCompare=function(e,t){return e.wildcardCount<t.wildcardCount?-1:e.wildcardCount>t.wildcardCount?1:0},hterm.Keyboard.KeyPattern.prototype.match_=function(e,t){if(this.keyCode!=e.keyCode)return!1;let r=!0;return hterm.Keyboard.KeyPattern.modifiers.forEach(function(o){const s=o in e&&e[o];r&&(t||"*"!=this[o])&&this[o]!=s&&(r=!1)}.bind(this)),r},hterm.Keyboard.KeyPattern.prototype.matchKeyDown=function(e){return this.match_(e,!1)},hterm.Keyboard.KeyPattern.prototype.matchKeyPattern=function(e){return this.match_(e,!0)},hterm.NotificationCenter=class{constructor(e,t=void 0){this.parent_=e,this.reader_=t,this.container_=this.newContainer_(),this.timeout_=null,this.fadeout_=200}newContainer_(){const e=this.parent_.ownerDocument.createElement("div");return e.setAttribute("role","dialog"),e.style.cssText='color: rgb(var(--hterm-background-color));background-color: rgb(var(--hterm-foreground-color));border-radius: 12px;font: 500 var(--hterm-font-size) "Noto Sans", sans-serif;opacity: 0.75;padding: 0.923em 1.846em;position: absolute;user-select: none;transition: opacity 180ms ease-in;z-index: 10;',e.addEventListener("mousedown",(function(e){e.preventDefault(),e.stopPropagation()}),!0),e}show(e,{timeout:t=1500}={}){const r="string"==typeof e?new Text(e):e;if(this.container_.parentNode&&null===this.timeout_&&null!==t)return;this.container_.textContent="",this.container_.appendChild(r),this.container_.style.opacity="0.75",this.container_.parentNode||this.parent_.appendChild(this.container_);const o=this.container_.getBoundingClientRect();this.container_.style.top=`calc(50% - ${o.height/2}px)`,this.container_.style.left=`calc(50% - ${o.width/2}px)`,this.reader_&&this.reader_.assertiveAnnounce(this.container_.textContent),this.timeout_&&(clearTimeout(this.timeout_),this.timeout_=null),null!==t&&(this.timeout_=setTimeout((()=>{this.container_.style.opacity="0",this.timeout_=setTimeout((()=>this.hide()),this.fadeout_)}),t))}hide(){this.timeout_&&(clearTimeout(this.timeout_),this.timeout_=null),this.container_.remove(),this.container_.textContent=""}},hterm.Options=function(e=void 0){this.wraparound=!e||e.wraparound,this.reverseWraparound=!!e&&e.reverseWraparound,this.originMode=!!e&&e.originMode,this.autoCarriageReturn=!!e&&e.autoCarriageReturn,this.cursorVisible=!!e&&e.cursorVisible,this.cursorBlink=!!e&&e.cursorBlink,this.insertMode=!!e&&e.insertMode,this.reverseVideo=!!e&&e.reverseVideo,this.bracketedPaste=!!e&&e.bracketedPaste},hterm.Parser=function(){this.source="",this.pos=0,this.ch=null},hterm.Parser.prototype.error=function(e){return new Error("Parse error at "+this.pos+": "+e)},hterm.Parser.prototype.isComplete=function(){return this.pos==this.source.length},hterm.Parser.prototype.reset=function(e,t=0){this.source=e,this.pos=t,this.ch=e.substr(0,1)},hterm.Parser.prototype.parseKeySequence=function(){const e={keyCode:null};for(const t in hterm.Parser.identifiers.modifierKeys)e[hterm.Parser.identifiers.modifierKeys[t]]=!1;for(;this.pos<this.source.length;){this.skipSpace();const t=this.parseToken();if("integer"==t.type)e.keyCode=t.value;else if("identifier"==t.type){const r=t.value.toUpperCase();if(r in hterm.Parser.identifiers.modifierKeys&&hterm.Parser.identifiers.modifierKeys.hasOwnProperty(r)){const o=hterm.Parser.identifiers.modifierKeys[r];if(e[o]&&"*"!=e[o])throw this.error("Duplicate modifier: "+t.value);e[o]=!0}else{if(!(r in hterm.Parser.identifiers.keyCodes)||!hterm.Parser.identifiers.keyCodes.hasOwnProperty(r))throw this.error("Unknown key: "+t.value);e.keyCode=hterm.Parser.identifiers.keyCodes[r]}}else{if("symbol"!=t.type)throw this.error("Expected integer or identifier");if("*"!=t.value)throw this.error("Unexpected symbol: "+t.value);for(const t in hterm.Parser.identifiers.modifierKeys){const r=hterm.Parser.identifiers.modifierKeys[t];e[r]||(e[r]="*")}}if(this.skipSpace(),"-"!==this.ch&&"+"!==this.ch)break;if(null!=e.keyCode)throw this.error("Extra definition after target key");this.advance(1)}if(null==e.keyCode)throw this.error("Missing target key");return e},hterm.Parser.prototype.parseKeyAction=function(){this.skipSpace();const e=this.parseToken();if("string"==e.type)return e.value;if("identifier"==e.type){if(e.value in hterm.Parser.identifiers.actions&&hterm.Parser.identifiers.actions.hasOwnProperty(e.value))return hterm.Parser.identifiers.actions[e.value];throw this.error("Unknown key action: "+e.value)}throw this.error("Expected string or identifier")},hterm.Parser.prototype.peekString=function(){return"'"==this.ch||'"'==this.ch},hterm.Parser.prototype.peekIdentifier=function(){return!!this.ch.match(/[a-z_]/i)},hterm.Parser.prototype.peekInteger=function(){return!!this.ch.match(/[0-9]/)},hterm.Parser.prototype.parseToken=function(){if("*"==this.ch){const e={type:"symbol",value:this.ch};return this.advance(1),e}if(this.peekIdentifier())return{type:"identifier",value:this.parseIdentifier()};if(this.peekString())return{type:"string",value:this.parseString()};if(this.peekInteger())return{type:"integer",value:this.parseInteger()};throw this.error("Unexpected token")},hterm.Parser.prototype.parseIdentifier=function(){if(!this.peekIdentifier())throw this.error("Expected identifier");return this.parsePattern(/[a-z0-9_]+/gi)},hterm.Parser.prototype.parseInteger=function(){return"0"==this.ch&&this.pos<this.source.length-1&&"x"==this.source.substr(this.pos+1,1)?parseInt(this.parsePattern(/0x[0-9a-f]+/gi),void 0):parseInt(this.parsePattern(/\d+/g),10)},hterm.Parser.prototype.parseString=function(){let e="";const t=this.ch;if('"'!=t&&"'"!=t)throw this.error("String expected");this.advance(1);const r=new RegExp("[\\\\"+t+"]","g");for(;this.pos<this.source.length;){if(r.lastIndex=this.pos,!r.exec(this.source))throw this.error("Unterminated string literal");if(e+=this.source.substring(this.pos,r.lastIndex-1),this.advance(r.lastIndex-this.pos-1),'"'!=t||"\\"!=this.ch)if("'"!=t||"\\"!=this.ch){if(this.ch==t)return this.advance(1),e}else e+=this.ch,this.advance(1);else this.advance(1),e+=this.parseEscape()}throw this.error("Unterminated string literal")},hterm.Parser.prototype.parseEscape=function(){const e={'"':'"',"'":"'","\\":"\\",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",x:function(){const e=this.parsePattern(/[a-z0-9]{2}/gi);return String.fromCharCode(parseInt(e,16))},u:function(){const e=this.parsePattern(/[a-z0-9]{4}/gi);return String.fromCharCode(parseInt(e,16))}};if(!(this.ch in e)||!e.hasOwnProperty(this.ch))throw this.error("Unknown escape: "+this.ch);let t=e[this.ch];return this.advance(1),"function"==typeof t&&(t=t.call(this)),t},hterm.Parser.prototype.parsePattern=function(e){if(!e.global)throw this.error("Internal error: Span patterns must be global");e.lastIndex=this.pos;const t=e.exec(this.source);if(!t||e.lastIndex-t[0].length!=this.pos)throw this.error("Expected match for: "+e);return this.pos=e.lastIndex-1,this.advance(1),t[0]},hterm.Parser.prototype.advance=function(e){this.pos+=e,this.ch=this.source.substr(this.pos,1)},hterm.Parser.prototype.skipSpace=function(e=void 0){if(!/\s/.test(this.ch))return;const t=/\s+/gm;t.lastIndex=this.pos;const r=this.source;if(t.exec(r)&&(this.pos=t.lastIndex),this.ch=this.source.substr(this.pos,1),e&&-1==this.ch.indexOf(e))throw this.error(`Expected one of ${e}, found: ${this.ch}`)},hterm.Parser.identifiers={},hterm.Parser.identifiers.modifierKeys={SHIFT:"shift",CTRL:"ctrl",CONTROL:"ctrl",ALT:"alt",META:"meta"},hterm.Parser.identifiers.keyCodes={ESCAPE:27,ESC:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,ZERO:48,MINUS:189,EQUAL:187,BACKSPACE:8,BKSP:8,BS:8,TAB:9,Q:81,W:87,E:69,R:82,T:84,Y:89,U:85,I:73,O:79,P:80,BRACKET_LEFT:219,BRACKET_RIGHT:221,CAPS_LOCK:20,CAPSLOCK:20,CAPS:20,A:65,S:83,D:68,F:70,G:71,H:72,J:74,K:75,L:76,ENTER:13,ENT:13,RETURN:13,RET:13,Z:90,X:88,C:67,V:86,B:66,N:78,M:77,SPACE:32,SP:32,PRINT_SCREEN:42,PRTSC:42,SCROLL_LOCK:145,SCRLK:145,BREAK:19,BRK:19,INSERT:45,INS:45,HOME:36,PAGE_UP:33,PGUP:33,DELETE:46,DEL:46,END:35,PAGE_DOWN:34,PGDOWN:34,PGDN:34,UP:38,DOWN:40,RIGHT:39,LEFT:37,NUMLOCK:144,KP0:96,KP1:97,KP2:98,KP3:99,KP4:100,KP5:101,KP6:102,KP7:103,KP8:104,KP9:105,KP_PLUS:107,KP_ADD:107,KP_MINUS:109,KP_SUBTRACT:109,KP_STAR:106,KP_MULTIPLY:106,KP_DIVIDE:111,KP_DECIMAL:110,KP_PERIOD:110,NAVIGATE_BACK:166,NAVIGATE_FORWARD:167,RELOAD:168,FULL_SCREEN:183,WINDOW_OVERVIEW:182,BRIGHTNESS_UP:216,BRIGHTNESS_DOWN:217},hterm.Parser.identifiers.actions={CANCEL:hterm.Keyboard.KeyActions.CANCEL,DEFAULT:hterm.Keyboard.KeyActions.DEFAULT,PASS:hterm.Keyboard.KeyActions.PASS,scrollLineUp:function(e){return e.scrollLineUp(),hterm.Keyboard.KeyActions.CANCEL},scrollLineDown:function(e){return e.scrollLineDown(),hterm.Keyboard.KeyActions.CANCEL},scrollPageUp:function(e){return e.scrollPageUp(),hterm.Keyboard.KeyActions.CANCEL},scrollPageDown:function(e){return e.scrollPageDown(),hterm.Keyboard.KeyActions.CANCEL},scrollToTop:function(e){return e.scrollHome(),hterm.Keyboard.KeyActions.CANCEL},scrollToBottom:function(e){return e.scrollEnd(),hterm.Keyboard.KeyActions.CANCEL},selectAll:function(e){return e.getScrollPort().selectAll(),hterm.Keyboard.KeyActions.CANCEL},clearScreen:function(e){return e.clearHome(),hterm.Keyboard.KeyActions.CANCEL},clearScrollback:function(e){return e.clearScrollback(),hterm.Keyboard.KeyActions.CANCEL},clearTerminal:function(e){return e.wipeContents(),hterm.Keyboard.KeyActions.CANCEL},fullReset:function(e){return e.reset(),hterm.Keyboard.KeyActions.CANCEL},softReset:function(e){return e.softReset(),hterm.Keyboard.KeyActions.CANCEL},copyCurrentSelection:function(e){return e.copySelectionToClipboard(),hterm.Keyboard.KeyActions.CANCEL},pasteClipboard:function(e){return e.paste(),hterm.Keyboard.KeyActions.CANCEL}},hterm.PreferenceManager=class extends lib.PreferenceManager{constructor(e,t=hterm.Terminal.DEFAULT_PROFILE_ID){super(e,hterm.PreferenceManager.prefix_+t),Object.entries(hterm.PreferenceManager.defaultPreferences).forEach((([e,t])=>{this.definePreference(e,t.default)}))}setProfile(e){return this.setPrefix(hterm.PreferenceManager.prefix_+e)}},hterm.PreferenceManager.prefix_="/hterm/profiles/",hterm.PreferenceManager.listProfiles=async function(e){const t=await e.getItems(null),r={};for(const e of Object.keys(t))if(e.startsWith(hterm.PreferenceManager.prefix_)){r[e.slice(hterm.PreferenceManager.prefix_.length).split("/",1)[0]]=!0}return Object.keys(r)},hterm.PreferenceManager.Categories={Keyboard:"Keyboard",Appearance:"Appearance",CopyPaste:"CopyPaste",Sounds:"Sounds",Scrolling:"Scrolling",Encoding:"Encoding",Extensions:"Extensions",Miscellaneous:"Miscellaneous"},hterm.PreferenceManager.categoryDefinitions=[{id:hterm.PreferenceManager.Categories.Appearance,text:"Appearance (fonts, colors, images)"},{id:hterm.PreferenceManager.Categories.CopyPaste,text:"Copy & Paste"},{id:hterm.PreferenceManager.Categories.Encoding,text:"Encoding"},{id:hterm.PreferenceManager.Categories.Keyboard,text:"Keyboard"},{id:hterm.PreferenceManager.Categories.Scrolling,text:"Scrolling"},{id:hterm.PreferenceManager.Categories.Sounds,text:"Sounds"},{id:hterm.PreferenceManager.Categories.Extensions,text:"Extensions"},{id:hterm.PreferenceManager.Categories.Miscellaneous,text:"Miscellaneous"}],hterm.PreferenceManager.definePref_=function(e,t,r,o,s){return{name:e,category:t,default:r,type:o,help:s}},hterm.PreferenceManager.defaultPreferences={"alt-gr-mode":hterm.PreferenceManager.definePref_("AltGr key mode",hterm.PreferenceManager.Categories.Keyboard,null,[null,"none","ctrl-alt","left-alt","right-alt"],"Select an AltGr detection heuristic.\n\n'null': Autodetect based on navigator.language:\n      'en-us' => 'none', else => 'right-alt'\n'none': Disable any AltGr emulation.\n'ctrl-alt': Assume Ctrl+Alt means AltGr.\n'left-alt': Assume left Alt means AltGr.\n'right-alt': Assume right Alt means AltGr."),"alt-backspace-is-meta-backspace":hterm.PreferenceManager.definePref_("Alt+Backspace is Meta+Backspace",hterm.PreferenceManager.Categories.Keyboard,!1,"bool","If set, undoes the ChromeOS Alt+Backspace->Delete remap, so that Alt+Backspace indeed is Alt+Backspace."),"alt-is-meta":hterm.PreferenceManager.definePref_("Treat Alt key as Meta key",hterm.PreferenceManager.Categories.Keyboard,!1,"bool","Whether the Alt key acts as a Meta key or as a distinct Alt key."),"alt-sends-what":hterm.PreferenceManager.definePref_("Alt key modifier handling",hterm.PreferenceManager.Categories.Keyboard,"escape",["escape","8-bit","browser-key"],"Controls how the Alt key is handled.\n\n  escape: Send an ESC prefix.\n  8-bit: Add 128 to the typed character as in xterm.\n  browser-key: Wait for the keypress event and see what the browser\n    says. (This won't work well on platforms where the browser\n    performs a default action for some Alt sequences.)"),"audible-bell-sound":hterm.PreferenceManager.definePref_("Alert bell sound (URI)",hterm.PreferenceManager.Categories.Sounds,"lib-resource:hterm/audio/bell","url","URL of the terminal bell sound. Leave it blank for no audible bell."),"desktop-notification-bell":hterm.PreferenceManager.definePref_("Create desktop notifications for alert bells",hterm.PreferenceManager.Categories.Sounds,!1,"bool",'If true, terminal bells in the background will create a Web Notification. https://www.w3.org/TR/notifications/\n\nDisplaying notifications requires permission from the user. When this option is set to true, hterm will attempt to ask the user for permission if necessary. Browsers might not show this permission request if it was not triggered by a user action.\n\nChrome extensions with the "notifications" permission have permission to display notifications.'),"background-color":hterm.PreferenceManager.definePref_("Background color",hterm.PreferenceManager.Categories.Appearance,"rgb(16, 16, 16)","color","The background color for text with no other color attributes."),"background-image":hterm.PreferenceManager.definePref_("Background image",hterm.PreferenceManager.Categories.Appearance,"","string","CSS value of the background image. Leave it blank for no image.\n\nFor example:\n  url(https://hterm.org/x/example/bg-img)\n  linear-gradient(top bottom, blue, red)"),"background-size":hterm.PreferenceManager.definePref_("Background image size",hterm.PreferenceManager.Categories.Appearance,"","string","CSS value of the background image size."),"background-position":hterm.PreferenceManager.definePref_("Background image position",hterm.PreferenceManager.Categories.Appearance,"","string","CSS value of the background image position.\n\nFor example:\n  10% 10%\n  center"),"backspace-sends-backspace":hterm.PreferenceManager.definePref_("Backspace key behavior",hterm.PreferenceManager.Categories.Keyboard,!1,"bool","If true, the Backspace key will send BS ('\\x08', aka ^H). Otherwise the Backspace key will send '\\x7f'."),"character-map-overrides":hterm.PreferenceManager.definePref_("Character map overrides",hterm.PreferenceManager.Categories.Appearance,null,"value",'This is specified as an object. It is a sparse array, where each property is the character set code and the value is an object that is a sparse array itself. In that sparse array, each property is the received character and the value is the displayed character.\n\nFor example:\n{ "0": {\n  "+": "\\u2192",\n  ",": "\\u2190",\n  "-": "\\u2191",\n  ".": "\\u2193",\n  "0": "\\u2588"\n} }'),"close-on-exit":hterm.PreferenceManager.definePref_("Close window on exit",hterm.PreferenceManager.Categories.Miscellaneous,!0,"bool","Whether to close the window when the command finishes executing."),"cursor-blink":hterm.PreferenceManager.definePref_("Cursor blink",hterm.PreferenceManager.Categories.Appearance,!1,"bool","Whether the text cursor blinks by default. This can be toggled at runtime via terminal escape sequences."),"cursor-blink-cycle":hterm.PreferenceManager.definePref_("Cursor blink rate",hterm.PreferenceManager.Categories.Appearance,[1e3,500],"value","The text cursor blink rate in milliseconds.\n\nA two element array, the first of which is how long the text cursor should be on, second is how long it should be off."),"cursor-shape":hterm.PreferenceManager.definePref_("Text cursor shape",hterm.PreferenceManager.Categories.Appearance,"BLOCK",["BLOCK","BEAM","UNDERLINE"],"The shape of the visible text cursor. This can be changed at runtime via terminal escape sequences."),"cursor-color":hterm.PreferenceManager.definePref_("Text cursor color",hterm.PreferenceManager.Categories.Appearance,"rgba(255, 0, 0, 0.5)","color","The color of the visible text cursor."),"color-palette-overrides":hterm.PreferenceManager.definePref_("Initial color palette",hterm.PreferenceManager.Categories.Appearance,null,"value",'Override colors in the default palette.\n\nThis can be specified as an array or an object. If specified as an object it is assumed to be a sparse array, where each property is a numeric index into the color palette.\n\nValues can be specified as almost any CSS color value. This includes #RGB, #RRGGBB, rgb(...), rgba(...), and any color names that are also part of the standard X11 rgb.txt file.\n\nYou can use \'null\' to specify that the default value should be not be changed. This is useful for skipping a small number of indices when the value is specified as an array.\n\nFor example, these both set color index 1 to blue:\n  {1: "#0000ff"}\n  [null, "#0000ff"]'),"copy-on-select":hterm.PreferenceManager.definePref_("Automatically copy selected content",hterm.PreferenceManager.Categories.CopyPaste,!0,"bool","Automatically copy mouse selection to the clipboard."),"use-default-window-copy":hterm.PreferenceManager.definePref_("Let the browser handle text copying",hterm.PreferenceManager.Categories.CopyPaste,!1,"bool","Whether to use the default browser/OS's copy behavior.\n\nAllow the browser/OS to handle the copy event directly which might improve compatibility with some systems (where copying doesn't work at all), but makes the text selection less robust.\n\nFor example, long lines that were automatically line wrapped will be copied with the newlines still in them."),"clear-selection-after-copy":hterm.PreferenceManager.definePref_("Automatically clear text selection",hterm.PreferenceManager.Categories.CopyPaste,!0,"bool","Whether to clear the selection after copying."),"ctrl-plus-minus-zero-zoom":hterm.PreferenceManager.definePref_("Ctrl++/-/0 zoom behavior",hterm.PreferenceManager.Categories.Keyboard,!0,"bool","If true, Ctrl+Plus/Minus/Zero controls zoom.\nIf false, Ctrl+Shift+Plus/Minus/Zero controls zoom, Ctrl+Minus sends ^_, Ctrl+Plus/Zero do nothing."),"ctrl-c-copy":hterm.PreferenceManager.definePref_("Ctrl+C copy behavior",hterm.PreferenceManager.Categories.Keyboard,!1,"bool","Ctrl+C copies if true, send ^C to host if false.\nCtrl+Shift+C sends ^C to host if true, copies if false."),"ctrl-v-paste":hterm.PreferenceManager.definePref_("Ctrl+V paste behavior",hterm.PreferenceManager.Categories.Keyboard,!1,"bool","Ctrl+V pastes if true, send ^V to host if false.\nCtrl+Shift+V sends ^V to host if true, pastes if false."),"east-asian-ambiguous-as-two-column":hterm.PreferenceManager.definePref_("East Asian Ambiguous use two columns",hterm.PreferenceManager.Categories.Keyboard,!1,"bool","Whether East Asian Ambiguous characters have two column width."),"enable-8-bit-control":hterm.PreferenceManager.definePref_("Support non-UTF-8 C1 control characters",hterm.PreferenceManager.Categories.Keyboard,!1,"bool","True to enable 8-bit control characters, false to ignore them.\n\nWe'll respect the two-byte versions of these control characters regardless of this setting."),"enable-bold":hterm.PreferenceManager.definePref_("Bold text behavior",hterm.PreferenceManager.Categories.Appearance,null,"tristate","If true, use bold weight font for text with the bold/bright attribute. False to use the normal weight font. Null to autodetect."),"enable-bold-as-bright":hterm.PreferenceManager.definePref_("Use bright colors with bold text",hterm.PreferenceManager.Categories.Appearance,!0,"bool","If true, use bright colors (8-15 on a 16 color palette) for any text with the bold attribute. False otherwise."),"enable-blink":hterm.PreferenceManager.definePref_("Enable blinking text",hterm.PreferenceManager.Categories.Appearance,!0,"bool","If true, respect the blink attribute. False to ignore it."),"enable-clipboard-notice":hterm.PreferenceManager.definePref_("Show notification when copying content",hterm.PreferenceManager.Categories.CopyPaste,!0,"bool","Whether to show a message in the terminal when the host writes to the clipboard."),"enable-clipboard-write":hterm.PreferenceManager.definePref_("Allow remote clipboard writes",hterm.PreferenceManager.Categories.CopyPaste,!0,"bool","Allow the remote host to write directly to the local system clipboard.\nRead access is never granted regardless of this setting.\n\nThis is used to control access to features like OSC-52."),"enable-dec12":hterm.PreferenceManager.definePref_("Allow changing of text cursor blinking",hterm.PreferenceManager.Categories.Miscellaneous,!1,"bool","Respect the host's attempt to change the text cursor blink status using DEC Private Mode 12."),"enable-csi-j-3":hterm.PreferenceManager.definePref_("Allow clearing of scrollback buffer (CSI-J-3)",hterm.PreferenceManager.Categories.Miscellaneous,!0,"bool","Whether the Erase Saved Lines function (mode 3) of the Erase Display command (CSI-J) may clear the terminal scrollback buffer.\n\nEnabling this by default is safe."),environment:hterm.PreferenceManager.definePref_("Environment variables",hterm.PreferenceManager.Categories.Miscellaneous,{NCURSES_NO_UTF8_ACS:"1",TERM:"xterm-256color",COLORTERM:"truecolor"},"value","The initial set of environment variables, as an object."),"find-result-color":hterm.PreferenceManager.definePref_("Find results highlight color",hterm.PreferenceManager.Categories.Appearance,"rgba(102, 204, 255, 0.4)","color","The background color to highlight find results."),"find-result-selected-color":hterm.PreferenceManager.definePref_("Find results selected highlight color",hterm.PreferenceManager.Categories.Appearance,"rgba(102, 204, 255, 0.8)","color","The background color to highlight the selected find result."),"font-family":hterm.PreferenceManager.definePref_("Text font family",hterm.PreferenceManager.Categories.Appearance,'"DejaVu Sans Mono", "Noto Sans Mono", "Everson Mono", FreeMono, Menlo, Terminal, monospace',"string","Default font family for the terminal text."),"font-size":hterm.PreferenceManager.definePref_("Text font size",hterm.PreferenceManager.Categories.Appearance,15,"int","The default font size in pixels."),"font-smoothing":hterm.PreferenceManager.definePref_("Text font smoothing",hterm.PreferenceManager.Categories.Appearance,"antialiased","string","CSS font-smoothing property."),"line-height-padding-size":hterm.PreferenceManager.definePref_("Line height padding size",hterm.PreferenceManager.Categories.Appearance,0,"int","The padding size in pixels between each row of the terminal screen."),"foreground-color":hterm.PreferenceManager.definePref_("Text color",hterm.PreferenceManager.Categories.Appearance,"rgb(240, 240, 240)","color","The foreground color for text with no other color attributes."),"enable-resize-status":hterm.PreferenceManager.definePref_("Show terminal dimensions when resized",hterm.PreferenceManager.Categories.Appearance,!1,"bool","Whether to show terminal dimensions when the terminal changes size."),"hide-mouse-while-typing":hterm.PreferenceManager.definePref_("Hide mouse cursor while typing",hterm.PreferenceManager.Categories.Keyboard,null,"tristate","Whether to automatically hide the mouse cursor when typing. By default, autodetect whether the platform/OS handles this.\n\nNote: Your operating system might override this setting and thus you might not be able to always disable it."),"home-keys-scroll":hterm.PreferenceManager.definePref_("Home/End key scroll behavior",hterm.PreferenceManager.Categories.Keyboard,!1,"bool","If true, Home/End controls the terminal scrollbar and Shift+Home/Shift+End are sent to the remote host. If false, then Home/End are sent to the remote host and Shift+Home/Shift+End scrolls."),keybindings:hterm.PreferenceManager.definePref_("Keyboard bindings/shortcuts",hterm.PreferenceManager.Categories.Keyboard,null,"value",'A map of key sequence to key actions. Key sequences include zero or more modifier keys followed by a key code. Key codes can be decimal or hexadecimal numbers, or a key identifier. Key actions can be specified as a string to send to the host, or an action identifier. For a full explanation of the format, see https://hterm.org/x/docs/keyboard-bindings.\n\nSample keybindings:\n{\n  "Ctrl+Alt+K": "clearTerminal",\n  "Ctrl+Shift+L": "PASS",\n  "Ctrl+H": "\'Hello World\'"\n}'),"keybindings-os-defaults":hterm.PreferenceManager.definePref_("Use default OS Keyboard bindings/shortcuts",hterm.PreferenceManager.Categories.Keyboard,!1,"bool","Whether common OS keyboard bindings should be respected instead of always capturing for hterm's own use."),"media-keys-are-fkeys":hterm.PreferenceManager.definePref_("Media keys are Fkeys",hterm.PreferenceManager.Categories.Keyboard,!1,"bool","If true, convert media keys to their Fkey equivalent. If false, let the browser handle the keys."),"meta-sends-escape":hterm.PreferenceManager.definePref_("Meta key modifier handling",hterm.PreferenceManager.Categories.Keyboard,!0,"bool","Send an ESC prefix when pressing a key while holding the Meta key.\n\nFor example, when enabled, pressing Meta+K will send ^[k as if you typed Escape then k. When disabled, only k will be sent."),"mouse-right-click-paste":hterm.PreferenceManager.definePref_("Mouse right clicks paste content",hterm.PreferenceManager.Categories.CopyPaste,!0,"bool",'Paste on right mouse button clicks.\n\nThis option is independent of the "mouse-paste-button" setting.\n\nNote: The primary & secondary buttons are handled for you with left & right handed mice.'),"mouse-paste-button":hterm.PreferenceManager.definePref_("Mouse button paste",hterm.PreferenceManager.Categories.CopyPaste,null,[null,0,1,2,3,4,5,6],"The mouse button to use for pasting.\n\nFor autodetect, we'll use the middle mouse button for non-X11 platforms (including ChromeOS). On X11, we'll use the right mouse button (since the window manager should handle pasting via the middle mouse button).\n\n0 == left (primary) button.\n1 == middle (auxiliary) button.\n2 == right (secondary) button.\n\nThis option is independent of the setting for right-click paste.\n\nNote: The primary & secondary buttons are handled for you with left & right handed mice."),"screen-padding-size":hterm.PreferenceManager.definePref_("Screen padding size",hterm.PreferenceManager.Categories.Appearance,8,"int","The padding size in pixels around the border of the terminal screen.\n\nThis controls the size of the border around the terminal screen so the user can add some visible padding to the edges of the screen."),"screen-border-size":hterm.PreferenceManager.definePref_("Screen border size",hterm.PreferenceManager.Categories.Appearance,0,"int","The border size in pixels around the terminal screen.\n\nThis controls the size of the border around the terminal screen to create a visible line at the edges of the screen."),"screen-border-color":hterm.PreferenceManager.definePref_("Screen border color",hterm.PreferenceManager.Categories.Appearance,"rgb(128, 128, 128)","color","The color for the border around the terminal screen.\n\nThis controls the color of the border around the terminal screen to create a visible line at the edges of the screen."),"word-break-match-left":hterm.PreferenceManager.definePref_("Automatic selection halting (to the left)",hterm.PreferenceManager.Categories.CopyPaste,"[^\\s[\\](){}<>\"'^!@#$%&*,;:`‘“‹«]","string",'Regular expression to halt matching to the left (start) of a selection.\n\nNormally this is a character class to reject specific characters.\nWe allow "~" and "." by default as paths frequently start with those.'),"word-break-match-right":hterm.PreferenceManager.definePref_("Automatic selection halting (to the right)",hterm.PreferenceManager.Categories.CopyPaste,"[^\\s[\\](){}<>\"'^!@#$%&*,;:~.`’”›»]","string","Regular expression to halt matching to the right (end) of a selection.\n\nNormally this is a character class to reject specific characters."),"word-break-match-middle":hterm.PreferenceManager.definePref_("Word break characters",hterm.PreferenceManager.Categories.CopyPaste,"[^\\s[\\](){}<>\"'^]*","string","Regular expression to match all the characters in the middle.\n\nNormally this is a character class to reject specific characters.\n\nUsed to expand the selection surrounding the starting point."),"page-keys-scroll":hterm.PreferenceManager.definePref_("Page Up/Down key scroll behavior",hterm.PreferenceManager.Categories.Keyboard,!1,"bool","If true, Page Up/Page Down controls the terminal scrollbar and Shift+Page Up/Shift+Page Down are sent to the remote host. If false, then Page Up/Page Down are sent to the remote host and Shift+Page Up/Shift+Page Down scrolls."),"pass-alt-number":hterm.PreferenceManager.definePref_("Alt+1..9 switch tab/app behavior",hterm.PreferenceManager.Categories.Keyboard,null,"tristate","Whether Alt+1..9 is passed to the browser.\n\nThis is handy when running hterm in a browser tab, so that you don't lose Chrome's \"switch to tab/app\" keyboard shortcuts. When not running in a tab it's better to send these keys to the host so they can be used in vim or emacs.\n\nIf true, Alt+1..9 will be handled by the browser. If false, Alt+1..9 will be sent to the host. If null, autodetect based on browser platform and window type."),"pass-ctrl-number":hterm.PreferenceManager.definePref_("Ctrl+1..9 switch tab behavior",hterm.PreferenceManager.Categories.Keyboard,null,"tristate","Whether Ctrl+1..9 is passed to the browser.\n\nThis is handy when running hterm in a browser tab, so that you don't lose Chrome's \"switch to tab\" keyboard shortcuts. When not running in a tab it's better to send these keys to the host so they can be used in vim or emacs.\n\nIf true, Ctrl+1..9 will be handled by the browser. If false, Ctrl+1..9 will be sent to the host. If null, autodetect based on browser platform and window type."),"pass-ctrl-n":hterm.PreferenceManager.definePref_("Ctrl+N new window behavior",hterm.PreferenceManager.Categories.Keyboard,!1,"bool",'Whether Ctrl+N is passed to the browser.\n\nIf true, Ctrl+N will be handled by the browser as the "new window" keyboard shortcut. If false, Ctrl+N will be sent to the host.'),"pass-ctrl-t":hterm.PreferenceManager.definePref_("Ctrl+T new tab behavior",hterm.PreferenceManager.Categories.Keyboard,!1,"bool",'Whether Ctrl+T is passed to the browser.\n\nIf true, Ctrl+T will be handled by the browser as the "new tab" keyboard shortcut. If false, Ctrl+T will be sent to the host.'),"pass-ctrl-tab":hterm.PreferenceManager.definePref_("Ctrl+Tab switch tab behavior",hterm.PreferenceManager.Categories.Keyboard,!1,"bool",'Whether Ctrl+Tab and Ctrl+Shift+Tab are passed to the browser.\n\nIf true, Ctrl+Tab and Ctrl+Shift+Tab will be handled by the browser as the "next/previous tab" keyboard shortcut. If false, the Tab key is sent to the host without Ctrl or Shift.'),"pass-ctrl-w":hterm.PreferenceManager.definePref_("Ctrl+W close tab behavior",hterm.PreferenceManager.Categories.Keyboard,!1,"bool",'Whether Ctrl+W is passed to the browser.\n\nIf true, Ctrl+W will be handled by the browser as the "close tab" keyboard shortcut. If false, Ctrl+W will be sent to the host.'),"pass-meta-number":hterm.PreferenceManager.definePref_("Meta+1..9 switch tab behavior",hterm.PreferenceManager.Categories.Keyboard,null,"tristate","Whether Meta+1..9 is passed to the browser.\n\nThis is handy when running hterm in a browser tab, so that you don't lose Chrome's \"switch to tab\" keyboard shortcuts. When not running in a tab it's better to send these keys to the host so they can be used in vim or emacs.\n\nIf true, Meta+1..9 will be handled by the browser. If false, Meta+1..9 will be sent to the host. If null, autodetect based on browser platform and window type."),"pass-meta-v":hterm.PreferenceManager.definePref_("Meta+V paste behavior",hterm.PreferenceManager.Categories.Keyboard,!0,"bool","Whether Meta+V gets passed to the browser.\n\nOn some systems, this is used to paste content."),"paste-on-drop":hterm.PreferenceManager.definePref_("Allow drag & drop to paste",hterm.PreferenceManager.Categories.CopyPaste,!0,"bool","If true, Drag and dropped text will paste into terminal.\nIf false, dropped text will be ignored."),"scroll-on-keystroke":hterm.PreferenceManager.definePref_("Scroll to bottom after keystroke",hterm.PreferenceManager.Categories.Scrolling,!0,"bool","Whether to scroll to the bottom on any keystroke."),"scroll-on-output":hterm.PreferenceManager.definePref_("Scroll to bottom after new output",hterm.PreferenceManager.Categories.Scrolling,!1,"bool","Whether to scroll to the bottom on terminal output."),"scrollbar-visible":hterm.PreferenceManager.definePref_("Scrollbar visibility",hterm.PreferenceManager.Categories.Scrolling,!0,"bool","The vertical scrollbar mode."),"scroll-wheel-may-send-arrow-keys":hterm.PreferenceManager.definePref_("Emulate arrow keys with scroll wheel",hterm.PreferenceManager.Categories.Scrolling,!1,"bool","When using the alternative screen buffer, and DECCKM (Application Cursor Keys) is active, mouse scroll wheel events will emulate arrow keys.\n\nIt can be temporarily disabled by holding the Shift key.\n\nThis frequently comes up when using pagers (less) or reading man pages or text editors (vi/nano) or using screen/tmux."),"scroll-wheel-move-multiplier":hterm.PreferenceManager.definePref_("Mouse scroll wheel multiplier",hterm.PreferenceManager.Categories.Scrolling,1,"int","The multiplier for mouse scroll wheel events when measured in pixels.\n\nAlters how fast the page scrolls."),"terminal-encoding":hterm.PreferenceManager.definePref_("Terminal encoding",hterm.PreferenceManager.Categories.Encoding,"utf-8",["iso-2022","utf-8","utf-8-locked"],"The default terminal encoding (DOCS).\n\nISO-2022 enables character map translations (like graphics maps).\nUTF-8 disables support for those.\n\nThe locked variant means the encoding cannot be changed at runtime via terminal escape sequences.\n\nYou should stick with UTF-8 unless you notice broken rendering with legacy applications."),"shift-insert-paste":hterm.PreferenceManager.definePref_("Shift+Insert paste",hterm.PreferenceManager.Categories.Keyboard,!0,"bool","Whether Shift+Insert is used for pasting or is sent to the remote host."),"user-css":hterm.PreferenceManager.definePref_("Custom CSS (URI)",hterm.PreferenceManager.Categories.Appearance,"","url","URL of user stylesheet to include in the terminal document."),"user-css-text":hterm.PreferenceManager.definePref_("Custom CSS (inline text)",hterm.PreferenceManager.Categories.Appearance,"","multiline-string","Custom CSS text for styling the terminal."),"allow-images-inline":hterm.PreferenceManager.definePref_("Allow inline image display",hterm.PreferenceManager.Categories.Extensions,null,"tristate","Whether to allow the remote host to display images in the terminal.\n\nBy default, we prompt until a choice is made.")},hterm.PubSub=function(){this.observers_={}},hterm.PubSub.addBehavior=function(e){const t=new hterm.PubSub;for(const r in hterm.PubSub.prototype)e[r]=hterm.PubSub.prototype[r].bind(t)},hterm.PubSub.prototype.subscribe=function(e,t){e in this.observers_||(this.observers_[e]=[]),this.observers_[e].push(t)},hterm.PubSub.prototype.unsubscribe=function(e,t){const r=this.observers_[e];if(!r)throw new Error(`Invalid subject: ${e}`);const o=r.indexOf(t);if(o<0)throw new Error(`Not subscribed: ${e}`);r.splice(o,1)},hterm.PubSub.prototype.publish=function(e,t,r=void 0){let o=this.observers_[e];o&&(o=[].concat(o)),r&&(o?o.push(r):o=[r]),o&&setTimeout((function e(r){r<o.length-1&&setTimeout(e,0,r+1),o[r](t)}),0,0)},hterm.Screen=function(e=0){this.rowsArray=[],this.columnCount_=e,this.textAttributes=new hterm.TextAttributes(globalThis.document),this.cursorPosition=new hterm.RowCol(0,0),this.cursorState_=new hterm.Screen.CursorState(this),this.cursorRowNode_=null,this.cursorNode_=null,this.cursorOffset_=0,this.wordBreakMatchLeft=null,this.wordBreakMatchRight=null,this.wordBreakMatchMiddle=null},hterm.Screen.prototype.getSize=function(){return new hterm.Size(this.columnCount_,this.rowsArray.length)},hterm.Screen.prototype.getHeight=function(){return this.rowsArray.length},hterm.Screen.prototype.getWidth=function(){return this.columnCount_},hterm.Screen.prototype.setColumnCount=function(e){this.columnCount_=e,this.cursorPosition.column>=e&&this.setCursorPosition(this.cursorPosition.row,e-1)},hterm.Screen.prototype.shiftRow=function(){return this.shiftRows(1)[0]},hterm.Screen.prototype.shiftRows=function(e){return this.rowsArray.splice(0,e)},hterm.Screen.prototype.unshiftRow=function(e){this.rowsArray.splice(0,0,e)},hterm.Screen.prototype.unshiftRows=function(e){this.rowsArray.unshift.apply(this.rowsArray,e)},hterm.Screen.prototype.popRow=function(){return this.popRows(1)[0]},hterm.Screen.prototype.popRows=function(e){return this.rowsArray.splice(this.rowsArray.length-e,e)},hterm.Screen.prototype.pushRow=function(e){this.rowsArray.push(e)},hterm.Screen.prototype.pushRows=function(e){e.push.apply(this.rowsArray,e)},hterm.Screen.prototype.insertRow=function(e,t){this.rowsArray.splice(e,0,t)},hterm.Screen.prototype.insertRows=function(e,t){for(let r=0;r<t.length;r++)this.rowsArray.splice(e+r,0,t[r])},hterm.Screen.prototype.removeRow=function(e){return this.rowsArray.splice(e,1)[0]},hterm.Screen.prototype.removeRows=function(e,t){return this.rowsArray.splice(e,t)},hterm.Screen.prototype.invalidateCursorPosition=function(){this.cursorPosition.move(0,0),this.cursorRowNode_=null,this.cursorNode_=null,this.cursorOffset_=0},hterm.Screen.prototype.clearCursorRow=function(){let e;this.cursorRowNode_.innerText="",this.cursorRowNode_.removeAttribute("line-overflow"),this.cursorOffset_=0,this.cursorPosition.column=0,this.cursorPosition.overflow=!1,e=this.textAttributes.isDefault()?"":" ".repeat(this.columnCount_);const t=this.textAttributes.inverse;this.textAttributes.inverse=!1,this.textAttributes.syncColors();const r=this.textAttributes.createContainer(e);this.cursorRowNode_.appendChild(r),this.cursorNode_=r,this.textAttributes.inverse=t,this.textAttributes.syncColors()},hterm.Screen.prototype.commitLineOverflow=function(){this.cursorRowNode_.setAttribute("line-overflow",!0)},hterm.Screen.prototype.setCursorPosition=function(e,t){if(!this.rowsArray.length)return void console.warn("Attempt to set cursor position on empty screen.");e>=this.rowsArray.length?(console.error("Row out of bounds: "+e),e=this.rowsArray.length-1):e<0&&(console.error("Row out of bounds: "+e),e=0),t>=this.columnCount_?(console.error("Column out of bounds: "+t),t=this.columnCount_-1):t<0&&(console.error("Column out of bounds: "+t),t=0),this.cursorPosition.overflow=!1;const r=this.rowsArray[e];let o=r.firstChild;o||(o=r.ownerDocument.createTextNode(""),r.appendChild(o));let s=0;for(r==this.cursorRowNode_?t>=this.cursorPosition.column-this.cursorOffset_&&(o=this.cursorNode_,s=this.cursorPosition.column-this.cursorOffset_):this.cursorRowNode_=r,this.cursorPosition.move(e,t);o;){const e=t-s,r=hterm.TextAttributes.nodeWidth(o);if(!o.nextSibling||r>e)return this.cursorNode_=o,void(this.cursorOffset_=e);s+=r,o=o.nextSibling}},hterm.Screen.prototype.syncSelectionCaret=function(e){try{e.collapse(this.cursorNode_,this.cursorOffset_)}catch(e){}},hterm.Screen.prototype.splitNode_=function(e,t){const r=e.cloneNode(!1),o=e.textContent;e.textContent=hterm.TextAttributes.nodeSubstr(e,0,t),r.textContent=hterm.wc.substr(o,t),r.textContent&&e.parentNode.insertBefore(r,e.nextSibling),e.textContent||e.remove()},hterm.Screen.prototype.maybeClipCurrentRow=function(){let e=hterm.TextAttributes.nodeWidth(lib.notNull(this.cursorRowNode_));if(e<=this.columnCount_)return void(this.cursorPosition.column>=this.columnCount_&&(this.setCursorPosition(this.cursorPosition.row,this.columnCount_-1),this.cursorPosition.overflow=!0));const t=this.cursorPosition.column;this.setCursorPosition(this.cursorPosition.row,this.columnCount_-1),e=hterm.TextAttributes.nodeWidth(lib.notNull(this.cursorNode_)),this.cursorOffset_<e-1&&(this.cursorNode_.textContent=hterm.TextAttributes.nodeSubstr(this.cursorNode_,0,this.cursorOffset_+1));const r=this.cursorRowNode_;let o=this.cursorNode_.nextSibling;for(;o;)r.removeChild(o),o=this.cursorNode_.nextSibling;t<this.columnCount_?this.setCursorPosition(this.cursorPosition.row,t):this.cursorPosition.overflow=!0},hterm.Screen.prototype.insertString=function(e,t=void 0){let r=this.cursorNode_,o=r.textContent;this.cursorRowNode_.removeAttribute("line-overflow"),void 0===t&&(t=hterm.wc.strWidth(e)),this.cursorPosition.column+=t;let s=this.cursorOffset_,i=hterm.TextAttributes.nodeWidth(r)-s;if(i<0){const t=" ".repeat(-i);if(this.textAttributes.underline||this.textAttributes.strikethrough||this.textAttributes.background||this.textAttributes.wcNode||!this.textAttributes.asciiNode||null!=this.textAttributes.tileData)if(r.nodeType!=Node.TEXT_NODE&&(r.wcNode||!r.asciiNode||r.tileNode||r.style.textDecoration||r.style.textDecorationStyle||r.style.textDecorationLine||r.style.backgroundColor)){const e=r.ownerDocument.createTextNode(t);this.cursorRowNode_.insertBefore(e,r.nextSibling),this.cursorNode_=r=e,this.cursorOffset_=s=-i,o=t}else r.textContent=o+=t;else e=t+e;i=0}if(this.textAttributes.matchesContainer(r))return r.textContent=0==i?o+e:0==s?e+o:hterm.TextAttributes.nodeSubstr(r,0,s)+e+hterm.TextAttributes.nodeSubstr(r,s),void(this.cursorOffset_+=t);if(0==s){const o=r.previousSibling;if(o&&this.textAttributes.matchesContainer(o))return o.textContent+=e,this.cursorNode_=o,void(this.cursorOffset_=hterm.wc.strWidth(o.textContent));const s=this.textAttributes.createContainer(e);return this.cursorRowNode_.insertBefore(s,r),this.cursorNode_=s,void(this.cursorOffset_=t)}if(0==i){const t=r.nextSibling;if(t&&this.textAttributes.matchesContainer(t))return t.textContent=e+t.textContent,this.cursorNode_=t,void(this.cursorOffset_=hterm.wc.strWidth(e));const o=this.textAttributes.createContainer(e);return this.cursorRowNode_.insertBefore(o,t),this.cursorNode_=o,void(this.cursorOffset_=hterm.TextAttributes.nodeWidth(o))}this.splitNode_(r,s);const n=this.textAttributes.createContainer(e);this.cursorRowNode_.insertBefore(n,r.nextSibling),this.cursorNode_=n,this.cursorOffset_=t},hterm.Screen.prototype.overwriteString=function(e,t=void 0){const r=this.columnCount_-this.cursorPosition.column;if(r){if(void 0===t&&(t=hterm.wc.strWidth(e)),this.textAttributes.matchesContainer(lib.notNull(this.cursorNode_))&&this.cursorNode_.textContent.substr(this.cursorOffset_)==e)return this.cursorOffset_+=t,void(this.cursorPosition.column+=t);this.deleteChars(Math.min(t,r)),this.insertString(e,t)}},hterm.Screen.prototype.deleteChars=function(e){let t=this.cursorNode_,r=this.cursorOffset_;const o=this.cursorPosition.column;if(!(e=Math.min(e,this.columnCount_-o)))return 0;const s=e;let i,n;for(;t&&e;){if(e<0){console.error(`Deleting ${s} chars went negative: ${e}`);break}if(i=hterm.TextAttributes.nodeWidth(t),t.textContent=hterm.TextAttributes.nodeSubstr(t,0,r)+hterm.TextAttributes.nodeSubstr(t,r+e),n=hterm.TextAttributes.nodeWidth(t),t.wcNode&&r<i&&(n&&i==n||!n&&1==r)){const o=this.textAttributes.createContainer(" ");t.parentNode.insertBefore(o,r?t:t.nextSibling),t.textContent="",n=0,e-=1}else e-=i-n;const o=t.nextSibling;0==n&&t!=this.cursorNode_&&t.remove(),t=o,r=0}if(this.cursorNode_.nodeType!=Node.TEXT_NODE&&!this.cursorNode_.textContent){const e=this.cursorNode_;if(e.previousSibling)this.cursorNode_=e.previousSibling,this.cursorOffset_=hterm.TextAttributes.nodeWidth(e.previousSibling);else if(e.nextSibling)this.cursorNode_=e.nextSibling,this.cursorOffset_=0;else{const e=this.cursorRowNode_.ownerDocument.createTextNode("");this.cursorRowNode_.appendChild(e),this.cursorNode_=e,this.cursorOffset_=0}this.cursorRowNode_.removeChild(e)}return s},hterm.Screen.prototype.getLineStartRow_=function(e){for(;e.previousSibling&&e.previousSibling.hasAttribute("line-overflow");)e=e.previousSibling;return e},hterm.Screen.prototype.getLineText_=function(e){let t="",r=e;for(;r&&(t+=r.textContent,r.hasAttribute("line-overflow"));)r=r.nextSibling;return t},hterm.Screen.prototype.getXRowAncestor_=function(e){let t=e;for(;t&&"X-ROW"!==t.nodeName;)t=t.parentNode;return t},hterm.Screen.prototype.getPositionWithOverflow_=function(e,t,r){if(!t)return-1;const o=this.getXRowAncestor_(t);if(!o)return-1;let s=0;for(;o!=e;){if(s+=hterm.TextAttributes.nodeWidth(e),!e.hasAttribute("line-overflow")||!e.nextSibling)return-1;e=e.nextSibling}return s+this.getPositionWithinRow_(e,t,r)},hterm.Screen.prototype.getPositionWithinRow_=function(e,t,r){if(t.parentNode!=e)return null==t.parentNode?-1:this.getPositionWithinRow_(t.parentNode,t,r)+this.getPositionWithinRow_(e,t.parentNode,0);let o=0;for(let s=0;s<e.childNodes.length;s++){const i=e.childNodes[s];if(i==t)return o+r;o+=hterm.TextAttributes.nodeWidth(i)}return-1},hterm.Screen.prototype.getNodeAndOffsetWithOverflow_=function(e,t){for(;e&&t>hterm.TextAttributes.nodeWidth(e);){if(!e.hasAttribute("line-overflow")||!e.nextSibling)return[null,-1];t-=hterm.TextAttributes.nodeWidth(e),e=e.nextSibling}return this.getNodeAndOffsetWithinRow_(e,t)},hterm.Screen.prototype.getNodeAndOffsetWithinRow_=function(e,t){for(let r=0;r<e.childNodes.length;r++){const o=e.childNodes[r],s=hterm.TextAttributes.nodeWidth(o);if(t<=s)return"SPAN"===o.nodeName?this.getNodeAndOffsetWithinRow_(o,t):[o,t];t-=s}return null},hterm.Screen.prototype.setRange_=function(e,t,r,o){const s=this.getNodeAndOffsetWithOverflow_(e,t);if(null==s)return;const i=this.getNodeAndOffsetWithOverflow_(e,r);null!=i&&(o.setStart(s[0],s[1]),o.setEnd(i[0],i[1]))},hterm.Screen.prototype.expandSelectionWithWordBreakMatches_=function(e,t,r,o){if(!e)return;const s=e.getRangeAt(0);if(!s||s.toString().match(/\s/))return;const i=this.getXRowAncestor_(lib.notNull(s.startContainer));if(!i)return;const n=this.getLineStartRow_(i);if(!n)return;const a=this.getPositionWithOverflow_(n,lib.notNull(s.startContainer),s.startOffset);if(-1==a)return;const h=this.getPositionWithOverflow_(n,lib.notNull(s.endContainer),s.endOffset);if(-1==h)return;const l=this.getLineText_(n),c=hterm.wc.substring(l,0,h),u=new RegExp(t+o+"$"),d=c.search(u);if(-1==d||d>a)return;const g=hterm.wc.substring(l,a,hterm.wc.strWidth(l)),m=new RegExp("^"+o+r),p=g.match(m);if(!p)return;const b=a+hterm.wc.strWidth(p[0]);-1==b||b<h||(this.setRange_(n,d,b,s),e.addRange(s))},hterm.Screen.prototype.expandSelection=function(e){this.expandSelectionWithWordBreakMatches_(e,lib.notNull(this.wordBreakMatchLeft),lib.notNull(this.wordBreakMatchRight),lib.notNull(this.wordBreakMatchMiddle))},hterm.Screen.prototype.expandSelectionForUrl=function(e){this.expandSelectionWithWordBreakMatches_(e,"[^\\s[\\](){}<>\"'^!@#$%&*,;:`‘“‹«]","[^\\s[\\](){}<>\"'^!@#$%&*,;:~.`’”›»]","[^\\s[\\](){}<>\"'^]*")},hterm.Screen.prototype.saveCursorAndState=function(e){this.cursorState_.save(e)},hterm.Screen.prototype.restoreCursorAndState=function(e){this.cursorState_.restore(e)},hterm.Screen.CursorState=function(e){this.screen_=e,this.cursor=null,this.textAttributes=null,this.GL=this.GR=this.G0=this.G1=this.G2=this.G3=null},hterm.Screen.CursorState.prototype.save=function(e){this.cursor=e.terminal.saveCursor(),this.textAttributes=this.screen_.textAttributes.clone(),this.GL=e.GL,this.GR=e.GR,this.G0=e.G0,this.G1=e.G1,this.G2=e.G2,this.G3=e.G3},hterm.Screen.CursorState.prototype.restore=function(e){e.terminal.restoreCursor(this.cursor);const t=this.textAttributes.clone();t.colorPaletteOverrides=this.screen_.textAttributes.colorPaletteOverrides,t.syncColors(),this.screen_.textAttributes=t,e.GL=this.GL,e.GR=this.GR,e.G0=this.G0,e.G1=this.G1,e.G2=this.G2,e.G3=this.G3},hterm.RowProvider=function(){},hterm.RowProvider.prototype.getRowCount=function(){},hterm.RowProvider.prototype.getRowNode=function(e){},hterm.ScrollPort=function(e){hterm.PubSub.addBehavior(this),this.rowProvider_=e,this.characterSize=new hterm.Size(10,10),this.ruler_=null,this.selection=new hterm.ScrollPort.Selection(this),this.currentRowNodeCache_=null,this.previousRowNodeCache_={},this.lastScreenWidth_=0,this.lastScreenHeight_=0,this.selectionEnabled_=!0,this.lastRowCount_=0,this.scrollWheelMultiplier_=1,this.lastTouch_={},this.screenPaddingSize=0,this.lineHeightPaddingSize=0,this.isScrolledEnd=!0,this.currentScrollbarWidthPx=hterm.ScrollPort.DEFAULT_SCROLLBAR_WIDTH,this.ctrlVPaste=!1,this.pasteOnDrop=!0,this.div_=null,this.document_=null,this.screen_=null,this.timeouts_={},this.observers_={},this.ariaHiddenSelectionRows_=[],this.DEBUG_=!1},hterm.ScrollPort.DEFAULT_SCROLLBAR_WIDTH=12,hterm.ScrollPort.Selection=function(e){this.scrollPort_=e,this.startRow=null,this.startNode=null,this.startOffset=0,this.endRow=null,this.endNode=null,this.endOffset=0,this.isMultiline=!1,this.isCollapsed=!0,this.autoScrollOnMouseMoveBound_=this.autoScrollOnMouseMove_.bind(this),this.autoScrollEnabled_=!1,this.autoScrollDirection_=1,this.autoScrollInterval_=null,this.autoScrollDelta_=1},hterm.ScrollPort.Selection.prototype.findFirstChild=function(e,t){let r=e.firstChild;for(;r;){if(-1!=t.indexOf(r))return r;if(r.childNodes.length){const e=this.findFirstChild(r,t);if(e)return e}r=r.nextSibling}return null},hterm.ScrollPort.Selection.prototype.autoScrollOnMouseMove_=function(e){const t=this.scrollPort_.lastScreenHeight_;this.autoScrollDirection_=2*e.pageY<t?-1:1;const r=this.scrollPort_.screenPaddingSize;e.pageY<r?this.startAutoScroll_():e.pageY<this.scrollPort_.visibleRowsHeight+r?this.stopAutoScroll_():this.startAutoScroll_()},hterm.ScrollPort.Selection.prototype.setAutoScrollEnabled=function(e){this.autoScrollEnabled_=e;const t=this.scrollPort_.getDocument();e?t.addEventListener("mousemove",this.autoScrollOnMouseMoveBound_):(t.removeEventListener("mousemove",this.autoScrollOnMouseMoveBound_),this.stopAutoScroll_())},hterm.ScrollPort.Selection.prototype.autoScroll_=function(){this.autoScrollDelta_*=1.2;const e=Math.floor(this.autoScrollDelta_)*this.autoScrollDirection_;this.scrollPort_.scrollRowToTop(this.scrollPort_.getTopRowIndex()+e)},hterm.ScrollPort.Selection.prototype.startAutoScroll_=function(){this.autoScrollEnabled_&&null===this.autoScrollInterval_&&(this.autoScrollInterval_=setInterval(this.autoScroll_.bind(this),200))},hterm.ScrollPort.Selection.prototype.stopAutoScroll_=function(){clearInterval(this.autoScrollInterval_),this.autoScrollInterval_=null,this.autoScrollDelta_=1},hterm.ScrollPort.Selection.prototype.sync=function(){const e=()=>{this.startRow=s,this.startNode=r.anchorNode,this.startOffset=r.anchorOffset,this.endRow=i,this.endNode=n,this.endOffset=a},t=()=>{this.startRow=i,this.startNode=n,this.startOffset=a,this.endRow=s,this.endNode=r.anchorNode,this.endOffset=r.anchorOffset},r=this.scrollPort_.getDocument().getSelection(),o=()=>{this.startRow=null,this.startNode=null,this.startOffset=0,this.endRow=null,this.endNode=null,this.endOffset=0,this.isMultiline=!1,this.isCollapsed=!0};if(!r)return void o();this.isCollapsed=!r||r.isCollapsed;let s=r.anchorNode;for(;s&&"X-ROW"!=s.nodeName;)s=s.parentNode;if(!s)return void o();let i=r.focusNode,n=i,a=r.focusOffset;const h=()=>{i=this.scrollPort_.topFold_.nextSibling,n=i,a=0},l=()=>{for(i=this.scrollPort_.bottomFold_.previousSibling,n=i;n.lastChild;)n=n.lastChild;a=n.length||0};for(i===this.scrollPort_.topFold_?h():i===this.scrollPort_.bottomFold_&&l();i&&"X-ROW"!=i.nodeName;)i=i.parentNode;if(i){if(this.scrollPort_.autoScrollEnabled_){let e=this.scrollPort_.topFold_;for(;null!==(e=e.previousSibling);)e===i&&h();for(e=this.scrollPort_.bottomFold_;null!==(e=e.nextSibling);)e===i&&l()}if(s.rowIndex<i.rowIndex)e();else if(s.rowIndex>i.rowIndex)t();else if(n==r.anchorNode)r.anchorOffset<a?e():t();else{const o=this.findFirstChild(s,[r.anchorNode,n]);if(!o)throw new Error("Unexpected error syncing selection.");o==r.anchorNode?e():t()}this.isMultiline=s.rowIndex!=i.rowIndex}},hterm.ScrollPort.prototype.decorate=function(e,t){this.div_=e,this.iframe_=e.ownerDocument.createElement("iframe"),this.iframe_.style.cssText="border: 0;height: 100%;position: absolute;width: 100%",e.appendChild(this.iframe_);const r=()=>{this.paintIframeContents_(),t&&t()};"mozInnerScreenX"in globalThis?this.iframe_.addEventListener("load",(()=>r())):r()},hterm.ScrollPort.prototype.paintIframeContents_=function(){this.iframe_.contentWindow.addEventListener("resize",this.onResize_.bind(this));const e=this.document_=this.iframe_.contentDocument;e.body.style.cssText="margin: 0px;padding: 0px;height: 100%;width: 100%;overflow: hidden;cursor: var(--hterm-mouse-cursor-style);user-select: none;";const t=e.createElement("meta");t.setAttribute("charset","utf-8"),e.head.appendChild(t),this.DEBUG_&&(this.document_.body.style.paddingTop=this.document_.body.style.paddingBottom="calc(var(--hterm-charsize-height) * 3)");const r=e.createElement("style");r.textContent="x-row {  display: block;  height: var(--hterm-charsize-height);  line-height: var(--hterm-charsize-height);}",e.head.appendChild(r),this.userCssLink_=e.createElement("link"),this.userCssLink_.setAttribute("rel","stylesheet"),this.userCssText_=e.createElement("style"),e.head.appendChild(this.userCssText_),this.screen_=e.createElement("x-screen"),this.screen_.setAttribute("contenteditable","true"),this.screen_.setAttribute("spellcheck","false"),this.screen_.setAttribute("autocomplete","off"),this.screen_.setAttribute("autocorrect","off"),this.screen_.setAttribute("autocapitalize","none"),this.screen_.setAttribute("role","log"),this.screen_.setAttribute("aria-live","off"),this.screen_.setAttribute("aria-roledescription","Terminal"),this.screen_.setAttribute("aria-readonly","true"),this.screen_.setAttribute("tabindex","-1"),this.screen_.style.cssText="\n      background-color: rgb(var(--hterm-background-color));\n      caret-color: transparent;\n      color: rgb(var(--hterm-foreground-color));\n      display: block;\n      font-family: monospace;\n      font-size: 15px;\n      font-variant-ligatures: none;\n      height: 100%;\n      overflow-y: scroll; overflow-x: hidden;\n      white-space: pre;\n      width: 100%;\n      outline: none !important;\n  ";this.screen_.addEventListener("scroll",this.onScroll_.bind(this)),this.screen_.addEventListener("wheel",this.onScrollWheel_.bind(this)),this.screen_.addEventListener("touchstart",this.onTouch_.bind(this)),this.screen_.addEventListener("touchmove",this.onTouch_.bind(this)),this.screen_.addEventListener("touchend",this.onTouch_.bind(this)),this.screen_.addEventListener("touchcancel",this.onTouch_.bind(this)),this.screen_.addEventListener("copy",this.onCopy_.bind(this)),this.screen_.addEventListener("paste",this.onPaste_.bind(this)),this.screen_.addEventListener("drop",this.onDragAndDrop_.bind(this)),e.body.addEventListener("keydown",this.onBodyKeyDown_.bind(this));const o="\n    border-style: solid;\n    border-width: 1px;\n    color: rgb(var(--hterm-foreground-color));\n    cursor: pointer;\n    font-family: monospace;\n    font-weight: bold;\n    height: 30px;\n    line-height: 30px;\n    padding: 0 8px;\n    position: fixed;\n    right: var(--hterm-screen-padding-size);\n    text-align: center;\n    z-index: 1;\n  ";this.scrollUpButton_=this.document_.createElement("div"),this.scrollUpButton_.id="hterm:a11y:page-up",this.scrollUpButton_.innerText=hterm.msg("BUTTON_PAGE_UP",[],"Page up"),this.scrollUpButton_.setAttribute("role","button"),this.scrollUpButton_.style.cssText=o,this.scrollUpButton_.style.top="-32px",this.scrollUpButton_.addEventListener("click",this.scrollPageUp.bind(this)),this.scrollDownButton_=this.document_.createElement("div"),this.scrollDownButton_.id="hterm:a11y:page-down",this.scrollDownButton_.innerText=hterm.msg("BUTTON_PAGE_DOWN",[],"Page down"),this.scrollDownButton_.setAttribute("role","button"),this.scrollDownButton_.style.cssText=o,this.scrollDownButton_.style.bottom="-32px",this.scrollDownButton_.addEventListener("click",this.scrollPageDown.bind(this)),this.optionsButton_=this.document_.createElement("div"),this.optionsButton_.id="hterm:a11y:options",this.optionsButton_.innerText=hterm.msg("OPTIONS_BUTTON_LABEL",[],"Options"),this.optionsButton_.setAttribute("role","button"),this.optionsButton_.style.cssText=o,this.optionsButton_.style.bottom="-64px",this.optionsButton_.addEventListener("click",this.publish.bind(this,"options")),e.body.appendChild(this.scrollUpButton_),e.body.appendChild(this.screen_),e.body.appendChild(this.scrollDownButton_),e.body.appendChild(this.optionsButton_),this.allowA11yButtonsToDisplay_=!1,setTimeout((()=>{this.allowA11yButtonsToDisplay_=!0}),500),this.document_.addEventListener("selectionchange",(()=>{if(this.selection.sync(),!this.allowA11yButtonsToDisplay_)return;const e=this.accessibilityReader_&&this.accessibilityReader_.accessibilityEnabled,t=this.document_.getSelection();let r;t.anchorNode&&t.anchorNode.parentElement&&(r=t.anchorNode.parentElement),e&&r==this.scrollUpButton_?this.scrollUpButton_.style.top=`${this.screenPaddingSize}px`:this.scrollUpButton_.style.top="-32px",e&&r==this.scrollDownButton_?this.scrollDownButton_.style.bottom=`${this.screenPaddingSize}px`:this.scrollDownButton_.style.bottom="-32px",e&&r==this.optionsButton_?this.optionsButton_.style.bottom=`${this.screenPaddingSize}px`:this.optionsButton_.style.bottom="-64px"})),this.rowNodes_=e.createElement("div"),this.rowNodes_.id="hterm:row-nodes",this.rowNodes_.style.cssText="display: block;position: fixed;overflow: hidden;user-select: text;",this.screen_.appendChild(this.rowNodes_),this.topSelectBag_=e.createElement("x-select-bag"),this.topSelectBag_.style.cssText="display: block;overflow: hidden;height: var(--hterm-charsize-height);white-space: pre;",this.bottomSelectBag_=this.topSelectBag_.cloneNode(),this.topFold_=e.createElement("x-fold"),this.topFold_.id="hterm:top-fold-for-row-selection",this.topFold_.style.cssText="\n    display: block;\n    height: var(--hterm-screen-padding-size);\n  ",this.rowNodes_.appendChild(this.topFold_),this.bottomFold_=this.topFold_.cloneNode(),this.bottomFold_.id="hterm:bottom-fold-for-row-selection",this.rowNodes_.appendChild(this.bottomFold_),this.scrollArea_=e.createElement("div"),this.scrollArea_.id="hterm:scrollarea",this.scrollArea_.style.cssText="visibility: hidden",this.screen_.appendChild(this.scrollArea_),this.pasteTarget_=e.createElement("textarea"),this.pasteTarget_.id="hterm:ctrl-v-paste-target",this.pasteTarget_.setAttribute("tabindex","-1"),this.pasteTarget_.setAttribute("aria-hidden","true"),this.pasteTarget_.style.cssText="position: absolute;height: 1px;width: 1px;left: 0px; bottom: 0px;opacity: 0",this.pasteTarget_.contentEditable=!0,this.screen_.appendChild(this.pasteTarget_),this.pasteTarget_.addEventListener("textInput",this.handlePasteTargetTextInput_.bind(this)),this.resize()},hterm.ScrollPort.prototype.setAccessibilityReader=function(e){this.accessibilityReader_=e},hterm.ScrollPort.prototype.scrollPageUp=function(){if(0==this.getTopRowIndex())return;const e=this.getTopRowIndex();this.scrollRowToTop(e-this.visibleRowCount+1),this.assertiveAnnounce_()},hterm.ScrollPort.prototype.scrollPageDown=function(){if(this.isScrolledEnd)return;const e=this.getTopRowIndex();this.scrollRowToTop(e+this.visibleRowCount-1),this.assertiveAnnounce_()},hterm.ScrollPort.prototype.setFontFamily=function(e,t=""){this.screen_.style.fontFamily=e,this.screen_.style.webkitFontSmoothing=t,this.syncCharacterSize()},hterm.ScrollPort.prototype.getFontFamily=function(){return this.screen_.style.fontFamily},hterm.ScrollPort.prototype.setUserCssUrl=function(e){e?(this.userCssLink_.setAttribute("href",e),this.userCssLink_.parentNode||this.document_.head.appendChild(this.userCssLink_)):this.userCssLink_.parentNode&&this.document_.head.removeChild(this.userCssLink_)},hterm.ScrollPort.prototype.setUserCssText=function(e){this.userCssText_.textContent=e},hterm.ScrollPort.prototype.focus=function(){this.iframe_.focus(),this.screen_.focus(),this.publish("focus")},hterm.ScrollPort.prototype.blur=function(){this.screen_.blur()},hterm.ScrollPort.prototype.setBackgroundImage=function(e){this.screen_.style.backgroundImage=e},hterm.ScrollPort.prototype.setBackgroundSize=function(e){this.screen_.style.backgroundSize=e},hterm.ScrollPort.prototype.setBackgroundPosition=function(e){this.screen_.style.backgroundPosition=e},hterm.ScrollPort.prototype.setScreenPaddingSize=function(e){this.screenPaddingSize=e,this.resize()},hterm.ScrollPort.prototype.setLineHeightPaddingSize=function(e){this.lineHeightPaddingSize=e,this.syncCharacterSize()},hterm.ScrollPort.prototype.setCtrlVPaste=function(e){this.ctrlVPaste=e},hterm.ScrollPort.prototype.setPasteOnDrop=function(e){this.pasteOnDrop=e},hterm.ScrollPort.prototype.getScreenSize=function(){const e=this.screen_.getBoundingClientRect(),t=Math.max(this.screenPaddingSize,this.currentScrollbarWidthPx);return{height:e.height-2*this.screenPaddingSize,width:e.width-this.screenPaddingSize-t}},hterm.ScrollPort.prototype.getScreenWidth=function(){return this.getScreenSize().width},hterm.ScrollPort.prototype.getScreenHeight=function(){return this.getScreenSize().height},hterm.ScrollPort.prototype.getScrollbarX=function(){return this.screen_.getBoundingClientRect().width-this.currentScrollbarWidthPx},hterm.ScrollPort.prototype.getDocument=function(){return this.document_},hterm.ScrollPort.prototype.getScreenNode=function(){return this.screen_},hterm.ScrollPort.prototype.resetCache=function(){this.currentRowNodeCache_=null,this.previousRowNodeCache_={}},hterm.ScrollPort.prototype.setRowProvider=function(e){this.resetCache(),this.rowProvider_=e,this.scheduleRedraw()},hterm.ScrollPort.prototype.invalidate=function(){let e=this.topFold_.nextSibling;for(;e!=this.bottomFold_;){const t=e.nextSibling;e.remove(),e=t}this.previousRowNodeCache_=null;const t=this.getTopRowIndex(),r=this.getBottomRowIndex(t);this.drawVisibleRows_(t,r)},hterm.ScrollPort.prototype.scheduleInvalidate=function(){this.timeouts_.invalidate||(this.timeouts_.invalidate=setTimeout((()=>{delete this.timeouts_.invalidate,this.invalidate()})))},hterm.ScrollPort.prototype.setFontSize=function(e){this.screen_.style.fontSize=e+"px",this.syncCharacterSize()},hterm.ScrollPort.prototype.getFontSize=function(){return parseInt(this.screen_.style.fontSize,10)},hterm.ScrollPort.prototype.measureCharacterSize=function(e=""){let t=this.ruler_;t||(t=this.ruler_=this.document_.createElement("canvas"));const r=t.getContext("2d");r.font=`${e} ${this.getFontSize()}px ${this.getFontFamily()}`;const o=r.measureText("X█"),s=o.actualBoundingBoxAscent||o.fontBoundingBoxAscent,i=o.actualBoundingBoxDescent||o.fontBoundingBoxDescent,n=r.measureText("X");return new hterm.Size(n.width,s+i+this.lineHeightPaddingSize)},hterm.ScrollPort.prototype.syncCharacterSize=function(){this.characterSize=this.measureCharacterSize(),this.resize()},hterm.ScrollPort.prototype.resize=function(){this.syncScrollbarWidth_(),this.syncScrollHeight(),this.syncRowNodesDimensions_(),this.publish("resize",{scrollPort:this},(()=>this.scheduleRedraw()))},hterm.ScrollPort.prototype.assertiveAnnounce_=function(){if(!this.accessibilityReader_)return;const e=this.getTopRowIndex(),t=this.getBottomRowIndex(e);let r=100*e/Math.max(1,this.rowProvider_.getRowCount()-this.visibleRowCount);r=Math.min(100,Math.round(r));let o=hterm.msg("ANNOUNCE_CURRENT_SCREEN_HEADER",[r],"$1% scrolled,");o+="\n";for(let r=e;r<=t;++r){o+=this.fetchRowNode_(r).textContent+"\n"}this.accessibilityReader_.assertiveAnnounce(o)},hterm.ScrollPort.prototype.syncRowNodesDimensions_=function(){const e=this.getScreenSize();this.lastScreenWidth_=e.width,this.lastScreenHeight_=e.height,this.visibleRowCount=lib.f.smartFloorDivide(e.height,this.characterSize.height),this.visibleRowsHeight=this.visibleRowCount*this.characterSize.height,this.visibleRowTopMargin=0,this.visibleRowBottomMargin=e.height-this.visibleRowsHeight,this.topFold_.style.marginBottom=this.visibleRowTopMargin+"px";let t=0,r=this.topFold_.previousSibling;for(;r;)t+=r.getBoundingClientRect().height,r=r.previousSibling;this.rowNodes_.style.width=e.width+"px",this.rowNodes_.style.height=this.visibleRowsHeight+t+this.screenPaddingSize+"px",this.rowNodes_.style.left=this.screen_.offsetLeft+this.screenPaddingSize+"px",this.rowNodes_.style.top=this.screen_.offsetTop-t+"px"},hterm.ScrollPort.prototype.syncScrollbarWidth_=function(){const e=this.screen_.getBoundingClientRect().width-this.screen_.clientWidth;e>0&&(this.currentScrollbarWidthPx=e)},hterm.ScrollPort.prototype.syncScrollHeight=function(){this.lastRowCount_=this.rowProvider_.getRowCount(),this.scrollArea_.style.height=this.characterSize.height*this.lastRowCount_+2*this.screenPaddingSize+this.visibleRowTopMargin+this.visibleRowBottomMargin+"px"},hterm.ScrollPort.prototype.scheduleRedraw=function(){this.timeouts_.redraw||(this.timeouts_.redraw=setTimeout((()=>{delete this.timeouts_.redraw,this.redraw_()})))},hterm.ScrollPort.prototype.updateScrollButtonState_=function(){const e=(e,t)=>{e.setAttribute("aria-disabled",t?"true":"false"),e.style.opacity=t?.5:1};e(this.scrollUpButton_,0==this.getTopRowIndex()),e(this.scrollDownButton_,this.isScrolledEnd)},hterm.ScrollPort.prototype.redraw_=function(){this.resetSelectBags_(),this.selection.sync(),this.syncScrollHeight(),this.currentRowNodeCache_={};const e=this.getTopRowIndex(),t=this.getBottomRowIndex(e);this.drawTopFold_(e),this.drawBottomFold_(t),this.drawVisibleRows_(e,t),this.ariaHideOffscreenSelectionRows_(e,t),this.syncRowNodesDimensions_(),this.previousRowNodeCache_=this.currentRowNodeCache_,this.currentRowNodeCache_=null,this.isScrolledEnd=this.getTopRowIndex()+this.visibleRowCount>=this.lastRowCount_,this.updateScrollButtonState_()},hterm.ScrollPort.prototype.drawTopFold_=function(e){if(!this.selection.startRow||this.selection.startRow.rowIndex>=e)this.rowNodes_.firstChild!=this.topFold_&&this.rowNodes_.insertBefore(this.topFold_,this.rowNodes_.firstChild);else{if(!this.selection.isMultiline||this.selection.endRow.rowIndex>=e)this.selection.startRow.nextSibling!=this.topFold_&&this.rowNodes_.insertBefore(this.topFold_,this.selection.startRow.nextSibling);else for(this.selection.endRow.nextSibling!=this.topFold_&&this.rowNodes_.insertBefore(this.topFold_,this.selection.endRow.nextSibling);this.selection.startRow.nextSibling!=this.selection.endRow;)this.rowNodes_.removeChild(this.selection.startRow.nextSibling);for(;this.rowNodes_.firstChild!=this.selection.startRow;)this.rowNodes_.removeChild(this.rowNodes_.firstChild)}},hterm.ScrollPort.prototype.drawBottomFold_=function(e){if(!this.selection.endRow||this.selection.endRow.rowIndex<=e)this.rowNodes_.lastChild!=this.bottomFold_&&this.rowNodes_.appendChild(this.bottomFold_);else{if(!this.selection.isMultiline||this.selection.startRow.rowIndex<=e)this.bottomFold_.nextSibling!=this.selection.endRow&&this.rowNodes_.insertBefore(this.bottomFold_,this.selection.endRow);else for(this.bottomFold_.nextSibling!=this.selection.startRow&&this.rowNodes_.insertBefore(this.bottomFold_,this.selection.startRow);this.selection.startRow.nextSibling!=this.selection.endRow;)this.rowNodes_.removeChild(this.selection.startRow.nextSibling);for(;this.rowNodes_.lastChild!=this.selection.endRow;)this.rowNodes_.removeChild(this.rowNodes_.lastChild)}},hterm.ScrollPort.prototype.drawVisibleRows_=function(e,t){const r=(e,t)=>{for(;e!=t;){if(!e)throw new Error("Did not encounter target node");if(e==this.bottomFold_)throw new Error("Encountered bottom fold before target node");const t=e;e=e.nextSibling,t.remove()}},o=this.selection.startRow,s=this.selection.endRow,i=this.bottomFold_;let n=this.topFold_.nextSibling;const a=Math.min(this.visibleRowCount,this.rowProvider_.getRowCount());for(let t=0;t<a;t++){const a=e+t;if(n==i){const e=this.fetchRowNode_(a);if(!e){console.log("Couldn't fetch row index: "+a);break}this.rowNodes_.insertBefore(e,n);continue}if(n.rowIndex==a){n=n.nextSibling;continue}if(o&&o.rowIndex==a){r(n,o),n=o.nextSibling;continue}if(s&&s.rowIndex==a){r(n,s),n=s.nextSibling;continue}if(n==o||n==s){const e=this.fetchRowNode_(a);if(!e){console.log("Couldn't fetch row index: "+a);break}this.rowNodes_.insertBefore(e,n);continue}const h=this.fetchRowNode_(a);if(!h){console.log("Couldn't fetch row index: "+a);break}n!=h?(this.rowNodes_.insertBefore(h,n),this.rowNodes_.removeChild(n),n=h.nextSibling):n=n.nextSibling}n!=this.bottomFold_&&r(n,i)},hterm.ScrollPort.prototype.ariaHideOffscreenSelectionRows_=function(e,t){const r=this.ariaHiddenSelectionRows_;let o;for(;o=r.pop();)o.removeAttribute("aria-hidden");function s(o){o&&(o.rowIndex<e||o.rowIndex>t)&&(o.setAttribute("aria-hidden","true"),r.push(o))}s(this.selection.startRow),s(this.selection.endRow)},hterm.ScrollPort.prototype.resetSelectBags_=function(){this.topSelectBag_.parentNode&&(this.topSelectBag_.textContent="",this.topSelectBag_.remove()),this.bottomSelectBag_.parentNode&&(this.bottomSelectBag_.textContent="",this.bottomSelectBag_.remove())},hterm.ScrollPort.prototype.cacheRowNode_=function(e){this.currentRowNodeCache_[e.rowIndex]=e},hterm.ScrollPort.prototype.fetchRowNode_=function(e){let t;return t=this.previousRowNodeCache_&&e in this.previousRowNodeCache_?this.previousRowNodeCache_[e]:this.rowProvider_.getRowNode(e),this.currentRowNodeCache_&&this.cacheRowNode_(t),t},hterm.ScrollPort.prototype.selectAll=function(){let e;if(0!=this.topFold_.nextSibling.rowIndex){for(;this.topFold_.previousSibling;)this.topFold_.previousSibling.remove();e=this.fetchRowNode_(0),this.rowNodes_.insertBefore(e,this.topFold_),this.syncRowNodesDimensions_()}else e=this.topFold_.nextSibling;const t=this.rowProvider_.getRowCount()-1;let r;if(this.bottomFold_.previousSibling.rowIndex!=t){for(;this.bottomFold_.nextSibling;)this.bottomFold_.nextSibling.remove();r=this.fetchRowNode_(t),this.rowNodes_.appendChild(r)}else r=this.bottomFold_.previousSibling;let o=r;for(;o.lastChild;)o=o.lastChild;const s=this.document_.getSelection();s.collapse(e,0),s.extend(o,o.length||0),this.selection.sync()},hterm.ScrollPort.prototype.getScrollMax_=function(){return this.scrollArea_.getBoundingClientRect().height+this.visibleRowTopMargin+this.visibleRowBottomMargin-this.screen_.getBoundingClientRect().height},hterm.ScrollPort.prototype.scrollRowToTop=function(e){e<0&&(e=0),this.syncScrollHeight(),this.isScrolledEnd=e+this.visibleRowCount>=this.lastRowCount_;let t=e*this.characterSize.height+this.visibleRowTopMargin;const r=this.getScrollMax_();t>r&&(t=r),this.screen_.scrollTop!=t&&(this.screen_.scrollTop=t,this.scheduleRedraw())},hterm.ScrollPort.prototype.scrollRowToBottom=function(e){this.scrollRowToTop(e-this.visibleRowCount)},hterm.ScrollPort.prototype.scrollRowToMiddle=function(e){this.scrollRowToTop(e-Math.floor(this.visibleRowCount/2))},hterm.ScrollPort.prototype.getTopRowIndex=function(){return Math.round(this.screen_.scrollTop/this.characterSize.height)},hterm.ScrollPort.prototype.getBottomRowIndex=function(e){return e+this.visibleRowCount-1},hterm.ScrollPort.prototype.onScroll_=function(e){const t=this.getScreenSize();t.width==this.lastScreenWidth_&&t.height==this.lastScreenHeight_?(this.redraw_(),this.publish("scroll",{scrollPort:this})):this.resize()},hterm.ScrollPort.prototype.onScrollWheel=function(e){},hterm.ScrollPort.prototype.onScrollWheel_=function(e){if(this.onScrollWheel(e),e.defaultPrevented)return;const t=this.scrollWheelDelta(e);let r=this.screen_.scrollTop-t.y;r<0&&(r=0);const o=this.getScrollMax_();r>o&&(r=o),r!=this.screen_.scrollTop?(this.screen_.scrollTop=r,e.preventDefault()):e.ctrlKey&&e.preventDefault()},hterm.ScrollPort.prototype.scrollWheelDelta=function(e){const t={x:0,y:0};switch(e.deltaMode){case WheelEvent.DOM_DELTA_PIXEL:t.x=e.deltaX*this.scrollWheelMultiplier_,t.y=e.deltaY*this.scrollWheelMultiplier_;break;case WheelEvent.DOM_DELTA_LINE:t.x=e.deltaX*this.characterSize.width,t.y=e.deltaY*this.characterSize.height;break;case WheelEvent.DOM_DELTA_PAGE:{const{width:r,height:o}=this.screen_.getBoundingClientRect();t.x=e.deltaX*this.characterSize.width*r,t.y=e.deltaY*this.characterSize.height*o;break}}return t.y*=-1,t},hterm.ScrollPort.prototype.onTouch=function(e){},hterm.ScrollPort.prototype.onTouch_=function(e){if(this.onTouch(e),e.defaultPrevented)return;const t=function(e){return{id:e.identifier,y:e.clientY,x:e.clientX}};let r,o;switch(e.type){case"touchstart":for("cros"==hterm.os&&globalThis.chrome?.windows?.getCurrent&&chrome.windows.getCurrent((e=>{e.focused||chrome.windows.update(e.id,{focused:!0})})),r=0;r<e.changedTouches.length;++r)o=t(e.changedTouches[r]),this.lastTouch_[o.id]=o;break;case"touchcancel":case"touchend":for(r=0;r<e.changedTouches.length;++r)delete this.lastTouch_[e.changedTouches[r].identifier];break;case"touchmove":{let s=0;for(r=0;r<e.changedTouches.length;++r)o=t(e.changedTouches[r]),s+=this.lastTouch_[o.id].y-o.y,this.lastTouch_[o.id]=o;s*=-1;let i=this.screen_.scrollTop-s;i<0&&(i=0);const n=this.getScrollMax_();i>n&&(i=n),i!=this.screen_.scrollTop&&(this.screen_.scrollTop=i);break}}e.preventDefault()},hterm.ScrollPort.prototype.onResize_=function(e){this.syncCharacterSize()},hterm.ScrollPort.prototype.onCopy=function(e){},hterm.ScrollPort.prototype.onCopy_=function(e){if(this.onCopy(e),e.defaultPrevented)return;if(this.resetSelectBags_(),this.selection.sync(),this.selection.isCollapsed||this.selection.endRow.rowIndex-this.selection.startRow.rowIndex<2)return;const t=this.getTopRowIndex(),r=this.getBottomRowIndex(t);if(this.selection.startRow.rowIndex<t){let e;e=this.selection.endRow.rowIndex<t?this.selection.endRow.rowIndex:this.topFold_.nextSibling.rowIndex,this.topSelectBag_.textContent=this.rowProvider_.getRowsText(this.selection.startRow.rowIndex+1,e),this.rowNodes_.insertBefore(this.topSelectBag_,this.selection.startRow.nextSibling),this.syncRowNodesDimensions_()}if(this.selection.endRow.rowIndex>r){let e;e=this.selection.startRow.rowIndex>r?this.selection.startRow.rowIndex+1:this.bottomFold_.previousSibling.rowIndex+1,this.bottomSelectBag_.textContent=this.rowProvider_.getRowsText(e,this.selection.endRow.rowIndex),this.rowNodes_.insertBefore(this.bottomSelectBag_,this.selection.endRow)}},hterm.ScrollPort.prototype.onBodyKeyDown_=function(e){this.ctrlVPaste&&(e.ctrlKey||e.metaKey)&&86==e.keyCode&&this.pasteTarget_.focus()},hterm.ScrollPort.prototype.onPaste_=function(e){this.pasteTarget_.focus(),setTimeout((()=>{this.publish("paste",{text:this.pasteTarget_.value}),this.pasteTarget_.value="",this.focus()}))},hterm.ScrollPort.prototype.handlePasteTargetTextInput_=function(e){e.stopPropagation()},hterm.ScrollPort.prototype.onDragAndDrop_=function(e){if(!this.pasteOnDrop)return;let t,r;e.preventDefault(),e.shiftKey&&(e.dataTransfer.types.forEach((e=>{!r&&"text/plain"!=e&&e.startsWith("text/")&&(r=e)})),r&&(t=e.dataTransfer.getData(r))),t||(t=e.dataTransfer.getData("text/plain")),t&&this.publish("paste",{text:t})},hterm.ScrollPort.prototype.setScrollbarVisible=function(e){e?(this.screen_.style.overflowY="scroll",this.currentScrollbarWidthPx=hterm.ScrollPort.DEFAULT_SCROLLBAR_WIDTH,this.syncScrollbarWidth_()):(this.screen_.style.overflowY="hidden",this.currentScrollbarWidthPx=0)},hterm.ScrollPort.prototype.setScrollWheelMoveMultipler=function(e){this.scrollWheelMultiplier_=e},hterm.Terminal=function({profileId:e,storage:t}={}){this.ready_=!1,this.profileId_=null,this.storage_=t||new lib.Storage.Local,this.prefs_=null,this.primaryScreen_=new hterm.Screen,this.alternateScreen_=new hterm.Screen,this.screen_=this.primaryScreen_,this.screenSize=new hterm.Size(0,0),this.scrollPort_=new hterm.ScrollPort(this),this.scrollPort_.subscribe("resize",this.onResize_.bind(this)),this.scrollPort_.subscribe("scroll",this.onScroll_.bind(this)),this.scrollPort_.subscribe("paste",this.onPaste_.bind(this)),this.scrollPort_.subscribe("focus",this.onScrollportFocus_.bind(this)),this.scrollPort_.subscribe("options",this.onOpenOptionsPage_.bind(this)),this.scrollPort_.onCopy=this.onCopy_.bind(this),this.div_=null,this.notifications_=null,this.document_=globalThis.document,this.scrollbackRows_=[],this.tabStops_=[],this.defaultTabStops=!0,this.vtScrollTop_=null,this.vtScrollBottom_=null,this.cursorNode_=null,this.cursorShape_=hterm.Terminal.cursorShape.BLOCK,this.cursorBlinkCycle_=[100,100],this.cursorBlinkPause_=!1,this.cursorOffScreen_=!1,this.myOnCursorBlink_=this.onCursorBlink_.bind(this),this.backgroundColor_=null,this.foregroundColor_=null,this.colorPaletteOverrides_=new Map,this.screenBorderSize_=0,this.scrollOnOutput_=null,this.scrollOnKeystroke_=null,this.scrollWheelArrowKeys_=null,this.defeatMouseReports_=!1,this.setAutomaticMouseHiding(),this.mouseHideDelay_=null,this.bellAudio_=this.document_.createElement("audio"),this.bellAudio_.id="hterm:bell-audio",this.bellAudio_.setAttribute("preload","auto"),this.accessibilityReader_=null,this.contextMenu=new hterm.ContextMenu,this.bellNotificationList_=[],this.bellSquelchTimeout_=null,this.desktopNotificationBell_=!1,this.savedOptions_={},this.options_=new hterm.Options,this.timeouts_={},this.vt=new hterm.VT(this),this.saveCursorAndState(!0),this.keyboard=new hterm.Keyboard(this),this.io=new hterm.Terminal.IO(this),this.enableMouseDragScroll=!0,this.copyOnSelect=null,this.mouseRightClickPaste=null,this.mousePasteButton=null,this.useDefaultWindowCopy=!1,this.clearSelectionAfterCopy=!0,this.realizeSize_(80,24),this.setDefaultTabStops(),this.allowImagesInline=null,this.reportFocus=!1,this.alwaysUseLegacyPasting=!1,this.setProfile(e||hterm.Terminal.DEFAULT_PROFILE_ID,(()=>{hterm.initPromise.then((()=>this.onTerminalReady()))})),this.findBar=new hterm.FindBar(this)},hterm.Terminal.DEFAULT_PROFILE_ID="default",hterm.Terminal.cursorShape={BLOCK:"BLOCK",BEAM:"BEAM",UNDERLINE:"UNDERLINE"},hterm.Terminal.prototype.onTerminalReady=function(){},hterm.Terminal.prototype.tabWidth=8,hterm.Terminal.prototype.setProfile=function(e,t=void 0){if(e=e.replace(/\//g,""),this.profileId_===e)return void(t&&t());if(this.profileId_=e,this.prefs_)return void this.prefs_.setProfile(e).then(t);this.prefs_=new hterm.PreferenceManager(this.storage_,this.profileId_);const r=(e=null,t=!1)=>{this.keyboard.bindings.clear(),null===e&&(e={}),e instanceof Object||(console.error("Error in keybindings preference: Expected object"),e={});try{this.keyboard.bindings.addBindings(e,!!t)}catch(e){console.error("Error in keybindings preference: "+e)}};this.prefs_.addObservers(null,{"alt-gr-mode":e=>{e=null==e?"en-us"==navigator.language.toLowerCase()?"none":"right-alt":"string"==typeof e?e.toLowerCase():"none",/^(none|ctrl-alt|left-alt|right-alt)$/.test(e)||(e="none"),this.keyboard.altGrMode=e},"alt-backspace-is-meta-backspace":e=>{this.keyboard.altBackspaceIsMetaBackspace=e},"alt-is-meta":e=>{this.keyboard.altIsMeta=e},"alt-sends-what":e=>{/^(escape|8-bit|browser-key)$/.test(e)||(e="escape"),this.keyboard.altSendsWhat=e},"audible-bell-sound":e=>{const t=e.match(/^lib-resource:(\S+)/);if(t){const e=t[1];if(void 0===lib.resource.get(e))return console.warn(`Invalid resource name '${e}'`),void this.prefs_.reset("audible-bell-sound");this.bellAudio_.setAttribute("src",lib.resource.getDataUrl(e))}else this.bellAudio_.setAttribute("src",e)},"desktop-notification-bell":e=>{e&&Notification?(this.desktopNotificationBell_="granted"===Notification.permission,this.desktopNotificationBell_||console.warn("desktop-notification-bell is true but we do not have permission to display notifications.")):this.desktopNotificationBell_=!1},"background-color":e=>{this.setBackgroundColor(e)},"background-image":e=>{this.scrollPort_.setBackgroundImage(e)},"background-size":e=>{this.scrollPort_.setBackgroundSize(e)},"background-position":e=>{this.scrollPort_.setBackgroundPosition(e)},"backspace-sends-backspace":e=>{this.keyboard.backspaceSendsBackspace=e},"character-map-overrides":e=>{null==e||e instanceof Object?(this.vt.characterMaps.reset(),this.vt.characterMaps.setOverrides(e)):console.warn("Preference character-map-modifications is not an object: "+e)},"cursor-blink":e=>{this.setCursorBlink(!!e)},"cursor-shape":e=>{this.setCursorShape(e)},"cursor-blink-cycle":e=>{e instanceof Array&&"number"==typeof e[0]&&"number"==typeof e[1]?this.cursorBlinkCycle_=e:this.cursorBlinkCycle_="number"==typeof e?[e,e]:[100,100]},"cursor-color":e=>{this.setCursorColor(e)},"color-palette-overrides":e=>{if(null==e||e instanceof Object||e instanceof Array){if(lib.colors.stockPalette.forEach(((e,t)=>this.setColorPalette(t,e))),this.colorPaletteOverrides_.clear(),e)for(const t in e){const r=parseInt(t,10);if(isNaN(r)||r<0||r>255)console.log("Invalid value in palette: "+t+": "+e[t]);else if(e[r]){const t=lib.colors.normalizeCSS(e[r]);t&&(this.setColorPalette(r,t),this.colorPaletteOverrides_.set(r,t))}}this.primaryScreen_.textAttributes.colorPaletteOverrides=[],this.alternateScreen_.textAttributes.colorPaletteOverrides=[]}else console.warn("Preference color-palette-overrides is not an array or object: "+e)},"copy-on-select":e=>{this.copyOnSelect=!!e},"use-default-window-copy":e=>{this.useDefaultWindowCopy=!!e},"clear-selection-after-copy":e=>{this.clearSelectionAfterCopy=!!e},"ctrl-plus-minus-zero-zoom":e=>{this.keyboard.ctrlPlusMinusZeroZoom=e},"ctrl-c-copy":e=>{this.keyboard.ctrlCCopy=e},"ctrl-v-paste":e=>{this.keyboard.ctrlVPaste=e,this.scrollPort_.setCtrlVPaste(e)},"paste-on-drop":e=>{this.scrollPort_.setPasteOnDrop(e)},"east-asian-ambiguous-as-two-column":e=>{hterm.wc.regardCjkAmbiguous=e},"enable-8-bit-control":e=>{this.vt.enable8BitControl=!!e},"enable-bold":e=>{this.syncBoldSafeState()},"enable-bold-as-bright":e=>{this.primaryScreen_.textAttributes.enableBoldAsBright=!!e,this.alternateScreen_.textAttributes.enableBoldAsBright=!!e},"enable-blink":e=>{this.setTextBlink(!!e)},"enable-clipboard-write":e=>{this.vt.enableClipboardWrite=!!e},"enable-dec12":e=>{this.vt.enableDec12=!!e},"enable-csi-j-3":e=>{this.vt.enableCsiJ3=!!e},"find-result-color":e=>{this.findBar.setFindResultColor(e)},"find-result-selected-color":e=>{this.findBar.setFindResultSelectedColor(e)},"font-family":e=>{this.syncFontFamily()},"font-size":e=>{e=parseInt(e,10),isNaN(e)||e<=0?console.error(`Invalid font size: ${e}`):this.setFontSize(e)},"font-smoothing":e=>{this.syncFontFamily()},"foreground-color":e=>{this.setForegroundColor(e)},"hide-mouse-while-typing":e=>{this.setAutomaticMouseHiding(e)},"home-keys-scroll":e=>{this.keyboard.homeKeysScroll=e},keybindings:e=>{r(e,this.prefs_.get("keybindings-os-defaults"))},"keybindings-os-defaults":e=>{r(this.prefs_.get("keybindings"),e)},"line-height-padding-size":e=>{e=parseFloat(e),isNaN(e)?console.error(`Invalid line height padding size: ${e}`):this.setLineHeightPaddingSize(e)},"media-keys-are-fkeys":e=>{this.keyboard.mediaKeysAreFKeys=e},"meta-sends-escape":e=>{this.keyboard.metaSendsEscape=e},"mouse-right-click-paste":e=>{this.mouseRightClickPaste=e},"mouse-paste-button":e=>{this.syncMousePasteButton()},"page-keys-scroll":e=>{this.keyboard.pageKeysScroll=e},"pass-alt-number":e=>{null==e&&(e="mac"!==hterm.os&&"popup"!==hterm.windowType&&"app"!==hterm.windowType),this.passAltNumber=e},"pass-ctrl-number":e=>{null==e&&(e="mac"!==hterm.os&&"popup"!==hterm.windowType&&"app"!==hterm.windowType),this.passCtrlNumber=e},"pass-ctrl-n":e=>{this.passCtrlN=e},"pass-ctrl-t":e=>{this.passCtrlT=e},"pass-ctrl-tab":e=>{this.passCtrlTab=e},"pass-ctrl-w":e=>{this.passCtrlW=e},"pass-meta-number":e=>{null==e&&(e="mac"===hterm.os&&"popup"!==hterm.windowType&&"app"!==hterm.windowType),this.passMetaNumber=e},"pass-meta-v":e=>{this.keyboard.passMetaV=e},"screen-padding-size":e=>{e=parseInt(e,10),isNaN(e)||e<0?console.error(`Invalid screen padding size: ${e}`):this.setScreenPaddingSize(e)},"screen-border-size":e=>{e=parseInt(e,10),isNaN(e)||e<0?console.error(`Invalid screen border size: ${e}`):this.setScreenBorderSize(e)},"screen-border-color":e=>{this.div_.style.borderColor=e},"scroll-on-keystroke":e=>{this.scrollOnKeystroke_=e},"scroll-on-output":e=>{this.scrollOnOutput_=e},"scrollbar-visible":e=>{this.setScrollbarVisible(e)},"scroll-wheel-may-send-arrow-keys":e=>{this.scrollWheelArrowKeys_=e},"scroll-wheel-move-multiplier":e=>{this.setScrollWheelMoveMultipler(e)},"shift-insert-paste":e=>{this.keyboard.shiftInsertPaste=e},"terminal-encoding":e=>{this.vt.setEncoding(e)},"user-css":e=>{this.scrollPort_.setUserCssUrl(e)},"user-css-text":e=>{this.scrollPort_.setUserCssText(e)},"word-break-match-left":e=>{this.primaryScreen_.wordBreakMatchLeft=e,this.alternateScreen_.wordBreakMatchLeft=e},"word-break-match-right":e=>{this.primaryScreen_.wordBreakMatchRight=e,this.alternateScreen_.wordBreakMatchRight=e},"word-break-match-middle":e=>{this.primaryScreen_.wordBreakMatchMiddle=e,this.alternateScreen_.wordBreakMatchMiddle=e},"allow-images-inline":e=>{this.allowImagesInline=e}}),this.prefs_.readStorage().then((()=>{this.prefs_.notifyAll(),t&&(this.ready_=!0,setTimeout((()=>t())))}))},hterm.Terminal.prototype.getPrefs=function(){return lib.notNull(this.prefs_)},hterm.Terminal.prototype.setBracketedPaste=function(e){this.options_.bracketedPaste=e},hterm.Terminal.prototype.setCursorColor=function(e){void 0===e&&(e=this.prefs_.getString("cursor-color")),this.setCssVar("cursor-color",e)},hterm.Terminal.prototype.getCursorColor=function(){return this.getCssVar("cursor-color")},hterm.Terminal.prototype.setSelectionEnabled=function(e){this.enableMouseDragScroll=e},hterm.Terminal.prototype.setBackgroundImage=function(e){void 0===e&&(e=this.prefs_.getString("background-image")),this.scrollPort_.setBackgroundImage(e)},hterm.Terminal.prototype.setBackgroundColor=function(e){void 0===e&&(e=this.prefs_.getString("background-color")),this.backgroundColor_=lib.colors.normalizeCSS(e),this.setRgbColorCssVar("background-color",this.backgroundColor_)},hterm.Terminal.prototype.getBackgroundColor=function(){return this.backgroundColor_},hterm.Terminal.prototype.setForegroundColor=function(e){void 0===e&&(e=this.prefs_.getString("foreground-color")),this.foregroundColor_=lib.colors.normalizeCSS(e),this.setRgbColorCssVar("foreground-color",this.foregroundColor_)},hterm.Terminal.prototype.getForegroundColor=function(){return this.foregroundColor_},hterm.Terminal.prototype.isPrimaryScreen=function(){return this.screen_==this.primaryScreen_},hterm.Terminal.prototype.installKeyboard=function(){this.keyboard.installKeyboard(this.scrollPort_.getDocument().body)},hterm.Terminal.prototype.uninstallKeyboard=function(){this.keyboard.installKeyboard(null)},hterm.Terminal.prototype.setCssVar=function(e,t,r="--hterm-"){this.document_.documentElement.style.setProperty(`${r}${e}`,t.toString())},hterm.Terminal.prototype.setRgbColorCssVar=function(e,t){const r=t?lib.colors.crackRGB(t):null;r&&this.setCssVar(e,r.slice(0,3).join(","))},hterm.Terminal.prototype.setColorPalette=function(e,t){e>=0&&e<256&&null!=t&&t!=this.getColorPalette[e]&&(this.setRgbColorCssVar(`color-${e}`,t),this.screen_.textAttributes.colorPaletteOverrides[e]=t)},hterm.Terminal.prototype.getColorPalette=function(e){return this.screen_.textAttributes.colorPaletteOverrides[e]||this.colorPaletteOverrides_.get(e)||lib.colors.stockPalette[e]},hterm.Terminal.prototype.resetColor=function(e){this.setColorPalette(e,this.colorPaletteOverrides_.get(e)||lib.colors.stockPalette[e]),delete this.screen_.textAttributes.colorPaletteOverrides[e]},hterm.Terminal.prototype.resetColorPalette=function(){this.screen_.textAttributes.colorPaletteOverrides.forEach(((e,t)=>this.resetColor(t)))},hterm.Terminal.prototype.getCssVar=function(e,t="--hterm-"){return this.document_.documentElement.style.getPropertyValue(`${t}${e}`)},hterm.Terminal.prototype.getScrollPort=function(){return this.scrollPort_},hterm.Terminal.prototype.updateCssCharsize_=function(){this.setCssVar("charsize-width",this.scrollPort_.characterSize.width+"px"),this.setCssVar("charsize-height",this.scrollPort_.characterSize.height+"px")},hterm.Terminal.prototype.setFontSize=function(e){e<=0&&(e=this.prefs_.getNumber("font-size")),this.scrollPort_.setFontSize(e),this.setCssVar("font-size",`${e}px`),this.updateCssCharsize_()},hterm.Terminal.prototype.getFontSize=function(){return this.scrollPort_.getFontSize()},hterm.Terminal.prototype.getFontFamily=function(){return this.scrollPort_.getFontFamily()},hterm.Terminal.prototype.syncFontFamily=function(){this.scrollPort_.setFontFamily(this.prefs_.getString("font-family"),this.prefs_.getString("font-smoothing")),this.updateCssCharsize_(),this.syncBoldSafeState()},hterm.Terminal.prototype.syncMousePasteButton=function(){const e=this.prefs_.get("mouse-paste-button");"number"!=typeof e?"linux"!=hterm.os?this.mousePasteButton=1:this.mousePasteButton=2:this.mousePasteButton=e},hterm.Terminal.prototype.syncBoldSafeState=function(){const e=this.prefs_.get("enable-bold");if(null!==e)return this.primaryScreen_.textAttributes.enableBold=e,void(this.alternateScreen_.textAttributes.enableBold=e);const t=this.scrollPort_.measureCharacterSize(),r=this.scrollPort_.measureCharacterSize("bold"),o=t.equals(r);o||console.warn("Bold characters disabled: Size of bold weight differs from normal.  Font family is: "+this.scrollPort_.getFontFamily()),this.primaryScreen_.textAttributes.enableBold=o,this.alternateScreen_.textAttributes.enableBold=o},hterm.Terminal.prototype.setTextBlink=function(e){void 0===e&&(e=this.prefs_.getBoolean("enable-blink")),this.setCssVar("blink-node-duration",e?"0.7s":"0")},hterm.Terminal.prototype.syncMouseStyle=function(){this.setCssVar("mouse-cursor-style",this.vt.mouseReport==this.vt.MOUSE_REPORT_DISABLED?"var(--hterm-mouse-cursor-text)":"var(--hterm-mouse-cursor-default)")},hterm.Terminal.prototype.saveCursor=function(){return this.screen_.cursorPosition.clone()},hterm.Terminal.prototype.getTextAttributes=function(){return this.screen_.textAttributes},hterm.Terminal.prototype.setTextAttributes=function(e){this.screen_.textAttributes=e},hterm.Terminal.prototype.setWindowTitle=function(e){globalThis.document.title=e},hterm.Terminal.prototype.setWindowName=function(e){},hterm.Terminal.prototype.restoreCursor=function(e){const t=lib.f.clamp(e.row,0,this.screenSize.height-1),r=lib.f.clamp(e.column,0,this.screenSize.width-1);this.screen_.setCursorPosition(t,r),(e.column>r||e.column==r&&e.overflow)&&(this.screen_.cursorPosition.overflow=!0)},hterm.Terminal.prototype.clearCursorOverflow=function(){this.screen_.cursorPosition.overflow=!1},hterm.Terminal.prototype.saveCursorAndState=function(e){e?(this.primaryScreen_.saveCursorAndState(this.vt),this.alternateScreen_.saveCursorAndState(this.vt)):this.screen_.saveCursorAndState(this.vt)},hterm.Terminal.prototype.restoreCursorAndState=function(e){e?(this.primaryScreen_.restoreCursorAndState(this.vt),this.alternateScreen_.restoreCursorAndState(this.vt)):this.screen_.restoreCursorAndState(this.vt)},hterm.Terminal.prototype.setCursorShape=function(e){this.cursorShape_=e,this.restyleCursor_()},hterm.Terminal.prototype.getCursorShape=function(){return this.cursorShape_},hterm.Terminal.prototype.setLineHeightPaddingSize=function(e){this.scrollPort_.setLineHeightPaddingSize(e)},hterm.Terminal.prototype.setScreenPaddingSize=function(e){this.setCssVar("screen-padding-size",`${e}px`),this.scrollPort_.setScreenPaddingSize(e)},hterm.Terminal.prototype.setScreenBorderSize=function(e){this.div_.style.borderWidth=`${e}px`,this.screenBorderSize_=e,this.scrollPort_.resize()},hterm.Terminal.prototype.setWidth=function(e){if(null==e)return void(this.div_.style.width="100%");const t=Math.max(this.scrollPort_.screenPaddingSize,this.scrollPort_.currentScrollbarWidthPx);this.div_.style.width=Math.ceil(this.scrollPort_.characterSize.width*e+this.scrollPort_.screenPaddingSize+t+2*this.screenBorderSize_)+"px",this.realizeSize_(e,this.screenSize.height),this.scheduleSyncCursorPosition_()},hterm.Terminal.prototype.setHeight=function(e){null!=e?(this.div_.style.height=this.scrollPort_.characterSize.height*e+2*this.scrollPort_.screenPaddingSize+2*this.screenBorderSize_+"px",this.realizeSize_(this.screenSize.width,e),this.scheduleSyncCursorPosition_()):this.div_.style.height="100%"},hterm.Terminal.prototype.realizeSize_=function(e,t){let r=!1;e!=this.screenSize.width&&(r=!0,this.realizeWidth_(e)),t!=this.screenSize.height&&(r=!0,this.realizeHeight_(t)),r&&this.io.onTerminalResize_(e,t)},hterm.Terminal.prototype.realizeWidth_=function(e){if(e<=0)throw new Error("Attempt to realize bad width: "+e);const t=e-this.screen_.getWidth();if(0!=t){if(this.screenSize.width=e,this.screen_.setColumnCount(e),t>0)this.defaultTabStops&&this.setDefaultTabStops(this.screenSize.width-t);else for(let t=this.tabStops_.length-1;t>=0&&!(this.tabStops_[t]<e);t--)this.tabStops_.pop();this.screen_.setColumnCount(this.screenSize.width)}},hterm.Terminal.prototype.realizeHeight_=function(e){if(e<=0)throw new Error("Attempt to realize bad height: "+e);let t=e-this.screen_.getHeight();if(0==t)return;this.screenSize.height=e;const r=this.saveCursor();if(t<0){for(t*=-1;t;){const e=this.getRowCount()-1;if(e-this.scrollbackRows_.length==r.row)break;if(this.getRowText(e))break;this.screen_.popRow(),t--}const e=this.screen_.shiftRows(t);this.scrollbackRows_.push.apply(this.scrollbackRows_,e),r.row=Math.max(r.row-t,0)}else if(t>0){if(t<=this.scrollbackRows_.length){const e=Math.min(t,this.scrollbackRows_.length),o=this.scrollbackRows_.splice(this.scrollbackRows_.length-e,e);this.screen_.unshiftRows(o),t-=e,r.row+=e}t&&this.appendRows_(t)}this.setVTScrollRegion(null,null),this.restoreCursor(r)},hterm.Terminal.prototype.scrollHome=function(){this.scrollPort_.scrollRowToTop(0)},hterm.Terminal.prototype.scrollEnd=function(){this.scrollPort_.scrollRowToBottom(this.getRowCount())},hterm.Terminal.prototype.scrollPageUp=function(){this.scrollPort_.scrollPageUp()},hterm.Terminal.prototype.scrollPageDown=function(){this.scrollPort_.scrollPageDown()},hterm.Terminal.prototype.scrollLineUp=function(){const e=this.scrollPort_.getTopRowIndex();this.scrollPort_.scrollRowToTop(e-1)},hterm.Terminal.prototype.scrollLineDown=function(){const e=this.scrollPort_.getTopRowIndex();this.scrollPort_.scrollRowToTop(e+1)},hterm.Terminal.prototype.wipeContents=function(){this.clearHome(this.primaryScreen_),this.clearHome(this.alternateScreen_),this.clearScrollback()},hterm.Terminal.prototype.clearScrollback=function(){this.scrollEnd(),this.scrollbackRows_.length=0,this.scrollPort_.resetCache(),[this.primaryScreen_,this.alternateScreen_].forEach((e=>{const t=e.getHeight();this.renumberRows_(0,t,e)})),this.syncCursorPosition_(),this.scrollPort_.invalidate()},hterm.Terminal.prototype.reset=function(){this.vt.reset(),this.clearAllTabStops(),this.setDefaultTabStops(),this.resetColorPalette();const e=e=>{e.textAttributes.reset(),e.textAttributes.colorPaletteOverrides=[],this.clearHome(e),e.saveCursorAndState(this.vt)};e(this.primaryScreen_),e(this.alternateScreen_),this.options_=new hterm.Options,this.setCursorBlink(!!this.prefs_.get("cursor-blink")),this.setVTScrollRegion(null,null),this.setCursorVisible(!0)},hterm.Terminal.prototype.softReset=function(){this.vt.reset(),this.options_=new hterm.Options,this.options_.cursorBlink=!!this.timeouts_.cursorBlink,this.resetColorPalette();const e=e=>{e.textAttributes.reset(),e.textAttributes.colorPaletteOverrides=[],e.saveCursorAndState(this.vt)};e(this.primaryScreen_),e(this.alternateScreen_),this.setVTScrollRegion(null,null),this.setCursorVisible(!0)},hterm.Terminal.prototype.forwardTabStop=function(){const e=this.screen_.cursorPosition.column;for(let t=0;t<this.tabStops_.length;t++)if(this.tabStops_[t]>e)return void this.setCursorColumn(this.tabStops_[t]);const t=this.screen_.cursorPosition.overflow;this.setCursorColumn(this.screenSize.width-1),this.screen_.cursorPosition.overflow=t},hterm.Terminal.prototype.backwardTabStop=function(){const e=this.screen_.cursorPosition.column;for(let t=this.tabStops_.length-1;t>=0;t--)if(this.tabStops_[t]<e)return void this.setCursorColumn(this.tabStops_[t]);this.setCursorColumn(1)},hterm.Terminal.prototype.setTabStop=function(e){for(let t=this.tabStops_.length-1;t>=0;t--){if(this.tabStops_[t]==e)return;if(this.tabStops_[t]<e)return void this.tabStops_.splice(t+1,0,e)}this.tabStops_.splice(0,0,e)},hterm.Terminal.prototype.clearTabStopAtCursor=function(){const e=this.screen_.cursorPosition.column,t=this.tabStops_.indexOf(e);-1!=t&&this.tabStops_.splice(t,1)},hterm.Terminal.prototype.clearAllTabStops=function(){this.tabStops_.length=0,this.defaultTabStops=!1},hterm.Terminal.prototype.setDefaultTabStops=function(e=0){const t=this.tabWidth;for(let r=e=e-1-(e-1)%t+t;r<this.screenSize.width;r+=t)this.setTabStop(r);this.defaultTabStops=!0},hterm.Terminal.prototype.interpret=function(e){this.scheduleSyncCursorPosition_(),this.vt.interpret(e)},hterm.Terminal.prototype.decorate=function(e){const t=e.ownerDocument.characterSet.toLowerCase();"utf-8"!=t&&console.warn(`Document encoding should be set to utf-8, not "${t}"; Add <meta charset='utf-8'/> to your HTML <head> to fix.`),this.div_=e,this.div_.style.borderStyle="solid",this.div_.style.borderWidth=0,this.div_.style.boxSizing="border-box",this.accessibilityReader_=new hterm.AccessibilityReader(e),this.scrollPort_.decorate(e,(()=>this.setupScrollPort_()))},hterm.Terminal.prototype.setupScrollPort_=function(){this.scrollPort_.setBackgroundImage(this.prefs_.getString("background-image")),this.scrollPort_.setBackgroundSize(this.prefs_.getString("background-size")),this.scrollPort_.setBackgroundPosition(this.prefs_.getString("background-position")),this.scrollPort_.setUserCssUrl(this.prefs_.getString("user-css")),this.scrollPort_.setUserCssText(this.prefs_.getString("user-css-text")),this.scrollPort_.setAccessibilityReader(lib.notNull(this.accessibilityReader_)),this.div_.focus=this.focus.bind(this),this.setFontSize(this.prefs_.getNumber("font-size")),this.syncFontFamily(),this.setScrollbarVisible(this.prefs_.getBoolean("scrollbar-visible")),this.setScrollWheelMoveMultipler(this.prefs_.getNumber("scroll-wheel-move-multiplier")),this.document_=this.scrollPort_.getDocument(),this.accessibilityReader_.decorate(this.document_),this.findBar.decorate(this.document_),this.notifications_=new hterm.NotificationCenter(lib.notNull(this.document_.body),this.accessibilityReader_),this.document_.body.oncontextmenu=function(){return!1},this.contextMenu.setDocument(this.document_);const e=this.onMouse_.bind(this),t=this.scrollPort_.getScreenNode();t.addEventListener("mousedown",e),t.addEventListener("mouseup",e),t.addEventListener("mousemove",e),this.scrollPort_.onScrollWheel=e,t.addEventListener("keydown",this.onKeyboardActivity_.bind(this)),t.addEventListener("focus",this.onFocusChange_.bind(this,!0)),t.addEventListener("mousedown",function(){setTimeout(this.onFocusChange_.bind(this,!0))}.bind(this)),t.addEventListener("blur",this.onFocusChange_.bind(this,!1));const r=this.document_.createElement("style");r.textContent=`\n.cursor-node[focus="false"] {\n  box-sizing: border-box;\n  background-color: transparent !important;\n  border-width: 2px;\n  border-style: solid;\n}\n.cursor-node[shape="block"] {\n}\n.cursor-node[shape="beam"] {\n  background-color: transparent !important;\n  border-left-style: solid;\n}\n.cursor-node[shape="underline"] {\n  background-color: transparent !important;\n  border-bottom-style: solid;\n}\n.cursor-node[bell="true"] {\n  background-color: rgb(var(--hterm-foreground-color)) !important;\n}\n.cursor-node[visible="false"] {\n  opacity: 0;\n}\nmenu {\n  background: #fff;\n  border-radius: 4px;\n  color: #202124;\n  cursor: var(--hterm-mouse-cursor-pointer);\n  display: none;\n  filter: drop-shadow(0 1px 3px #3C40434D) drop-shadow(0 4px 8px #3C404326);\n  margin: 0;\n  padding: 8px 0;\n  position: absolute;\n  transition-duration: 200ms;\n}\nmenuitem {\n  display: block;\n  font: var(--hterm-font-size) 'Roboto', 'Noto Sans', sans-serif;\n  padding: 0.5em 1em;\n  white-space: nowrap;\n}\nmenuitem.separator {\n  border-bottom: none;\n  height: 0.5em;\n  padding: 0;\n}\nmenuitem:hover {\n  background-color: #e2e4e6;\n}\n.wc-node {\n  display: inline-block;\n  text-align: center;\n  width: calc(var(--hterm-charsize-width) * 2);\n  line-height: var(--hterm-charsize-height);\n}\n:root {\n  --hterm-charsize-width: ${this.scrollPort_.characterSize.width}px;\n  --hterm-charsize-height: ${this.scrollPort_.characterSize.height}px;\n  --hterm-blink-node-duration: 0.7s;\n  --hterm-mouse-cursor-default: default;\n  --hterm-mouse-cursor-text: text;\n  --hterm-mouse-cursor-pointer: pointer;\n  --hterm-mouse-cursor-style: var(--hterm-mouse-cursor-text);\n  --hterm-screen-padding-size: 0;\n\n${lib.colors.stockPalette.map(((e,t)=>`\n  --hterm-color-${t}: ${lib.colors.crackRGB(e).slice(0,3).join(",")};\n`)).join("")}\n}\n.uri-node:hover {\n  text-decoration: underline;\n  cursor: var(--hterm-mouse-cursor-pointer);\n}\n@keyframes blink {\n  from { opacity: 1.0; }\n  to { opacity: 0.0; }\n}\n.blink-node {\n  animation-name: blink;\n  animation-duration: var(--hterm-blink-node-duration);\n  animation-iteration-count: infinite;\n  animation-timing-function: ease-in-out;\n  animation-direction: alternate;\n}`,this.document_.head.insertBefore(r,this.document_.head.firstChild),this.cursorNode_=this.document_.createElement("div"),this.cursorNode_.id="hterm:terminal-cursor",this.cursorNode_.className="cursor-node",this.cursorNode_.style.cssText=`\nposition: absolute;\nleft: calc(var(--hterm-screen-padding-size) +\n    var(--hterm-charsize-width) * var(--hterm-cursor-offset-col));\ntop: calc(var(--hterm-screen-padding-size) +\n    var(--hterm-charsize-height) * var(--hterm-cursor-offset-row));\ndisplay: ${this.options_.cursorVisible?"":"none"};\nwidth: var(--hterm-charsize-width);\nheight: var(--hterm-charsize-height);\nbackground-color: var(--hterm-cursor-color);\nborder-color: var(--hterm-cursor-color);\ntransition: opacity, background-color 100ms linear;`,this.setCursorColor(),this.setCursorBlink(!!this.prefs_.get("cursor-blink")),this.restyleCursor_(),this.document_.body.appendChild(this.cursorNode_),this.scrollBlockerNode_=this.document_.createElement("div"),this.scrollBlockerNode_.id="hterm:mouse-drag-scroll-blocker",this.scrollBlockerNode_.setAttribute("aria-hidden","true"),this.scrollBlockerNode_.style.cssText="position: absolute;top: -99px;display: block;width: 10px;height: 10px;",this.document_.body.appendChild(this.scrollBlockerNode_),this.scrollPort_.onScrollWheel=e,["mousedown","mouseup","mousemove","click","dblclick"].forEach(function(t){this.scrollBlockerNode_.addEventListener(t,e),this.cursorNode_.addEventListener(t,e),this.document_.addEventListener(t,e)}.bind(this)),this.cursorNode_.addEventListener("mousedown",function(){setTimeout(this.focus.bind(this))}.bind(this)),this.setReverseVideo(!1),this.document_.fonts.addEventListener("loadingdone",(()=>this.syncFontFamily())),this.scrollPort_.focus(),this.scrollPort_.scheduleRedraw()},hterm.Terminal.prototype.getDocument=function(){return this.document_},hterm.Terminal.prototype.focus=function(){this.scrollPort_.focus()},hterm.Terminal.prototype.blur=function(){this.scrollPort_.blur()},hterm.Terminal.prototype.getRowNode=function(e){if(e<this.scrollbackRows_.length)return this.scrollbackRows_[e];const t=e-this.scrollbackRows_.length;return this.screen_.rowsArray[t]},hterm.Terminal.prototype.getRowsText=function(e,t){const r=[];for(let o=e;o<t;o++){const e=this.getRowNode(o);r.push(e.textContent),o<t-1&&!e.getAttribute("line-overflow")&&r.push("\n")}return r.join("")},hterm.Terminal.prototype.getRowText=function(e){return this.getRowNode(e).textContent},hterm.Terminal.prototype.getRowCount=function(){return this.scrollbackRows_.length+this.screen_.rowsArray.length},hterm.Terminal.prototype.appendRows_=function(e){let t=this.screen_.rowsArray.length;const r=this.scrollbackRows_.length+t;for(let t=0;t<e;t++){const e=this.document_.createElement("x-row");e.appendChild(this.document_.createTextNode("")),e.rowIndex=r+t,this.screen_.pushRow(e)}const o=this.screen_.rowsArray.length-this.screenSize.height;if(o>0){const e=this.screen_.shiftRows(o);Array.prototype.push.apply(this.scrollbackRows_,e),this.scrollPort_.isScrolledEnd&&this.scheduleScrollDown_()}t>=this.screen_.rowsArray.length&&(t=this.screen_.rowsArray.length-1),this.setAbsoluteCursorPosition(t,0)},hterm.Terminal.prototype.insertRow_=function(){const e=this.document_.createElement("x-row");e.appendChild(this.document_.createTextNode("")),this.scrollbackRows_.push(this.screen_.shiftRow());const t=this.screen_.cursorPosition.row;this.screen_.insertRow(t,e),this.renumberRows_(t,this.screen_.rowsArray.length),this.setAbsoluteCursorPosition(t,0),this.scrollPort_.isScrolledEnd&&this.scheduleScrollDown_()},hterm.Terminal.prototype.moveRows_=function(e,t,r){const o=this.screen_.removeRows(e,t);let s,i;this.screen_.insertRows(r,o),e<r?(s=e,i=r+t):(s=r,i=e+t),this.renumberRows_(s,i),this.scrollPort_.scheduleInvalidate()},hterm.Terminal.prototype.renumberRows_=function(e,t,r=void 0){r||(r=this.screen_);const o=this.scrollbackRows_.length;for(let s=e;s<t;s++)r.rowsArray[s].rowIndex=o+s},hterm.Terminal.prototype.print=function(e){this.scheduleSyncCursorPosition_(),this.accessibilityReader_.announce(e);let t=0,r=hterm.wc.strWidth(e);for(0==r&&e&&(r=1);t<r;){this.options_.wraparound&&this.screen_.cursorPosition.overflow&&(this.screen_.commitLineOverflow(),this.newLine(!0));let o,s=r-t,i=!1;this.screen_.cursorPosition.column+s>=this.screenSize.width&&(i=!0,s=this.screenSize.width-this.screen_.cursorPosition.column),i&&!this.options_.wraparound?(o=hterm.wc.substr(e,t,s-1)+hterm.wc.substr(e,r-1),s=r):o=hterm.wc.substr(e,t,s);const n=hterm.TextAttributes.splitWidecharString(o);for(let e=0;e<n.length;e++)this.screen_.textAttributes.wcNode=n[e].wcNode,this.screen_.textAttributes.asciiNode=n[e].asciiNode,this.options_.insertMode?this.screen_.insertString(n[e].str,n[e].wcStrWidth):this.screen_.overwriteString(n[e].str,n[e].wcStrWidth),this.screen_.textAttributes.wcNode=!1,this.screen_.textAttributes.asciiNode=!0;this.screen_.maybeClipCurrentRow(),t+=s,this.findBar.scheduleNotifyChanges(this.scrollbackRows_.length+this.screen_.cursorPosition.row)}this.scrollOnOutput_&&this.scrollPort_.scrollRowToBottom(this.getRowCount())},hterm.Terminal.prototype.setVTScrollRegion=function(e,t){this.vtScrollTop_=e,this.vtScrollBottom_=t,t==this.screenSize.height-1&&(this.vtScrollBottom_=null,0==e&&(this.vtScrollTop_=null))},hterm.Terminal.prototype.getVTScrollTop=function(){return null!=this.vtScrollTop_?this.vtScrollTop_:0},hterm.Terminal.prototype.getVTScrollBottom=function(){return null!=this.vtScrollBottom_?this.vtScrollBottom_:this.screenSize.height-1},hterm.Terminal.prototype.newLine=function(e=!1){e||this.accessibilityReader_.newLine();const t=this.screen_.cursorPosition.row==this.screen_.rowsArray.length-1,r=this.screen_.cursorPosition.row==this.getVTScrollBottom();null!=this.vtScrollTop_&&r?(this.vtScrollUp(1),this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row,0)):t?this.appendRows_(1):r?this.insertRow_():this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row+1,0)},hterm.Terminal.prototype.lineFeed=function(){const e=this.screen_.cursorPosition.column;this.newLine(),this.setCursorColumn(e)},hterm.Terminal.prototype.formFeed=function(){this.options_.autoCarriageReturn?this.newLine():this.lineFeed()},hterm.Terminal.prototype.reverseLineFeed=function(){const e=this.getVTScrollTop(),t=this.screen_.cursorPosition.row;t==e?this.insertLines(1):this.setAbsoluteCursorRow(t-1)},hterm.Terminal.prototype.eraseToLeft=function(){const e=this.saveCursor();this.setCursorColumn(0);const t=e.column+1;this.screen_.overwriteString(" ".repeat(t),t),this.findBar.scheduleNotifyChanges(this.scrollbackRows_.length+this.screen_.cursorPosition.row),this.restoreCursor(e)},hterm.Terminal.prototype.eraseToRight=function(e=void 0){if(this.screen_.cursorPosition.overflow)return;const t=this.screenSize.width-this.screen_.cursorPosition.column;if(e=e?Math.min(e,t):t,this.findBar.scheduleNotifyChanges(this.scrollbackRows_.length+this.screen_.cursorPosition.row),this.screen_.textAttributes.background===this.screen_.textAttributes.DEFAULT_COLOR){const t=this.screen_.rowsArray[this.screen_.cursorPosition.row];if(hterm.TextAttributes.nodeWidth(t)<=this.screen_.cursorPosition.column+e)return this.screen_.deleteChars(e),void this.clearCursorOverflow()}const r=this.saveCursor();this.screen_.overwriteString(" ".repeat(e),e),this.restoreCursor(r),this.clearCursorOverflow()},hterm.Terminal.prototype.eraseLine=function(){const e=this.saveCursor();this.screen_.clearCursorRow(),this.restoreCursor(e),this.clearCursorOverflow()},hterm.Terminal.prototype.eraseAbove=function(){const e=this.saveCursor();this.eraseToLeft();for(let t=0;t<e.row;t++)this.setAbsoluteCursorPosition(t,0),this.screen_.clearCursorRow();this.restoreCursor(e),this.clearCursorOverflow()},hterm.Terminal.prototype.eraseBelow=function(){const e=this.saveCursor();this.eraseToRight();const t=this.screenSize.height-1;for(let r=e.row+1;r<=t;r++)this.setAbsoluteCursorPosition(r,0),this.screen_.clearCursorRow();this.restoreCursor(e),this.clearCursorOverflow()},hterm.Terminal.prototype.fill=function(e){const t=this.saveCursor();this.setAbsoluteCursorPosition(0,0);for(let t=0;t<this.screenSize.height;t++){for(let r=0;r<this.screenSize.width;r++)this.setAbsoluteCursorPosition(t,r),this.screen_.overwriteString(e,1);this.findBar.scheduleNotifyChanges(this.scrollbackRows_.length+t)}this.restoreCursor(t)},hterm.Terminal.prototype.clearHome=function(e=void 0){e||(e=this.screen_);const t=e.getHeight();if(this.accessibilityReader_.clear(),0!=t){for(let r=0;r<t;r++)e.setCursorPosition(r,0),e.clearCursorRow();e.setCursorPosition(0,0)}},hterm.Terminal.prototype.clear=function(e=void 0){e||(e=this.screen_);const t=e.cursorPosition.clone();this.clearHome(e),e.setCursorPosition(t.row,t.column)},hterm.Terminal.prototype.insertLines=function(e){const t=this.screen_.cursorPosition.row,r=this.getVTScrollBottom(),o=r-t-(e=Math.min(e,r-t))+1;o&&this.moveRows_(t,o,t+e);for(let r=e-1;r>=0;r--)this.setAbsoluteCursorPosition(t+r,0),this.screen_.clearCursorRow()},hterm.Terminal.prototype.deleteLines=function(e){const t=this.saveCursor(),r=t.row,o=this.getVTScrollBottom(),s=o-r+1,i=o-(e=Math.min(e,s))+1;e!=s&&this.moveRows_(r,e,i);for(let t=0;t<e;t++)this.setAbsoluteCursorPosition(i+t,0),this.screen_.clearCursorRow();this.restoreCursor(t),this.clearCursorOverflow()},hterm.Terminal.prototype.insertSpace=function(e){const t=this.saveCursor(),r=" ".repeat(e||1);this.screen_.insertString(r,r.length),this.screen_.maybeClipCurrentRow(),this.findBar.scheduleNotifyChanges(this.scrollbackRows_.length+this.screen_.cursorPosition.row),this.restoreCursor(t),this.clearCursorOverflow()},hterm.Terminal.prototype.deleteChars=function(e){const t=this.screen_.deleteChars(e);if(t&&!this.screen_.textAttributes.isDefault()){const e=this.saveCursor();this.setCursorColumn(this.screenSize.width-t),this.screen_.insertString(" ".repeat(t)),this.restoreCursor(e)}this.findBar.scheduleNotifyChanges(this.scrollbackRows_.length+this.screen_.cursorPosition.row),this.clearCursorOverflow()},hterm.Terminal.prototype.vtScrollUp=function(e){const t=this.saveCursor();this.setAbsoluteCursorRow(this.getVTScrollTop()),this.deleteLines(e),this.restoreCursor(t)},hterm.Terminal.prototype.vtScrollDown=function(e){const t=this.saveCursor();this.setAbsoluteCursorPosition(this.getVTScrollTop(),0),this.insertLines(e),this.restoreCursor(t)},hterm.Terminal.prototype.setAccessibilityEnabled=function(e){this.accessibilityReader_.setAccessibilityEnabled(e)},hterm.Terminal.prototype.setCursorPosition=function(e,t){this.options_.originMode?this.setRelativeCursorPosition(e,t):this.setAbsoluteCursorPosition(e,t)},hterm.Terminal.prototype.setRelativeCursorPosition=function(e,t){const r=this.getVTScrollTop();e=lib.f.clamp(e+r,r,this.getVTScrollBottom()),t=lib.f.clamp(t,0,this.screenSize.width-1),this.screen_.setCursorPosition(e,t)},hterm.Terminal.prototype.setAbsoluteCursorPosition=function(e,t){e=lib.f.clamp(e,0,this.screenSize.height-1),t=lib.f.clamp(t,0,this.screenSize.width-1),this.screen_.setCursorPosition(e,t)},hterm.Terminal.prototype.setCursorColumn=function(e){this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row,e)},hterm.Terminal.prototype.getCursorColumn=function(){return this.screen_.cursorPosition.column},hterm.Terminal.prototype.setAbsoluteCursorRow=function(e){this.setAbsoluteCursorPosition(e,this.screen_.cursorPosition.column)},hterm.Terminal.prototype.getCursorRow=function(){return this.screen_.cursorPosition.row},hterm.Terminal.prototype.scheduleRedraw_=function(){this.timeouts_.redraw||(this.timeouts_.redraw=setTimeout((()=>{delete this.timeouts_.redraw,this.scrollPort_.redraw_()})))},hterm.Terminal.prototype.scheduleScrollDown_=function(){this.timeouts_.scrollDown||(this.timeouts_.scrollDown=setTimeout((()=>{delete this.timeouts_.scrollDown,this.scrollPort_.scrollRowToBottom(this.getRowCount())}),10))},hterm.Terminal.prototype.cursorUp=function(e){this.cursorDown(-(e||1))},hterm.Terminal.prototype.cursorDown=function(e){e=e||1;const t=this.options_.originMode?this.getVTScrollTop():0,r=this.options_.originMode?this.getVTScrollBottom():this.screenSize.height-1,o=lib.f.clamp(this.screen_.cursorPosition.row+e,t,r);this.setAbsoluteCursorRow(o)},hterm.Terminal.prototype.cursorLeft=function(e){if((e=e||1)<1)return;const t=this.screen_.cursorPosition.column;if(this.options_.reverseWraparound){if(this.screen_.cursorPosition.overflow&&(e--,this.clearCursorOverflow(),!e))return;let r=this.screen_.cursorPosition.row,o=t-e;o<0&&(r=r-Math.floor(e/this.screenSize.width)-1,r<0&&(r=this.screenSize.height+r%this.screenSize.height),o=this.screenSize.width+o%this.screenSize.width),this.setCursorPosition(Math.max(r,0),o)}else{const r=Math.max(t-e,0);this.setCursorColumn(r)}},hterm.Terminal.prototype.cursorRight=function(e){if((e=e||1)<1)return;const t=lib.f.clamp(this.screen_.cursorPosition.column+e,0,this.screenSize.width-1);this.setCursorColumn(t)},hterm.Terminal.prototype.setReverseVideo=function(e){this.options_.reverseVideo=e,e?(this.setRgbColorCssVar("foreground-color",this.backgroundColor_),this.setRgbColorCssVar("background-color",this.foregroundColor_)):(this.setRgbColorCssVar("foreground-color",this.foregroundColor_),this.setRgbColorCssVar("background-color",this.backgroundColor_))},hterm.Terminal.prototype.ringBell=function(){if(this.cursorNode_.setAttribute("bell","true"),setTimeout((()=>this.cursorNode_.removeAttribute("bell")),200),!this.bellSquelchTimeout_&&(this.bellAudio_.getAttribute("src")?(this.bellAudio_.play(),this.bellSequelchTimeout_=setTimeout((()=>{this.bellSquelchTimeout_=null}),500)):this.bellSquelchTimeout_=null,this.desktopNotificationBell_&&!this.document_.hasFocus())){const e=hterm.notify();this.bellNotificationList_.push(e),e.onclick=()=>this.closeBellNotifications_()}},hterm.Terminal.prototype.setOriginMode=function(e){this.options_.originMode=e,this.setCursorPosition(0,0)},hterm.Terminal.prototype.setInsertMode=function(e){this.options_.insertMode=e},hterm.Terminal.prototype.setAutoCarriageReturn=function(e){this.options_.autoCarriageReturn=e},hterm.Terminal.prototype.setWraparound=function(e){this.options_.wraparound=e},hterm.Terminal.prototype.setReverseWraparound=function(e){this.options_.reverseWraparound=e},hterm.Terminal.prototype.setAlternateMode=function(e){if(e==(this.screen_==this.alternateScreen_))return;const t=this.screen_.textAttributes.colorPaletteOverrides,r=this.saveCursor();this.screen_=e?this.alternateScreen_:this.primaryScreen_;const o=this.screen_.textAttributes.colorPaletteOverrides;if(t.forEach(((e,t)=>{o.hasOwnProperty(t)||this.setRgbColorCssVar(`color-${t}`,this.getColorPalette(t))})),o.forEach(((e,t)=>this.setRgbColorCssVar(`color-${t}`,e))),this.screen_.rowsArray.length&&this.screen_.rowsArray[0].rowIndex!=this.scrollbackRows_.length){const e=this.scrollbackRows_.length,t=this.screen_.rowsArray;for(let r=0;r<t.length;r++)t[r].rowIndex=e+r}this.realizeWidth_(this.screenSize.width),this.realizeHeight_(this.screenSize.height),this.scrollPort_.syncScrollHeight(),this.scrollPort_.invalidate(),this.restoreCursor(r),this.scrollPort_.resize()},hterm.Terminal.prototype.setCursorBlink=function(e){this.options_.cursorBlink=e,!e&&this.timeouts_.cursorBlink&&(clearTimeout(this.timeouts_.cursorBlink),delete this.timeouts_.cursorBlink),this.options_.cursorVisible&&this.setCursorVisible(!0)},hterm.Terminal.prototype.setCursorVisible=function(e){if(this.options_.cursorVisible=e,!e)return this.timeouts_.cursorBlink&&(clearTimeout(this.timeouts_.cursorBlink),delete this.timeouts_.cursorBlink),void this.cursorNode_.setAttribute("visible","false");if(this.syncCursorPosition_(),this.cursorNode_.setAttribute("visible","true"),this.options_.cursorBlink){if(this.timeouts_.cursorBlink)return;this.onCursorBlink_()}else this.timeouts_.cursorBlink&&(clearTimeout(this.timeouts_.cursorBlink),delete this.timeouts_.cursorBlink)},hterm.Terminal.prototype.pauseCursorBlink_=function(){this.options_.cursorBlink&&(this.cursorBlinkPause_=!0,this.timeouts_.cursorBlinkPause&&clearTimeout(this.timeouts_.cursorBlinkPause),this.timeouts_.cursorBlinkPause=setTimeout((()=>{delete this.timeouts_.cursorBlinkPause,this.cursorBlinkPause_=!1}),500))},hterm.Terminal.prototype.syncCursorPosition_=function(){const e=this.scrollPort_.getTopRowIndex(),t=this.scrollPort_.getBottomRowIndex(e),r=this.scrollbackRows_.length+this.screen_.cursorPosition.row;let o=!1;if(this.accessibilityReader_.accessibilityEnabled){const e=this.screen_.cursorPosition.column,t=this.screen_.rowsArray[this.screen_.cursorPosition.row].innerText;o=this.accessibilityReader_.hasUserGesture,this.accessibilityReader_.afterCursorChange(t,r,e)}if(r>t)return this.cursorOffScreen_=!0,this.cursorNode_.style.display="none",!1;if("none"==this.cursorNode_.style.display&&(this.cursorOffScreen_=!1,this.cursorNode_.style.display=""),this.setCssVar("cursor-offset-row",r-e+" + "+`${this.scrollPort_.visibleRowTopMargin}px`),this.setCssVar("cursor-offset-col",this.screen_.cursorPosition.column),this.cursorNode_.setAttribute("title","("+this.screen_.cursorPosition.column+", "+this.screen_.cursorPosition.row+")"),!this.findBar.hasFocus){const e=this.document_.getSelection();e&&(e.isCollapsed||o)&&this.screen_.syncSelectionCaret(e)}return!0},hterm.Terminal.prototype.restyleCursor_=function(){let e=this.cursorShape_;"false"==this.cursorNode_.getAttribute("focus")&&(e=hterm.Terminal.cursorShape.BLOCK),this.cursorNode_.setAttribute("shape",e.toLowerCase())},hterm.Terminal.prototype.scheduleSyncCursorPosition_=function(){if(!this.timeouts_.syncCursor){if(this.accessibilityReader_.accessibilityEnabled){const e=this.scrollbackRows_.length+this.screen_.cursorPosition.row,t=this.screen_.cursorPosition.column,r=this.screen_.rowsArray[this.screen_.cursorPosition.row].innerText;this.accessibilityReader_.beforeCursorChange(r,e,t)}this.timeouts_.syncCursor=setTimeout((()=>{this.syncCursorPosition_(),delete this.timeouts_.syncCursor}))}},hterm.Terminal.prototype.showOverlay=function(e,t=1500){this.ready_&&this.notifications_&&this.notifications_.show(e,{timeout:t})},hterm.Terminal.prototype.hideOverlay=function(){this.notifications_.hide()},hterm.Terminal.prototype.paste=function(){if(!this.alwaysUseLegacyPasting&&navigator.clipboard&&navigator.clipboard.readText)return navigator.clipboard.readText().then((e=>this.onPasteData_(e))),null;try{return this.document_.execCommand("paste")}catch(e){return!1}},hterm.Terminal.prototype.copyStringToClipboard=function(e){if(this.prefs_.get("enable-clipboard-notice")){if(!this.clipboardNotice_){this.clipboardNotice_=this.document_.createElement("div"),this.clipboardNotice_.style.textAlign="center";const e=lib.resource.getData("hterm/images/copy");this.clipboardNotice_.innerHTML=hterm.sanitizeHtml(`${e}<div>${hterm.msg("NOTIFY_COPY")}</div>`)}setTimeout((()=>this.showOverlay(this.clipboardNotice_,500)),200)}hterm.copySelectionToClipboard(this.document_,e)},hterm.Terminal.prototype.displayImage=function(e,t,r){if(void 0!==e.uri||void 0!==e.buffer||void 0!==e.blob){if(e.name||(e.name=""),!e.type){const t=e.name.split(".");switch(t[t.length-1].trim()){case"svg":case"svgz":e.type="image/svg+xml"}}if(!0!==this.allowImagesInline){if(!1===this.allowImagesInline)return void this.showOverlay(hterm.msg("POPUP_INLINE_IMAGE_DISABLED",[],"Inline Images Disabled"));let e;const t=this.document_.createElement("span"),r=this.document_.createElement("p");return r.innerText=hterm.msg("POPUP_INLINE_IMAGE",[],"Inline Images"),r.style.textAlign="center",t.appendChild(r),e=this.document_.createElement("input"),e.type="button",e.value=hterm.msg("BUTTON_BLOCK",[],"block"),e.addEventListener("click",(()=>{this.prefs_.set("allow-images-inline",!1),this.hideOverlay()})),t.appendChild(e),t.appendChild(new Text(" ")),e=this.document_.createElement("input"),e.type="button",e.value=hterm.msg("BUTTON_ALLOW_SESSION",[],"allow this session"),e.addEventListener("click",(()=>{this.allowImagesInline=!0,this.hideOverlay()})),t.appendChild(e),t.appendChild(new Text(" ")),e=this.document_.createElement("input"),e.type="button",e.value=hterm.msg("BUTTON_ALLOW_ALWAYS",[],"always allow"),e.addEventListener("click",(()=>{this.prefs_.set("allow-images-inline",!0),this.hideOverlay()})),t.appendChild(e),void this.showOverlay(t,null)}if(e.inline){const o=this.io.push();o.showOverlay(hterm.msg("LOADING_RESOURCE_START",[e.name],"Loading $1 ...")),o.onVTKeystroke=o.sendString=()=>{};const s=this.document_.createElement("img");if(void 0!==e.uri)s.src=e.uri;else if(void 0!==e.buffer){const t=new Blob([e.buffer],{type:e.type});s.src=URL.createObjectURL(t)}else{const t=new Blob([e.blob],{type:e.type});s.src=URL.createObjectURL(t)}s.title=s.alt=e.name,this.document_.body.appendChild(s),s.onload=()=>{const r=this.scrollPort_.getScreenSize();s.style.objectFit=e.preserveAspectRatio?"scale-down":"fill",s.style.maxWidth=`${r.width}px`,s.style.maxHeight=`${r.height}px`;const i=(e,t,r)=>{if(!e||"auto"==e)return"";const o=e.match(/^([0-9]+)(px|%)?$/);return o?"%"==o[2]?Math.floor(t*o[1]/100)+"px":"px"==o[2]?e:`calc(${e} * var(${r}))`:""};s.style.width=i(e.width,r.width,"--hterm-charsize-width"),s.style.height=i(e.height,r.height,"--hterm-charsize-height");const n=Math.ceil(s.clientHeight/this.scrollPort_.characterSize.height);for(let e=0;e<n;++e)this.newLine();s.style.maxHeight=`calc(${n} * var(--hterm-charsize-height))`,this.document_.body.removeChild(s);const a=this.document_.createElement("div");a.style.position="relative",a.style.textAlign=e.align||"",s.style.position="absolute",s.style.bottom="calc(0px - var(--hterm-charsize-height))",a.appendChild(s);this.getRowNode(this.scrollbackRows_.length+this.getCursorRow()-1).appendChild(a),void 0===e.uri&&URL.revokeObjectURL(s.src),o.hideOverlay(),o.pop(),t&&t()},s.onerror=t=>{this.document_.body.removeChild(s),o.showOverlay(hterm.msg("LOADING_RESOURCE_FAILED",[e.name],"Loading $1 failed")),o.pop(),r&&r(t)}}else{const t=this.document_.createElement("a");if(void 0!==e.uri)t.href=e.uri;else if(void 0!==e.buffer){const r=new Blob([e.buffer]);t.href=URL.createObjectURL(r)}else t.href=URL.createObjectURL(lib.notNull(e.blob));t.download=e.name,this.document_.body.appendChild(t),t.click(),t.remove(),void 0===e.uri&&URL.revokeObjectURL(t.href)}}},hterm.Terminal.prototype.getSelectionText=function(){const e=this.scrollPort_.selection;if(e.sync(),e.isCollapsed)return null;let t=e.startOffset,r=e.startNode;if(!r)return null;if("X-ROW"!=r.nodeName)for("#text"==r.nodeName&&"SPAN"==r.parentNode.nodeName&&(r=r.parentNode);r.previousSibling;)r=r.previousSibling,t+=hterm.TextAttributes.nodeWidth(r);let o=hterm.TextAttributes.nodeWidth(lib.notNull(e.endNode))-e.endOffset;if(r=e.endNode,"X-ROW"!=r.nodeName)for("#text"==r.nodeName&&"SPAN"==r.parentNode.nodeName&&(r=r.parentNode);r.nextSibling;)r=r.nextSibling,o+=hterm.TextAttributes.nodeWidth(r);const s=this.getRowsText(e.startRow.rowIndex,e.endRow.rowIndex+1);return hterm.wc.substring(s,t,hterm.wc.strWidth(s)-o)},hterm.Terminal.prototype.copySelectionToClipboard=function(){const e=this.getSelectionText();null!=e&&this.copyStringToClipboard(e)},hterm.Terminal.prototype.overlaySize=function(){this.prefs_.get("enable-resize-status")&&this.showOverlay(`${this.screenSize.width} × ${this.screenSize.height}`)},hterm.Terminal.prototype.onVTKeystroke=function(e){this.scrollOnKeystroke_&&this.scrollPort_.scrollRowToBottom(this.getRowCount()),this.pauseCursorBlink_(),this.io.onVTKeystroke(e)},hterm.Terminal.prototype.openSelectedUrl_=function(){let e=this.getSelectionText();if((null!=e||(this.screen_.expandSelectionForUrl(this.document_.getSelection()),e=this.getSelectionText(),null!=e))&&!(e.length>2048||e.search(/[\s[\](){}<>"'\\^`]/)>=0)){if(e.search("^[a-zA-Z][a-zA-Z0-9+.-]*://")<0)if("mailto"===e.split(":",1)[0]);else e="http://"+e;hterm.openUrl(e)}},hterm.Terminal.prototype.setAutomaticMouseHiding=function(e=null){null===e&&(e="cros"!=hterm.os&&"mac"!=hterm.os),this.mouseHideWhileTyping_=!!e},hterm.Terminal.prototype.onKeyboardActivity_=function(e){this.mouseHideWhileTyping_&&!this.mouseHideDelay_&&this.setCssVar("mouse-cursor-style","none")},hterm.Terminal.prototype.onMouse_=function(e){if(e.processedByTerminalHandler_)return;e.button>2&&e.preventDefault();const t=!this.defeatMouseReports_&&this.vt.mouseReport!=this.vt.MOUSE_REPORT_DISABLED;e.processedByTerminalHandler_=!0,this.mouseHideWhileTyping_&&!this.mouseHideDelay_&&(this.syncMouseStyle(),this.mouseHideDelay_=setTimeout((()=>this.mouseHideDelay_=null),1e3));const r=this.scrollPort_.screenPaddingSize;if(e.terminalRow=Math.floor((e.clientY-this.scrollPort_.visibleRowTopMargin-r)/this.scrollPort_.characterSize.height)+1,e.terminalColumn=Math.floor((e.clientX-r)/this.scrollPort_.characterSize.width)+1,e.terminalRow=lib.f.clamp(e.terminalRow,1,this.screenSize.height),e.terminalColumn=lib.f.clamp(e.terminalColumn,1,this.screenSize.width),!("mousedown"==e.type&&e.clientX>=this.scrollPort_.getScrollbarX())){if(!this.options_.cursorVisible||t||this.cursorOffScreen_||(e.terminalRow-1==this.screen_.cursorPosition.row&&e.terminalColumn-1==this.screen_.cursorPosition.column?this.cursorNode_.style.display="none":"none"==this.cursorNode_.style.display&&(this.cursorNode_.style.display="")),"mousedown"==e.type&&(this.contextMenu.hide(),e.altKey||!t?(this.defeatMouseReports_=!0,this.setSelectionEnabled(!0)):(this.defeatMouseReports_=!1,this.document_.getSelection().collapseToEnd(),this.setSelectionEnabled(!1),e.preventDefault()),0===e.button&&this.scrollPort_.selection.setAutoScrollEnabled(!0)),t)this.scrollBlockerNode_.engaged||("mousedown"==e.type?(this.scrollBlockerNode_.engaged=!0,this.scrollBlockerNode_.style.top=e.clientY-5+"px",this.scrollBlockerNode_.style.left=e.clientX-5+"px"):"mousemove"==e.type&&(this.document_.getSelection().collapseToEnd(),e.preventDefault())),this.onMouse(e);else{if("dblclick"==e.type&&(this.screen_.expandSelection(this.document_.getSelection()),this.copyOnSelect&&this.copySelectionToClipboard()),"click"==e.type&&!e.shiftKey&&(e.ctrlKey||e.metaKey)){if("uri-node"===e.target.className)return;return clearTimeout(this.timeouts_.openUrl),void(this.timeouts_.openUrl=setTimeout(this.openSelectedUrl_.bind(this),500))}if("mousedown"==e.type&&(e.ctrlKey&&2==e.button?(e.preventDefault(),this.contextMenu.show(e,this)):(e.button==this.mousePasteButton||this.mouseRightClickPaste&&2==e.button)&&!1===this.paste()&&console.warn("Could not paste manually due to web restrictions")),"mouseup"==e.type&&0==e.button&&this.copyOnSelect&&!this.document_.getSelection().isCollapsed&&this.copySelectionToClipboard(),"mousemove"!=e.type&&"mouseup"!=e.type||!this.scrollBlockerNode_.engaged||(this.scrollBlockerNode_.engaged=!1,this.scrollBlockerNode_.style.top="-99px"),this.scrollWheelArrowKeys_&&!e.shiftKey&&this.keyboard.applicationCursor&&!this.isPrimaryScreen()&&"wheel"==e.type){const t=this.scrollPort_.scrollWheelDelta(e),r=(e,t,r,o)=>{if(0==e)return"";const s=lib.f.smartFloorDivide(Math.abs(e),t);return("O"+(e<0?o:r)).repeat(s)};this.io.sendString(r(t.y,this.scrollPort_.characterSize.height,"A","B")+r(t.x,this.scrollPort_.characterSize.width,"C","D")),e.preventDefault()}}"mouseup"==e.type&&(this.document_.getSelection().isCollapsed&&(this.defeatMouseReports_=!1),0===e.button&&this.scrollPort_.selection.setAutoScrollEnabled(!1))}},hterm.Terminal.prototype.onMouse=function(e){},hterm.Terminal.prototype.onFocusChange_=function(e){this.cursorNode_.setAttribute("focus",e),this.restyleCursor_(),this.reportFocus&&this.io.sendString(!0===e?"[I":"[O"),!0===e&&this.closeBellNotifications_()},hterm.Terminal.prototype.onScroll_=function(){this.scheduleSyncCursorPosition_()},hterm.Terminal.prototype.onPaste_=function(e){this.onPasteData_(e.text)},hterm.Terminal.prototype.onPasteData_=function(e){if(e=e.replace(/\n/gm,"\r"),this.options_.bracketedPaste){const t=e=>e.replace(/[\x00-\x07\x0b-\x0c\x0e-\x1f]/g,"");e="[200~"+t(e)+"[201~"}this.io.sendString(e)},hterm.Terminal.prototype.onCopy_=function(e){this.useDefaultWindowCopy||(e.preventDefault(),setTimeout(this.copySelectionToClipboard.bind(this),0))},hterm.Terminal.prototype.onResize_=function(){const e=Math.floor(this.scrollPort_.getScreenWidth()/this.scrollPort_.characterSize.width)||0,t=lib.f.smartFloorDivide(this.scrollPort_.getScreenHeight(),this.scrollPort_.characterSize.height)||0;if(e<=0||t<=0)return;const r=e!=this.screenSize.width||t!=this.screenSize.height,o=this.scrollPort_.isScrolledEnd;this.realizeSize_(e,t),this.updateCssCharsize_(),r&&this.overlaySize(),this.restyleCursor_(),this.scheduleSyncCursorPosition_(),o&&this.scrollEnd()},hterm.Terminal.prototype.onCursorBlink_=function(){this.options_.cursorBlink?"false"==this.cursorNode_.getAttribute("focus")||"false"==this.cursorNode_.getAttribute("visible")||this.cursorBlinkPause_?(this.cursorNode_.setAttribute("visible","true"),this.timeouts_.cursorBlink=setTimeout(this.myOnCursorBlink_,this.cursorBlinkCycle_[0])):(this.cursorNode_.setAttribute("visible","false"),this.timeouts_.cursorBlink=setTimeout(this.myOnCursorBlink_,this.cursorBlinkCycle_[1])):delete this.timeouts_.cursorBlink},hterm.Terminal.prototype.setScrollbarVisible=function(e){this.scrollPort_.setScrollbarVisible(e)},hterm.Terminal.prototype.setScrollWheelMoveMultipler=function(e){this.scrollPort_.setScrollWheelMoveMultipler(e)},hterm.Terminal.prototype.closeBellNotifications_=function(){this.bellNotificationList_.forEach((function(e){e.close()})),this.bellNotificationList_.length=0},hterm.Terminal.prototype.onScrollportFocus_=function(){const e=this.scrollPort_.getTopRowIndex(),t=this.scrollPort_.getBottomRowIndex(e),r=this.document_.getSelection();!this.syncCursorPosition_()&&r&&r.collapse(this.getRowNode(t))},hterm.Terminal.prototype.onOpenOptionsPage=function(){},hterm.Terminal.prototype.onOpenOptionsPage_=function(){this.onOpenOptionsPage()},hterm.Terminal.prototype.onOpenNewSession=function(){lib.f.openWindow(globalThis.location.href,"",`chrome=no,close=yes,resize=yes,scrollbars=yes,minimizable=yes,width=${globalThis.outerWidth},height=${globalThis.outerHeight}`)},hterm.Terminal.prototype.onTmuxControlModeLine=function(e){},hterm.Terminal.IO=function(e){this.terminal_=e,this.previousIO_=null,this.buffered_="",this.textDecoder_=new TextDecoder},hterm.Terminal.IO.prototype.showOverlay=function(e,t=void 0){this.terminal_.showOverlay(e,t)},hterm.Terminal.IO.prototype.hideOverlay=function(){this.terminal_.hideOverlay()},hterm.Terminal.IO.prototype.setTerminalProfile=function(e){this.terminal_.setProfile(e)},hterm.Terminal.IO.prototype.push=function(){const e=new this.constructor(this.terminal_);return e.columnCount=this.columnCount,e.rowCount=this.rowCount,e.previousIO_=this.terminal_.io,this.terminal_.io=e,e},hterm.Terminal.IO.prototype.pop=function(){this.terminal_.io=this.previousIO_,this.previousIO_.flush()},hterm.Terminal.IO.prototype.flush=function(){this.buffered_&&(this.terminal_.interpret(this.buffered_),this.buffered_="")},hterm.Terminal.IO.prototype.sendString=function(e){console.log("Unhandled sendString: "+e)},hterm.Terminal.IO.prototype.onVTKeystroke=function(e){console.log("Unobserverd VT keystroke: "+JSON.stringify(e))},hterm.Terminal.IO.prototype.onTerminalResize_=function(e,t){let r=this;for(;r;)r.columnCount=e,r.rowCount=t,r=r.previousIO_;this.onTerminalResize(e,t)},hterm.Terminal.IO.prototype.onTerminalResize=function(e,t){},hterm.Terminal.IO.prototype.writeUTF8=function(e){const t=new Uint8Array(e),r=this.textDecoder_.decode(t,{stream:!0});this.print(r)},hterm.Terminal.IO.prototype.writelnUTF8=function(e){this.writeUTF8(e),this.writeUTF8([13,10])},hterm.Terminal.IO.prototype.print=hterm.Terminal.IO.prototype.writeUTF16=function(e){this.terminal_.io==this?this.terminal_.interpret(e):this.buffered_+=e},hterm.Terminal.IO.prototype.println=hterm.Terminal.IO.prototype.writelnUTF16=function(e){this.print(e+"\r\n")};const maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexNonASCII=/[^\0-\x7F]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=35,floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(e){throw new RangeError(errors[e])}function map(e,t){const r=[];let o=e.length;for(;o--;)r[o]=t(e[o]);return r}function mapDomain(e,t){const r=e.split("@");let o="";r.length>1&&(o=r[0]+"@",e=r[1]);return o+map((e=e.replace(regexSeparators,".")).split("."),t).join(".")}function ucs2decode(e){const t=[];let r=0;const o=e.length;for(;r<o;){const s=e.charCodeAt(r++);if(s>=55296&&s<=56319&&r<o){const o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&s)<<10)+(1023&o)+65536):(t.push(s),r--)}else t.push(s)}return t}const digitToBasic=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},adapt=function(e,t,r){let o=0;for(e=r?floor(e/700):e>>1,e+=floor(e/t);e>455;o+=36)e=floor(e/35);return floor(o+36*e/(e+38))},encode=function(e){const t=[],r=(e=ucs2decode(e)).length;let o=128,s=0,i=72;for(const r of e)r<128&&t.push(stringFromCharCode(r));const n=t.length;let a=n;for(n&&t.push("-");a<r;){let r=maxInt;for(const t of e)t>=o&&t<r&&(r=t);const h=a+1;r-o>floor((maxInt-s)/h)&&error("overflow"),s+=(r-o)*h,o=r;for(const r of e)if(r<o&&++s>maxInt&&error("overflow"),r===o){let e=s;for(let r=36;;r+=36){const o=r<=i?1:r>=i+26?26:r-i;if(e<o)break;const s=e-o,n=36-o;t.push(stringFromCharCode(digitToBasic(o+s%n,0))),e=floor(s/n)}t.push(stringFromCharCode(digitToBasic(e,0))),i=adapt(s,h,a===n),s=0,++a}++s,++o}return t.join("")},toASCII=function(e){return mapDomain(e,(function(e){return regexNonASCII.test(e)?"xn--"+encode(e):e}))},punycode={toASCII:toASCII};hterm.TextAttributes=function(e){this.document_=e,this.foregroundSource=this.SRC_DEFAULT,this.backgroundSource=this.SRC_DEFAULT,this.underlineSource=this.SRC_DEFAULT,this.foreground=this.DEFAULT_COLOR,this.background=this.DEFAULT_COLOR,this.underlineColor=this.DEFAULT_COLOR,this.defaultForeground="rgb(var(--hterm-foreground-color))",this.defaultBackground="rgb(var(--hterm-background-color))",this.bold=!1,this.faint=!1,this.italic=!1,this.blink=!1,this.underline=!1,this.strikethrough=!1,this.inverse=!1,this.invisible=!1,this.wcNode=!1,this.asciiNode=!0,this.tileData=null,this.uri=null,this.uriId=null,this.colorPaletteOverrides=[]},hterm.TextAttributes.prototype.enableBold=!0,hterm.TextAttributes.prototype.enableBoldAsBright=!0,hterm.TextAttributes.prototype.DEFAULT_COLOR=Symbol("DEFAULT_COLOR"),hterm.TextAttributes.prototype.SRC_DEFAULT=Symbol("SRC_DEFAULT"),hterm.TextAttributes.prototype.setDocument=function(e){this.document_=e},hterm.TextAttributes.prototype.clone=function(){const e=new hterm.TextAttributes;for(const t in this)e[t]=this[t];return e.colorPaletteOverrides=this.colorPaletteOverrides.concat(),e},hterm.TextAttributes.prototype.reset=function(){this.foregroundSource=this.SRC_DEFAULT,this.backgroundSource=this.SRC_DEFAULT,this.underlineSource=this.SRC_DEFAULT,this.foreground=this.DEFAULT_COLOR,this.background=this.DEFAULT_COLOR,this.underlineColor=this.DEFAULT_COLOR,this.bold=!1,this.faint=!1,this.italic=!1,this.blink=!1,this.underline=!1,this.strikethrough=!1,this.inverse=!1,this.invisible=!1,this.wcNode=!1,this.asciiNode=!0,this.uri=null,this.uriId=null},hterm.TextAttributes.prototype.isDefault=function(){return this.foregroundSource==this.SRC_DEFAULT&&this.backgroundSource==this.SRC_DEFAULT&&!this.bold&&!this.faint&&!this.italic&&!this.blink&&!this.underline&&!this.strikethrough&&!this.inverse&&!this.invisible&&!this.wcNode&&this.asciiNode&&null==this.tileData&&null==this.uri},hterm.TextAttributes.prototype.createContainer=function(e=""){if(this.isDefault()){const t=this.document_.createTextNode(e);return t.asciiNode=!0,t}const t=this.document_.createElement("span"),r=t.style,o=[];this.foreground!=this.DEFAULT_COLOR&&(r.color=this.foreground.toString()),this.background!=this.DEFAULT_COLOR&&(r.backgroundColor=this.background.toString(),r.display="inline-block"),this.enableBold&&this.bold&&(r.fontWeight="bold"),this.faint&&(t.faint=!0),this.italic&&(r.fontStyle="italic"),this.blink&&(o.push("blink-node"),t.blinkNode=!0);let s="";if(t.underline=this.underline,this.underline&&(s+=" underline",r.textDecorationStyle=this.underline),this.underlineColor!=this.DEFAULT_COLOR&&(r.textDecorationColor=this.underlineColor),this.strikethrough&&(s+=" line-through",t.strikethrough=!0),s&&(r.textDecorationLine=s),this.wcNode&&(o.push("wc-node"),t.wcNode=!0),t.asciiNode=this.asciiNode,null!=this.tileData&&(o.push("tile"),o.push("tile_"+this.tileData),t.tileNode=!0),e&&(t.textContent=e),this.uri){o.push("uri-node"),t.uriId=this.uriId,t.title=this.uri;try{const e=new URL(this.uri),r=punycode.toASCII(e.host),o=r===e.host?e.host:r;o&&(t.title+=`\n(${o})`)}catch(e){}t.addEventListener("click",hterm.openUrl.bind(this,this.uri))}return o.length&&(t.className=o.join(" ")),t},hterm.TextAttributes.prototype.matchesContainer=function(e){if("string"==typeof e||e.nodeType==Node.TEXT_NODE)return this.isDefault();const t=e.style;return!(this.wcNode||e.wcNode||this.asciiNode!=e.asciiNode||null!=this.tileData||e.tileNode||this.uriId!=e.uriId||this.foreground!=this.DEFAULT_COLOR||""!=t.color||this.background!=this.DEFAULT_COLOR||""!=t.backgroundColor||this.underlineColor!=this.DEFAULT_COLOR||""!=t.textDecorationColor||(this.enableBold&&this.bold)!=!!t.fontWeight||this.blink!=!!e.blinkNode||this.italic!=!!t.fontStyle||this.underline!=e.underline||!!this.strikethrough!=!!e.strikethrough)},hterm.TextAttributes.prototype.syncColors=function(){const e=(e,t)=>e==this.DEFAULT_COLOR?t:e;this.enableBoldAsBright&&this.bold&&"number"==typeof this.foregroundSource&&Number.isInteger(this.foregroundSource)&&(this.foregroundSource=function(e){return e<8?e+8:e}(this.foregroundSource));const t=e=>e==this.SRC_DEFAULT?this.DEFAULT_COLOR:"number"==typeof e&&Number.isInteger(e)?`rgb(var(--hterm-color-${e}))`:e.toString();if(this.foreground=t(this.foregroundSource),this.faint&&(this.foreground==this.DEFAULT_COLOR?this.foreground="rgba(var(--hterm-foreground-color), 0.67)":"number"==typeof this.foregroundSource&&Number.isInteger(this.foregroundSource)?this.foreground=`rgba(var(--hterm-color-${this.foregroundSource}), 0.67)`:this.foreground=lib.colors.setAlpha(this.foreground.toString(),.67)),this.background=t(this.backgroundSource),this.inverse){const t=e(this.foreground,this.defaultForeground);this.foreground=e(this.background,this.defaultBackground),this.background=t}this.invisible&&(this.foreground=this.background),this.underlineColor=t(this.underlineSource)},hterm.TextAttributes.containersMatch=function(e,t){if("string"==typeof e)return hterm.TextAttributes.containerIsDefault(t);if(e.nodeType!=t.nodeType)return!1;if(e.nodeType==Node.TEXT_NODE)return!0;const r=e.style,o=t.style;return r.color==o.color&&r.backgroundColor==o.backgroundColor&&r.backgroundColor==o.backgroundColor&&r.fontWeight==o.fontWeight&&r.fontStyle==o.fontStyle&&r.textDecoration==o.textDecoration&&r.textDecorationColor==o.textDecorationColor&&r.textDecorationStyle==o.textDecorationStyle&&r.textDecorationLine==o.textDecorationLine},hterm.TextAttributes.containerIsDefault=function(e){return"string"==typeof e||e.nodeType==Node.TEXT_NODE},hterm.TextAttributes.nodeWidth=function(e){return e.asciiNode?e.textContent.length:hterm.wc.strWidth(e.textContent)},hterm.TextAttributes.nodeSubstr=function(e,t,r){return e.asciiNode?e.textContent.substr(t,r):hterm.wc.substr(e.textContent,t,r)},hterm.TextAttributes.nodeSubstring=function(e,t,r){return e.asciiNode?e.textContent.substring(t,r):hterm.wc.substring(e.textContent,t,r)},hterm.TextAttributes.splitWidecharString=function(e){const t=new RegExp("^[ -]*$");if(t.test(e))return[{str:e,wcNode:!1,asciiNode:!0,wcStrWidth:e.length}];const r=new Intl.Segmenter(void 0,{type:"grapheme"}).segment(e),o=[];for(const e of r){const r=e.segment,s=t.test(r),i=s?1:hterm.wc.strWidth(r),n=!s&&2==hterm.wc.charWidth(r.codePointAt(0)),a=o[o.length-1];!a||n||a.wcNode?o.push({str:r,wcNode:n,asciiNode:s,wcStrWidth:i}):(a.str+=r,a.wcStrWidth+=i,a.asciiNode=a.asciiNode&&s)}return o},hterm.VT=function(e){this.terminal=e,e.onMouse=this.onTerminalMouse_.bind(this),this.mouseReport=this.MOUSE_REPORT_DISABLED,this.mouseCoordinates=this.MOUSE_COORDINATES_X10,this.lastMouseDragResponse_=null,this.parseState_=new hterm.VT.ParseState(this.parseUnknown_),this.leadingModifier_="",this.trailingModifier_="",this.allowColumnWidthChanges_=!1,this.oscTimeLimit_=2e4,this.enable8BitControl=!1,this.enableClipboardWrite=!0,this.enableDec12=!1,this.enableCsiJ3=!0,this.warnUnimplemented=!1,this.characterMaps=new hterm.VT.CharacterMaps,this.G0=this.G1=this.G2=this.G3=this.characterMaps.getMap("B"),this.GL="G0",this.GR="G0",this.codingSystemUtf8_=!1,this.codingSystemLocked_=!1,this.cc1Pattern_=null,this.updateEncodingState_()},hterm.VT.prototype.MOUSE_REPORT_DISABLED=0,hterm.VT.prototype.MOUSE_REPORT_PRESS=1,hterm.VT.prototype.MOUSE_REPORT_CLICK=2,hterm.VT.prototype.MOUSE_REPORT_DRAG=3,hterm.VT.prototype.MOUSE_COORDINATES_X10=0,hterm.VT.prototype.MOUSE_COORDINATES_UTF8=1,hterm.VT.prototype.MOUSE_COORDINATES_SGR=2,hterm.VT.ParseState=function(e,t=null){this.defaultFunction=e,this.buf=t,this.pos=0,this.func=e,this.args=[],this.subargs=null},hterm.VT.ParseState.prototype.reset=function(e=""){this.resetParseFunction(),this.resetBuf(e),this.resetArguments()},hterm.VT.ParseState.prototype.resetParseFunction=function(){this.func=this.defaultFunction},hterm.VT.ParseState.prototype.resetBuf=function(e=null){this.buf=e,this.pos=0},hterm.VT.ParseState.prototype.resetArguments=function(e=void 0){this.args.length=0,void 0!==e&&(this.args[0]=e)},hterm.VT.ParseState.prototype.parseInt=function(e,t){if(void 0===t&&(t=0),e){const r=parseInt(e,10);return 0==r?t:r}return t},hterm.VT.ParseState.prototype.iarg=function(e,t){return this.parseInt(this.args[e],t)},hterm.VT.ParseState.prototype.argHasSubargs=function(e){return!(!this.subargs||!this.subargs[e])},hterm.VT.ParseState.prototype.argSetSubargs=function(e){null===this.subargs&&(this.subargs={}),this.subargs[e]=!0},hterm.VT.ParseState.prototype.advance=function(e){this.pos+=e},hterm.VT.ParseState.prototype.peekRemainingBuf=function(){return this.buf.substr(this.pos)},hterm.VT.ParseState.prototype.peekChar=function(){return this.buf.substr(this.pos,1)},hterm.VT.ParseState.prototype.consumeChar=function(){return this.buf.substr(this.pos++,1)},hterm.VT.ParseState.prototype.isComplete=function(){return null==this.buf||this.buf.length<=this.pos},hterm.VT.prototype.resetParseState=function(){this.parseState_.reset()},hterm.VT.prototype.reset=function(){this.G0=this.G1=this.G2=this.G3=this.characterMaps.getMap("B"),this.GL="G0",this.GR="G0",this.mouseReport=this.MOUSE_REPORT_DISABLED,this.mouseCoordinates=this.MOUSE_COORDINATES_X10,this.lastMouseDragResponse_=null},hterm.VT.prototype.onTerminalMouse_=function(e){if(this.mouseReport==this.MOUSE_REPORT_DISABLED)return;if(this.mouseReport!=this.MOUSE_REPORT_DRAG&&"mousemove"==e.type)return;let t,r,o,s=0;this.mouseReport!=this.MOUSE_REPORT_PRESS&&(e.shiftKey&&(s|=4),(e.metaKey||this.terminal.keyboard.altIsMeta&&e.altKey)&&(s|=8),e.ctrlKey&&(s|=16));let i,n=127;switch(this.mouseCoordinates){case this.MOUSE_COORDINATES_UTF8:n=2047;case this.MOUSE_COORDINATES_X10:r=String.fromCharCode(lib.f.clamp(e.terminalColumn+32,32,n)),o=String.fromCharCode(lib.f.clamp(e.terminalRow+32,32,n));break;case this.MOUSE_COORDINATES_SGR:r=e.terminalColumn,o=e.terminalRow}switch(e.type){case"wheel":i=64+(-1*e.deltaY>0?0:1),i|=s,t=this.mouseCoordinates==this.MOUSE_COORDINATES_SGR?`[<${i};${r};${o}M`:"[M"+String.fromCharCode(i+32)+r+o,e.preventDefault();break;case"mousedown":i=Math.min(e.button,2),this.mouseCoordinates!=this.MOUSE_COORDINATES_SGR&&(i+=32),i|=s,t=this.mouseCoordinates==this.MOUSE_COORDINATES_SGR?`[<${i};${r};${o}M`:"[M"+String.fromCharCode(i)+r+o;break;case"mouseup":this.mouseReport!=this.MOUSE_REPORT_PRESS&&(t=this.mouseCoordinates==this.MOUSE_COORDINATES_SGR?`[<${e.button};${r};${o}m`:"[M#"+r+o);break;case"mousemove":this.mouseReport==this.MOUSE_REPORT_DRAG&&e.buttons&&(i=this.mouseCoordinates==this.MOUSE_COORDINATES_SGR?0:32,1&e.buttons?i+=0:4&e.buttons?i+=1:2&e.buttons?i+=2:i+=3,i+=32,i|=s,t=this.mouseCoordinates==this.MOUSE_COORDINATES_SGR?`[<${i};${r};${o}M`:"[M"+String.fromCharCode(i)+r+o,this.lastMouseDragResponse_==t?t="":this.lastMouseDragResponse_=t);break;case"click":case"dblclick":break;default:console.error("Unknown mouse event: "+e.type,e)}t&&this.terminal.io.sendString(t)},hterm.VT.prototype.interpret=function(e){for(this.parseState_.resetBuf(e);!this.parseState_.isComplete();){const e=this.parseState_.func,t=this.parseState_.pos,r=this.parseState_.buf;if(this.parseState_.func.call(this,this.parseState_),this.parseState_.func==e&&this.parseState_.pos==t&&this.parseState_.buf==r)throw new Error("Parser did not alter the state!")}},hterm.VT.prototype.setEncoding=function(e){switch(e){default:console.warn('Invalid value for "terminal-encoding": '+e);case"iso-2022":this.codingSystemUtf8_=!1,this.codingSystemLocked_=!1;break;case"utf-8-locked":this.codingSystemUtf8_=!0,this.codingSystemLocked_=!0;break;case"utf-8":this.codingSystemUtf8_=!0,this.codingSystemLocked_=!1}this.updateEncodingState_()},hterm.VT.prototype.updateEncodingState_=function(){const e=Object.keys(hterm.VT.CC1).filter((e=>!this.codingSystemUtf8_||e.charCodeAt()<128)).map((e=>"\\x"+lib.f.zpad(e.charCodeAt().toString(16),2))).join("");this.cc1Pattern_=new RegExp(`[${e}]`)},hterm.VT.prototype.parseUnknown_=function(e){const t=e=>{!this.codingSystemUtf8_&&this[this.GL].GL&&(e=this[this.GL].GL(e)),this.terminal.print(e)},r=e.peekRemainingBuf(),o=r.search(this.cc1Pattern_);return 0==o?(this.dispatch("CC1",r.substr(0,1),e),void e.advance(1)):-1==o?(t(r),void e.reset()):(t(r.substr(0,o)),this.dispatch("CC1",r.substr(o,1),e),void e.advance(o+1))},hterm.VT.prototype.parseCSI_=function(e){const t=e.peekChar(),r=e.args,o=()=>{e.resetArguments(),e.subargs=null,e.resetParseFunction()};t>="@"&&t<="~"?(this.dispatch("CSI",this.leadingModifier_+this.trailingModifier_+t,e),o()):";"==t?this.trailingModifier_?o():(r.length||r.push(""),r.push("")):t>="0"&&t<="9"||":"==t?this.trailingModifier_?o():(r.length?r[r.length-1]+=t:r[0]=t,":"==t&&e.argSetSubargs(r.length-1)):t>=" "&&t<="?"?r.length?this.trailingModifier_+=t:this.leadingModifier_+=t:this.cc1Pattern_.test(t)?this.dispatch("CC1",t,e):o(),e.advance(1)},hterm.VT.prototype.parseDCS_=function(e){const t=e.peekChar(),r=e.args,o=()=>{e.resetArguments(),e.resetParseFunction()};if(t>="@"&&t<="~")return e.advance(1),this.dispatch("DCS",this.leadingModifier_+this.trailingModifier_+t,e),void(e.func===this.parseDCS_&&(e.func=this.parseUntilStringTerminator_));";"===t?this.trailingModifier_?o():(r.length||r.push(""),r.push("")):t>="0"&&t<="9"?this.trailingModifier_?o():r.length?r[r.length-1]+=t:r[0]=t:t>=" "&&t<="?"?r.length?this.trailingModifier_+=t:this.leadingModifier_+=t:this.cc1Pattern_.test(t)?this.dispatch("CC1",t,e):o(),e.advance(1)},hterm.VT.prototype.parseTmuxControlModeData_=function(e){const t=e.args;for(t.length||(t[0]="");;){const r=t[0].length,o=t[0]+e.peekRemainingBuf();t[0]="";const s=o.search(/\x1b\\|\r\n/);if(-1===s)return e.args[0]=o,void e.resetBuf();const i=o.slice(0,s);if(e.advance(s+2-r),""===o[s])return i&&console.error(`unexpected data before ST: ${i}`),this.terminal.onTmuxControlModeLine(null),e.resetArguments(),void e.resetParseFunction();this.terminal.onTmuxControlModeLine(i)}},hterm.VT.prototype.parseUntilStringTerminator_=function(e){let t=e.peekRemainingBuf();const r=e.args;let o=0;r.length?""==r[0].slice(-1)&&(r[0]=r[0].slice(0,-1),t=""+t,o=1):(r[0]="",r[1]=(new Date).getTime());const s=t.search(/[\x1b\x07]/),i=t[s];let n;if(n=(""!=i||"\\"==t[s+1])&&-1!=s,!n){let n;r[0]+=t,""==i&&s!=t.length-1&&(n="embedded escape: "+s);const a=(new Date).getTime()-r[1];return a>this.oscTimeLimit_&&(n=`timeout expired: ${a}s`),n?(this.warnUnimplemented&&console.log("parseUntilStringTerminator_: aborting: "+n,r[0]),e.reset(r[0]),!1):(e.advance(t.length-o),!0)}return r[0]+=t.substr(0,s),e.resetParseFunction(),e.advance(s+(""==i?2:1)-o),!0},hterm.VT.prototype.dispatch=function(e,t,r){const o=hterm.VT[e][t];o?o!=hterm.VT.ignore?!r.subargs||o.supportsSubargs?"CC1"==e&&t>""&&!this.enable8BitControl?console.warn("Ignoring 8-bit control code: 0x"+t.charCodeAt(0).toString(16)):o.apply(this,[r,t]):this.warnUnimplemented&&console.warn(`Ignored ${e} code w/subargs: ${JSON.stringify(t)}`):this.warnUnimplemented&&console.warn(`Ignored ${e} code: ${JSON.stringify(t)}`):this.warnUnimplemented&&console.warn(`Unknown ${e} code: ${JSON.stringify(t)}`)},hterm.VT.prototype.setANSIMode=function(e,t){4==e?this.terminal.setInsertMode(t):20==e?this.terminal.setAutoCarriageReturn(t):this.warnUnimplemented&&console.warn("Unimplemented ANSI Mode: "+e)},hterm.VT.prototype.setDECMode=function(e,t){switch(parseInt(e,10)){case 1:this.terminal.keyboard.applicationCursor=t;break;case 3:this.allowColumnWidthChanges_&&(this.terminal.setWidth(t?132:80),this.terminal.clearHome(),this.terminal.setVTScrollRegion(null,null));break;case 5:this.terminal.setReverseVideo(t);break;case 6:this.terminal.setOriginMode(t);break;case 7:this.terminal.setWraparound(t);break;case 9:this.mouseReport=t?this.MOUSE_REPORT_PRESS:this.MOUSE_REPORT_DISABLED,this.terminal.syncMouseStyle();break;case 12:this.enableDec12&&this.terminal.setCursorBlink(t);break;case 25:this.terminal.setCursorVisible(t);break;case 30:this.terminal.setScrollbarVisible(t);break;case 40:this.terminal.allowColumnWidthChanges_=t;break;case 45:this.terminal.setReverseWraparound(t);break;case 67:this.terminal.keyboard.backspaceSendsBackspace=t;break;case 1e3:this.mouseReport=t?this.MOUSE_REPORT_CLICK:this.MOUSE_REPORT_DISABLED,this.terminal.syncMouseStyle();break;case 1002:this.mouseReport=t?this.MOUSE_REPORT_DRAG:this.MOUSE_REPORT_DISABLED,this.terminal.syncMouseStyle();break;case 1004:this.terminal.reportFocus=t;break;case 1005:this.mouseCoordinates=t?this.MOUSE_COORDINATES_UTF8:this.MOUSE_COORDINATES_X10;break;case 1006:this.mouseCoordinates=t?this.MOUSE_COORDINATES_SGR:this.MOUSE_COORDINATES_X10;break;case 1007:this.terminal.scrollWheelArrowKeys_=t;break;case 1010:this.terminal.scrollOnOutput=t;break;case 1011:this.terminal.scrollOnKeystroke=t;break;case 1036:this.terminal.keyboard.metaSendsEscape=t;break;case 1039:t?this.terminal.keyboard.previousAltSendsWhat_||(this.terminal.keyboard.previousAltSendsWhat_=this.terminal.keyboard.altSendsWhat,this.terminal.keyboard.altSendsWhat="escape"):this.terminal.keyboard.previousAltSendsWhat_&&(this.terminal.keyboard.altSendsWhat=this.terminal.keyboard.previousAltSendsWhat_,this.terminal.keyboard.previousAltSendsWhat_=null);break;case 47:case 1047:this.terminal.setAlternateMode(t);break;case 1048:t?this.terminal.saveCursorAndState():this.terminal.restoreCursorAndState();break;case 1049:t?(this.terminal.saveCursorAndState(),this.terminal.setAlternateMode(t),this.terminal.clear()):(this.terminal.setAlternateMode(t),this.terminal.restoreCursorAndState());break;case 2004:this.terminal.setBracketedPaste(t);break;default:this.warnUnimplemented&&console.warn("Unimplemented DEC Private Mode: "+e)}},hterm.VT.ignore=function(){},hterm.VT.CC1={},hterm.VT.ESC={},hterm.VT.CSI={},hterm.VT.DCS={},hterm.VT.OSC={},hterm.VT.VT52={},hterm.VT.CC1["\0"]=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ignore,hterm.VT.CC1[""]=function(){this.terminal.ringBell()},hterm.VT.CC1["\b"]=function(){this.terminal.cursorLeft(1)},hterm.VT.CC1["\t"]=function(){this.terminal.forwardTabStop()},hterm.VT.CC1["\n"]=function(){this.terminal.formFeed()},hterm.VT.CC1["\v"]=hterm.VT.CC1["\n"],hterm.VT.CC1["\f"]=hterm.VT.CC1["\n"],hterm.VT.CC1["\r"]=function(){this.terminal.setCursorColumn(0)},hterm.VT.CC1[""]=function(){this.GL="G1"},hterm.VT.CC1[""]=function(){this.GL="G0"},hterm.VT.CC1[""]=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ignore,hterm.VT.CC1[""]=function(e){"G1"==this.GL&&(this.GL="G0"),e.resetParseFunction(),this.terminal.print("?")},hterm.VT.CC1[""]=hterm.VT.CC1[""],hterm.VT.CC1[""]=function(e){e.func=function e(t){const r=t.consumeChar();""!=r&&(this.dispatch("ESC",r,t),t.func==e&&t.resetParseFunction())}},hterm.VT.CC1[""]=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ESC.D=function(){this.terminal.lineFeed()},hterm.VT.CC1[""]=hterm.VT.ESC.E=function(){this.terminal.setCursorColumn(0),this.terminal.cursorDown(1)},hterm.VT.CC1[""]=hterm.VT.ESC.H=function(){this.terminal.setTabStop(this.terminal.getCursorColumn())},hterm.VT.CC1[""]=hterm.VT.ESC.M=function(){this.terminal.reverseLineFeed()},hterm.VT.CC1[""]=hterm.VT.ESC.N=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ESC.O=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ESC.P=function(e){e.resetArguments(),this.leadingModifier_="",this.trailingModifier_="",e.func=this.parseDCS_},hterm.VT.CC1[""]=hterm.VT.ESC.V=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ESC.W=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ESC.X=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ESC.Z=function(){this.terminal.io.sendString("[?1;2c")},hterm.VT.CC1[""]=hterm.VT.ESC["["]=function(e){e.resetArguments(),this.leadingModifier_="",this.trailingModifier_="",e.func=this.parseCSI_},hterm.VT.CC1[""]=hterm.VT.ESC["\\"]=hterm.VT.ignore,hterm.VT.CC1[""]=hterm.VT.ESC["]"]=function(e){e.resetArguments(),e.func=function e(t){if(!this.parseUntilStringTerminator_(t))return;if(t.func==e)return;const r=t.args[0].match(/^(\d+);?(.*)$/);r?(t.args[0]=r[2],this.dispatch("OSC",r[1],t)):console.warn("Invalid OSC: "+JSON.stringify(t.args[0])),t.resetArguments()}},hterm.VT.CC1[""]=hterm.VT.ESC["^"]=function(e){e.resetArguments(),e.func=this.parseUntilStringTerminator_},hterm.VT.CC1[""]=hterm.VT.ESC._=function(e){e.resetArguments(),e.func=this.parseUntilStringTerminator_},hterm.VT.ESC[" "]=function(e){e.func=function(e){const t=e.consumeChar();this.warnUnimplemented&&console.warn("Unimplemented sequence: ESC 0x20 "+t),e.resetParseFunction()}},hterm.VT.ESC["#"]=function(e){e.func=function(e){"8"==e.consumeChar()&&(this.terminal.setCursorPosition(0,0),this.terminal.fill("E")),e.resetParseFunction()}},hterm.VT.ESC["%"]=function(e){e.func=function(e){let t=e.consumeChar();if(this.codingSystemLocked_)return"/"==t&&e.consumeChar(),void e.resetParseFunction();switch(t){case"@":this.setEncoding("iso-2022");break;case"G":this.setEncoding("utf-8");break;case"/":switch(t=e.consumeChar(),t){case"G":case"H":case"I":this.setEncoding("utf-8-locked");break;default:this.warnUnimplemented&&console.warn("Unknown ESC % / argument: "+JSON.stringify(t))}break;default:this.warnUnimplemented&&console.warn("Unknown ESC % argument: "+JSON.stringify(t))}e.resetParseFunction()}},hterm.VT.ESC["("]=hterm.VT.ESC[")"]=hterm.VT.ESC["*"]=hterm.VT.ESC["+"]=hterm.VT.ESC["-"]=hterm.VT.ESC["."]=hterm.VT.ESC["/"]=function(e,t){e.func=function(e){if(""===e.peekChar())return void e.resetParseFunction();const r=e.consumeChar(),o=this.characterMaps.getMap(r);void 0!==o?"("==t?this.G0=o:")"==t||"-"==t?this.G1=o:"*"==t||"."==t?this.G2=o:"+"!=t&&"/"!=t||(this.G3=o):this.warnUnimplemented&&console.log('Invalid character set for "'+t+'": '+r),e.resetParseFunction()}},hterm.VT.ESC[6]=hterm.VT.ignore,hterm.VT.ESC[7]=function(){this.terminal.saveCursorAndState()},hterm.VT.ESC[8]=function(){this.terminal.restoreCursorAndState()},hterm.VT.ESC[9]=hterm.VT.ignore,hterm.VT.ESC["="]=function(){this.terminal.keyboard.applicationKeypad=!0},hterm.VT.ESC[">"]=function(){this.terminal.keyboard.applicationKeypad=!1},hterm.VT.ESC.F=hterm.VT.ignore,hterm.VT.ESC.c=function(){this.terminal.reset()},hterm.VT.ESC.k=function(e){e.resetArguments(),e.func=function e(t){this.parseUntilStringTerminator_(t)&&t.func!==e&&(this.terminal.setWindowName(t.args[0]),t.resetArguments())}},hterm.VT.ESC.l=hterm.VT.ESC.m=hterm.VT.ignore,hterm.VT.ESC.n=function(){this.GL="G2"},hterm.VT.ESC.o=function(){this.GL="G3"},hterm.VT.ESC["|"]=function(){this.GR="G3"},hterm.VT.ESC["}"]=function(){this.GR="G2"},hterm.VT.ESC["~"]=function(){this.GR="G1"},hterm.VT.DCS.p=function(e){1===e.args.length&&"1000"===e.args[0]&&(e.resetArguments(),e.func=this.parseTmuxControlModeData_)},hterm.VT.OSC[0]=function(e){this.terminal.setWindowTitle(e.args[0])},hterm.VT.OSC[2]=hterm.VT.OSC[0],hterm.VT.OSC[4]=function(e){const t=e.args[0].split(";"),r=Math.floor(t.length/2),o=[];for(let e=0;e<r;++e){const r=parseInt(t[2*e],10);let s=t[2*e+1];r>=lib.colors.stockPalette.length||("?"!=s?(s=lib.colors.x11ToCSS(s),s&&this.terminal.setColorPalette(r,s)):(s=lib.colors.rgbToX11(this.terminal.getColorPalette(r)),s&&o.push(r+";"+s)))}o.length&&this.terminal.io.sendString("]4;"+o.join(";")+"")},hterm.VT.OSC[8]=function(e){const t=e.args[0].split(";");let r=null,o=null;if(2===t.length&&t[1].length){const e=t[0].split(":");r="",e.forEach((e=>{const t=e.indexOf("=");if(-1==t)return;const o=e.slice(0,t),s=e.slice(t+1);if("id"===o)r=s})),o=t[1]}const s=this.terminal.getTextAttributes();s.uri=o,s.uriId=r},hterm.VT.OSC[9]=function(e){hterm.notify({body:e.args[0]})},hterm.VT.OSC[10]=function(e){const t=e.args[0].split(";");if(!t)return;const r=lib.colors.x11ToCSS(t.shift());r&&this.terminal.setForegroundColor(r),t.length>0&&(e.args[0]=t.join(";"),hterm.VT.OSC[11].apply(this,[e]))},hterm.VT.OSC[11]=function(e){const t=e.args[0].split(";");if(!t)return;const r=lib.colors.x11ToCSS(t.shift());r&&this.terminal.setBackgroundColor(r),t.length>0&&(e.args[0]=t.join(";"),hterm.VT.OSC[12].apply(this,[e]))},hterm.VT.OSC[12]=function(e){const t=e.args[0].split(";");if(!t)return;const r=lib.colors.x11ToCSS(t.shift());if(r){const e=lib.colors.crackRGB(this.terminal.getCursorColor())[3];this.terminal.setCursorColor(lib.colors.setAlpha(r,e))}},hterm.VT.OSC[50]=function(e){const t=e.args[0].match(/CursorShape=(.)/i);if(t)switch(t[1]){case"1":this.terminal.setCursorShape(hterm.Terminal.cursorShape.BEAM);break;case"2":this.terminal.setCursorShape(hterm.Terminal.cursorShape.UNDERLINE);break;default:this.terminal.setCursorShape(hterm.Terminal.cursorShape.BLOCK)}else console.warn("Could not parse OSC 50 args: "+e.args[0])},hterm.VT.OSC[52]=function(e){if(!this.enableClipboardWrite)return;const t=e.args[0].match(/^[cps01234567]*;(.*)/);if(!t)return;let r;try{r=globalThis.atob(t[1])}catch(e){return}const o=new TextDecoder,s=lib.codec.stringToCodeUnitArray(r);r=o.decode(s),r&&this.terminal.copyStringToClipboard(r)},hterm.VT.OSC[104]=function(e){if(!e.args[0])return void this.terminal.resetColorPalette();e.args[0].split(";").forEach((e=>this.terminal.resetColor(e)))},hterm.VT.OSC[110]=function(e){this.terminal.setForegroundColor()},hterm.VT.OSC[111]=function(e){this.terminal.setBackgroundColor()},hterm.VT.OSC[112]=function(e){this.terminal.setCursorColor()},hterm.VT.OSC[1337]=function(e){const t=e.args[0].match(/^File=([^:]*):([\s\S]*)$/m);if(!t)return void(this.warnUnimplemented&&console.log(`iTerm2 1337: unsupported sequence: ${t[1]}`));const r={name:"",size:0,preserveAspectRatio:!0,inline:!1,width:"auto",height:"auto",align:"left",type:"",buffer:lib.codec.stringToCodeUnitArray(atob(t[2])).buffer};if(t[1].split(";").forEach((e=>{const t=e.match(/^([^=]+)=(.*)$/m);if(t)switch(t[1]){case"name":try{r.name=globalThis.atob(t[2])}catch(e){}break;case"size":try{r.size=parseInt(t[2],10)}catch(e){}break;case"width":r.width=t[2];break;case"height":r.height=t[2];break;case"preserveAspectRatio":r.preserveAspectRatio=!("0"==t[2]);break;case"inline":r.inline=!("0"==t[2]);break;case"align":r.align=t[2];break;case"type":r.type=t[2]}})),r.inline){const t=this.terminal.io,o=e.peekRemainingBuf();e.advance(o.length),this.terminal.displayImage(r),t.print(o)}else this.terminal.displayImage(r)},hterm.VT.OSC[777]=function(e){let t;switch(e.args[0].split(";",1)[0]){case"notify":{let r,o;t=e.args[0].match(/^[^;]+;([^;]*)(;([\s\S]*))?$/),t&&(r=t[1],o=t[3]),hterm.notify({title:r,body:o});break}default:console.warn("Unknown urxvt module: "+e.args[0])}},hterm.VT.CSI["@"]=function(e){this.terminal.insertSpace(e.iarg(0,1))},hterm.VT.CSI.A=function(e){this.terminal.cursorUp(e.iarg(0,1))},hterm.VT.CSI.B=function(e){this.terminal.cursorDown(e.iarg(0,1))},hterm.VT.CSI.C=function(e){this.terminal.cursorRight(e.iarg(0,1))},hterm.VT.CSI.D=function(e){this.terminal.cursorLeft(e.iarg(0,1))},hterm.VT.CSI.E=function(e){this.terminal.cursorDown(e.iarg(0,1)),this.terminal.setCursorColumn(0)},hterm.VT.CSI.F=function(e){this.terminal.cursorUp(e.iarg(0,1)),this.terminal.setCursorColumn(0)},hterm.VT.CSI.G=function(e){this.terminal.setCursorColumn(e.iarg(0,1)-1)},hterm.VT.CSI.H=function(e){this.terminal.setCursorPosition(e.iarg(0,1)-1,e.iarg(1,1)-1)},hterm.VT.CSI.I=function(e){let t=e.iarg(0,1);t=lib.f.clamp(t,1,this.terminal.screenSize.width);for(let e=0;e<t;e++)this.terminal.forwardTabStop()},hterm.VT.CSI.J=hterm.VT.CSI["?J"]=function(e){const t=e.args[0];t&&0!=t?1==t?this.terminal.eraseAbove():2==t?this.terminal.clear():3==t&&this.enableCsiJ3&&this.terminal.clearScrollback():this.terminal.eraseBelow()},hterm.VT.CSI.K=hterm.VT.CSI["?K"]=function(e){const t=e.args[0];t&&0!=t?1==t?this.terminal.eraseToLeft():2==t&&this.terminal.eraseLine():this.terminal.eraseToRight()},hterm.VT.CSI.L=function(e){this.terminal.insertLines(e.iarg(0,1))},hterm.VT.CSI.M=function(e){this.terminal.deleteLines(e.iarg(0,1))},hterm.VT.CSI.P=function(e){this.terminal.deleteChars(e.iarg(0,1))},hterm.VT.CSI.S=function(e){this.terminal.vtScrollUp(e.iarg(0,1))},hterm.VT.CSI.T=function(e){e.args.length<=1&&this.terminal.vtScrollDown(e.iarg(0,1))},hterm.VT.CSI[">T"]=hterm.VT.ignore,hterm.VT.CSI.X=function(e){this.terminal.eraseToRight(e.iarg(0,1))},hterm.VT.CSI.Z=function(e){let t=e.iarg(0,1);t=lib.f.clamp(t,1,this.terminal.screenSize.width);for(let e=0;e<t;e++)this.terminal.backwardTabStop()},hterm.VT.CSI["`"]=hterm.VT.CSI.G,hterm.VT.CSI.a=function(e){this.terminal.setCursorColumn(this.terminal.getCursorColumn()+e.iarg(0,1))},hterm.VT.CSI.b=hterm.VT.ignore,hterm.VT.CSI.c=function(e){e.args[0]&&0!=e.args[0]||this.terminal.io.sendString("[?1;2c")},hterm.VT.CSI[">c"]=function(e){this.terminal.io.sendString("[>0;256;0c")},hterm.VT.CSI.d=function(e){this.terminal.setAbsoluteCursorRow(e.iarg(0,1)-1)},hterm.VT.CSI.f=hterm.VT.CSI.H,hterm.VT.CSI.g=function(e){e.args[0]&&0!=e.args[0]?3==e.args[0]&&this.terminal.clearAllTabStops():this.terminal.clearTabStopAtCursor()},hterm.VT.CSI.h=function(e){for(let t=0;t<e.args.length;t++)this.setANSIMode(e.args[t],!0)},hterm.VT.CSI["?h"]=function(e){for(let t=0;t<e.args.length;t++)this.setDECMode(e.args[t],!0)},hterm.VT.CSI.i=hterm.VT.CSI["?i"]=hterm.VT.ignore,hterm.VT.CSI.l=function(e){for(let t=0;t<e.args.length;t++)this.setANSIMode(e.args[t],!1)},hterm.VT.CSI["?l"]=function(e){for(let t=0;t<e.args.length;t++)this.setDECMode(e.args[t],!1)},hterm.VT.prototype.parseSgrExtendedColors=function(e,t,r){let o,s;if(e.argHasSubargs(t))o=e.args[t].split(":"),o.shift(),s=!0;else{if(e.argHasSubargs(t+1))return{skipCount:0};o=e.args.slice(t+1),s=!1}switch(parseInt(o[0],10)){default:case 0:return{skipCount:0};case 1:return s?{color:"rgba(0, 0, 0, 0)",skipCount:0}:{skipCount:0};case 2:{let t;if(t=s?4==o.length?1:2:1,o.length<t+3)return{skipCount:0};return{color:`rgb(${e.parseInt(o[t+0])}, ${e.parseInt(o[t+1])}, ${e.parseInt(o[t+2])})`,skipCount:s?0:4}}case 3:case 4:return s?(o.length,{skipCount:0}):{skipCount:0};case 5:{if(o.length<2)return{skipCount:0};const t={skipCount:s?0:2},r=e.parseInt(o[1]);return r<lib.colors.stockPalette.length&&(t.color=r),t}}},hterm.VT.CSI.m=function(e){const t=this.terminal.getTextAttributes();if(e.args.length){for(let r=0;r<e.args.length;r++){const o=e.iarg(r,0);if(o<30)if(0==o)t.reset();else if(1==o)t.bold=!0;else if(2==o)t.faint=!0;else if(3==o)t.italic=!0;else if(4==o)if(e.argHasSubargs(r)){const o=e.args[r].split(":")[1];0==o?t.underline=!1:1==o?t.underline="solid":2==o?t.underline="double":3==o?t.underline="wavy":4==o?t.underline="dotted":5==o&&(t.underline="dashed")}else t.underline="solid";else 5==o?t.blink=!0:7==o?t.inverse=!0:8==o?t.invisible=!0:9==o?t.strikethrough=!0:21==o?t.underline="double":22==o?(t.bold=!1,t.faint=!1):23==o?t.italic=!1:24==o?t.underline=!1:25==o?t.blink=!1:27==o?t.inverse=!1:28==o?t.invisible=!1:29==o&&(t.strikethrough=!1);else if(o<50)if(o<38)t.foregroundSource=o-30;else if(38==o){const o=this.parseSgrExtendedColors(e,r,t);void 0!==o.color&&(t.foregroundSource=o.color),r+=o.skipCount}else if(39==o)t.foregroundSource=t.SRC_DEFAULT;else if(o<48)t.backgroundSource=o-40;else if(48==o){const o=this.parseSgrExtendedColors(e,r,t);void 0!==o.color&&(t.backgroundSource=o.color),r+=o.skipCount}else t.backgroundSource=t.SRC_DEFAULT;else if(58==o){const o=this.parseSgrExtendedColors(e,r,t);void 0!==o.color&&(t.underlineSource=o.color),r+=o.skipCount}else 59==o?t.underlineSource=t.SRC_DEFAULT:o>=90&&o<=97?t.foregroundSource=o-90+8:o>=100&&o<=107&&(t.backgroundSource=o-100+8)}t.syncColors()}else t.reset()},hterm.VT.CSI.m.supportsSubargs=!0,hterm.VT.CSI[">m"]=hterm.VT.ignore,hterm.VT.CSI.n=function(e){if(5==e.args[0])this.terminal.io.sendString("0n");else if(6==e.args[0]){const e=this.terminal.getCursorRow()+1,t=this.terminal.getCursorColumn()+1;this.terminal.io.sendString("["+e+";"+t+"R")}},hterm.VT.CSI[">n"]=hterm.VT.ignore,hterm.VT.CSI["?n"]=function(e){if(6==e.args[0]){const e=this.terminal.getCursorRow()+1,t=this.terminal.getCursorColumn()+1;this.terminal.io.sendString("["+e+";"+t+"R")}else 15==e.args[0]?this.terminal.io.sendString("[?11n"):25==e.args[0]?this.terminal.io.sendString("[?21n"):26==e.args[0]?this.terminal.io.sendString("[?12;1;0;0n"):53==e.args[0]&&this.terminal.io.sendString("[?50n")},hterm.VT.CSI[">p"]=hterm.VT.ignore,hterm.VT.CSI["!p"]=function(){this.terminal.softReset()},hterm.VT.CSI.$p=hterm.VT.ignore,hterm.VT.CSI["?$p"]=hterm.VT.ignore,hterm.VT.CSI['"p']=hterm.VT.ignore,hterm.VT.CSI.q=hterm.VT.ignore,hterm.VT.CSI[" q"]=function(e){const t=e.args[0];0==t||1==t?(this.terminal.setCursorShape(hterm.Terminal.cursorShape.BLOCK),this.terminal.setCursorBlink(!0)):2==t?(this.terminal.setCursorShape(hterm.Terminal.cursorShape.BLOCK),this.terminal.setCursorBlink(!1)):3==t?(this.terminal.setCursorShape(hterm.Terminal.cursorShape.UNDERLINE),this.terminal.setCursorBlink(!0)):4==t?(this.terminal.setCursorShape(hterm.Terminal.cursorShape.UNDERLINE),this.terminal.setCursorBlink(!1)):5==t?(this.terminal.setCursorShape(hterm.Terminal.cursorShape.BEAM),this.terminal.setCursorBlink(!0)):6==t?(this.terminal.setCursorShape(hterm.Terminal.cursorShape.BEAM),this.terminal.setCursorBlink(!1)):console.warn("Unknown cursor style: "+t)},hterm.VT.CSI['"q']=hterm.VT.ignore,hterm.VT.CSI.r=function(e){const t=e.args,r=t[0]?parseInt(t[0],10):0,o=t[1]?parseInt(t[1],10):this.terminal.screenSize.height;r<0||o>this.terminal.screenSize.height||o<=r||(this.terminal.setVTScrollRegion(0===r?null:r-1,o-1),this.terminal.setCursorPosition(0,0))},hterm.VT.CSI["?r"]=hterm.VT.ignore,hterm.VT.CSI.$r=hterm.VT.ignore,hterm.VT.CSI.s=function(){this.terminal.saveCursorAndState()},hterm.VT.CSI["?s"]=hterm.VT.ignore,hterm.VT.CSI.t=function(e){const t=e.args;switch(t[0]?parseInt(t[0],10):0){case 16:{const e=Math.floor(this.terminal.scrollPort_.characterSize.height),t=Math.floor(this.terminal.scrollPort_.characterSize.width);this.terminal.io.sendString(`[6;${e};${t}t`);break}}},hterm.VT.CSI.$t=hterm.VT.ignore,hterm.VT.CSI[">t"]=hterm.VT.ignore,hterm.VT.CSI[" t"]=hterm.VT.ignore,hterm.VT.CSI.u=function(){this.terminal.restoreCursorAndState()},hterm.VT.CSI[" u"]=hterm.VT.ignore,hterm.VT.CSI.$v=hterm.VT.ignore,hterm.VT.CSI["'w"]=hterm.VT.ignore,hterm.VT.CSI.x=hterm.VT.ignore,hterm.VT.CSI["*x"]=hterm.VT.ignore,hterm.VT.CSI.$x=hterm.VT.ignore,hterm.VT.CSI.z=function(e){if(e.args.length<1)return;const t=e.args[0];if(0==t){if(e.args.length<2)return;this.terminal.getTextAttributes().tileData=e.args[1]}else 1==t&&(this.terminal.getTextAttributes().tileData=null)},hterm.VT.CSI["'z"]=hterm.VT.ignore,hterm.VT.CSI.$z=hterm.VT.ignore,hterm.VT.CSI["'{"]=hterm.VT.ignore,hterm.VT.CSI["'|"]=hterm.VT.ignore,hterm.VT.CSI["'}"]=hterm.VT.ignore,hterm.VT.CSI["'~"]=hterm.VT.ignore,hterm.VT.CharacterMap=function(e,t){this.description=e,this.GL=null,this.glmapBase_=t,this.sync_()},hterm.VT.CharacterMap.prototype.sync_=function(e=void 0){if(!this.glmapBase_&&!e)return this.GL=null,delete this.glmap_,void delete this.glre_;this.glmap_=e?Object.assign({},this.glmapBase_,e):this.glmapBase_;const t=Object.keys(lib.notNull(this.glmap_)).map((e=>"\\x"+lib.f.zpad(e.charCodeAt(0).toString(16),2)));this.glre_=new RegExp("["+t.join("")+"]","g"),this.GL=e=>e.replace(this.glre_,(e=>this.glmap_[e]))},hterm.VT.CharacterMap.prototype.reset=function(){this.glmap_!==this.glmapBase_&&this.sync_()},hterm.VT.CharacterMap.prototype.setOverrides=function(e){this.sync_(e)},hterm.VT.CharacterMap.prototype.clone=function(){const e=new hterm.VT.CharacterMap(this.description,this.glmapBase_);return this.glmap_!==this.glmapBase_&&e.setOverrides(this.glmap_),e},hterm.VT.CharacterMaps=function(){this.maps_=hterm.VT.CharacterMaps.DefaultMaps,this.mapsBase_=this.maps_},hterm.VT.CharacterMaps.prototype.getMap=function(e){return this.maps_.hasOwnProperty(e)?this.maps_[e]:void 0},hterm.VT.CharacterMaps.prototype.addMap=function(e,t){this.maps_===this.mapsBase_&&(this.maps_=Object.assign({},this.mapsBase_)),this.maps_[e]=t},hterm.VT.CharacterMaps.prototype.reset=function(){this.maps_!==hterm.VT.CharacterMaps.DefaultMaps&&(this.maps_=hterm.VT.CharacterMaps.DefaultMaps)},hterm.VT.CharacterMaps.prototype.setOverrides=function(e){this.maps_===this.mapsBase_&&(this.maps_=Object.assign({},this.mapsBase_));for(const t in e){const r=this.getMap(t);void 0!==r?(this.maps_[t]=r.clone(),this.maps_[t].setOverrides(e[t])):this.addMap(t,new hterm.VT.CharacterMap("user "+t,e[t]))}},hterm.VT.CharacterMaps.DefaultMaps={},hterm.VT.CharacterMaps.DefaultMaps[0]=new hterm.VT.CharacterMap("graphic",{"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"}),hterm.VT.CharacterMaps.DefaultMaps.A=new hterm.VT.CharacterMap("british",{"#":"£"}),hterm.VT.CharacterMaps.DefaultMaps.B=new hterm.VT.CharacterMap("us",null),hterm.VT.CharacterMaps.DefaultMaps[4]=new hterm.VT.CharacterMap("dutch",{"#":"£","@":"¾","[":"Ĳ","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"}),hterm.VT.CharacterMaps.DefaultMaps.C=hterm.VT.CharacterMaps.DefaultMaps[5]=new hterm.VT.CharacterMap("finnish",{"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"}),hterm.VT.CharacterMaps.DefaultMaps.R=new hterm.VT.CharacterMap("french",{"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"}),hterm.VT.CharacterMaps.DefaultMaps.Q=new hterm.VT.CharacterMap("french canadian",{"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"}),hterm.VT.CharacterMaps.DefaultMaps.K=new hterm.VT.CharacterMap("german",{"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"}),hterm.VT.CharacterMaps.DefaultMaps.Y=new hterm.VT.CharacterMap("italian",{"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"}),hterm.VT.CharacterMaps.DefaultMaps.E=hterm.VT.CharacterMaps.DefaultMaps[6]=new hterm.VT.CharacterMap("norwegian/danish",{"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"}),hterm.VT.CharacterMaps.DefaultMaps.Z=new hterm.VT.CharacterMap("spanish",{"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"}),hterm.VT.CharacterMaps.DefaultMaps[7]=hterm.VT.CharacterMaps.DefaultMaps.H=new hterm.VT.CharacterMap("swedish",{"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"}),hterm.VT.CharacterMaps.DefaultMaps["="]=new hterm.VT.CharacterMap("swiss",{"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}),function(e){if("Intl"in e&&"Segmenter"in e.Intl)return;e.Intl=e.Intl||{};const t=["grapheme","word","sentence","line"],r={grapheme:{grapheme:/^(.|\n)/},word:{letter:/^[a-z](?:'?[a-z])*/i,number:/^\d+([,.]\d+)*/},sentence:{terminator:/^[^.?!\r\n]+[.?!]+[\r\n]?/,separator:/^[^.?!\r\n]+[\r\n]?/},line:{hard:/^\S*[\r\n]/,soft:/^\S*\s*/}};function o(e,t){const r={none:0,number:100,letter:200,kana:300,ideo:400,unknown:-1}[e]||0;switch(t){case"character":return;case"word":default:return e;case"sentence":return{0:"terminator",100:"separator"}[r]||e;case"line":return{0:"soft",100:"hard"}[r]||e}}class s{constructor(e,t){this._cur=-1,this._type=void 0,this._breaks=t}[Symbol.iterator](){return this}next(){return this._cur<this._breaks.length&&++this._cur,this._cur>=this._breaks.length?(this._type=void 0,{done:!0,value:void 0}):(this._type=this._breaks[this._cur].breakType,{done:!1,value:{segment:this._breaks[this._cur].segment,breakType:this._breaks[this._cur].breakType}})}following(e=void 0){if(!this._breaks.length)return!0;if(void 0===e)this._cur<this._breaks.length&&++this._cur;else for(this._cur=0;this._cur<this._breaks.length&&this._breaks[this._cur].pos<e;++this._cur);return this._type=this._cur<this._breaks.length?this._breaks[this._cur].breakType:void 0,this._cur+1>=this._breaks.length}preceding(e=void 0){if(!this._breaks.length)return!0;if(void 0===e)this._cur>=this._breaks.length&&--this._cur,this._cur>=0&&--this._cur;else for(this._cur=this._breaks.length-1;this._cur>=0&&this._breaks[this._cur].pos>=e;--this._cur);return this._type=this._cur+1>=this._breaks.length?void 0:this._breaks[this._cur+1].breakType,this._cur<0}get position(){return this._cur<0||!this._breaks.length?0:this._cur>=this._breaks.length?this._breaks[this._breaks.length-1].pos:this._breaks[this._cur].pos}get breakType(){return this._type}}e.Intl.Segmenter=class{constructor(e,{localeMatcher:r,granularity:o="grapheme"}={}){this._locale=Array.isArray(e)?e.map((e=>String(e))):String(e||navigator.language),this._granularity=t.includes(o)?o:"grapheme"}segment(t){return new s(t,function(t,s,i){const n=[];if("v8BreakIterator"in e.Intl){"grapheme"===s&&(s="character");const r=new e.Intl.v8BreakIterator(t,{type:s});r.adoptText(i);let a=0,h=r.next();for(;-1!==h;)n.push({pos:r.current(),segment:i.slice(a,h),breakType:o(r.breakType(),s)}),a=h,h=r.next()}else{const e=r[s];let t=0;for(;t<i.length;){let r=!1;for(const o of Object.keys(e)){const a=e[o],h=i.slice(t).match(a);if(h){t+=h[0].length,n.push({pos:t,segment:h[0],breakType:"grapheme"===s?void 0:o}),r=!0;break}}r||n.push({pos:t+1,segment:i.slice(t,++t),breakType:"none"})}}return n}(this._locale,this._granularity,t))}}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),hterm.wc={},hterm.wc.nulWidth=0,hterm.wc.controlWidth=0,hterm.wc.regardCjkAmbiguous=!1,hterm.wc.cjkAmbiguousWidth=2,hterm.wc.combining=[[173,173],[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1756],[1759,1764],[1767,1768],[1770,1773],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2200,2207],[2250,2273],[2275,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2901,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3132,3132],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3457,3457],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3790],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5939],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6159],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6862],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43052,43052],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531],[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69291,69292],[69373,69375],[69446,69456],[69506,69509],[69633,69633],[69688,69702],[69744,69744],[69747,69748],[69759,69761],[69811,69814],[69817,69818],[69826,69826],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70095,70095],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70209,70209],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[71995,71996],[71998,71998],[72003,72003],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[73472,73473],[73526,73530],[73536,73536],[73538,73538],[78896,78912],[78919,78933],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[94180,94180],[113821,113822],[113824,113827],[118528,118573],[118576,118598],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123023,123023],[123184,123190],[123566,123566],[123628,123631],[124140,124143],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],hterm.wc.ambiguous=[[161,161],[164,164],[167,168],[170,170],[173,174],[176,180],[182,186],[188,191],[198,198],[208,208],[215,216],[222,225],[230,230],[232,234],[236,237],[240,240],[242,243],[247,250],[252,252],[254,254],[257,257],[273,273],[275,275],[283,283],[294,295],[299,299],[305,307],[312,312],[319,322],[324,324],[328,331],[333,333],[338,339],[358,359],[363,363],[462,462],[464,464],[466,466],[468,468],[470,470],[472,472],[474,474],[476,476],[593,593],[609,609],[708,708],[711,711],[713,715],[717,717],[720,720],[728,731],[733,733],[735,735],[768,879],[913,929],[931,937],[945,961],[963,969],[1025,1025],[1040,1103],[1105,1105],[4352,4447],[8208,8208],[8211,8214],[8216,8217],[8220,8221],[8224,8226],[8228,8231],[8240,8240],[8242,8243],[8245,8245],[8251,8251],[8254,8254],[8308,8308],[8319,8319],[8321,8324],[8364,8364],[8451,8451],[8453,8453],[8457,8457],[8467,8467],[8470,8470],[8481,8482],[8486,8486],[8491,8491],[8531,8532],[8539,8542],[8544,8555],[8560,8569],[8585,8585],[8592,8601],[8632,8633],[8658,8658],[8660,8660],[8679,8679],[8704,8704],[8706,8707],[8711,8712],[8715,8715],[8719,8719],[8721,8721],[8725,8725],[8730,8730],[8733,8736],[8739,8739],[8741,8741],[8743,8748],[8750,8750],[8756,8759],[8764,8765],[8776,8776],[8780,8780],[8786,8786],[8800,8801],[8804,8807],[8810,8811],[8814,8815],[8834,8835],[8838,8839],[8853,8853],[8857,8857],[8869,8869],[8895,8895],[8978,8978],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9312,9449],[9451,9547],[9552,9587],[9600,9615],[9618,9621],[9632,9633],[9635,9641],[9650,9651],[9654,9655],[9660,9661],[9664,9665],[9670,9672],[9675,9675],[9678,9681],[9698,9701],[9711,9711],[9725,9726],[9733,9734],[9737,9737],[9742,9743],[9748,9749],[9756,9756],[9758,9758],[9792,9792],[9794,9794],[9800,9811],[9824,9825],[9827,9829],[9831,9834],[9836,9837],[9839,9839],[9855,9855],[9875,9875],[9886,9887],[9889,9889],[9898,9899],[9917,9919],[9924,9953],[9955,9955],[9960,9983],[9989,9989],[9994,9995],[10024,10024],[10045,10045],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10102,10111],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11097],[11904,12255],[12272,12350],[12352,19903],[19968,42191],[43360,43391],[44032,55203],[57344,64255],[65024,65049],[65072,65135],[65281,65376],[65504,65510],[65533,65533],[94176,94180],[94192,94193],[94208,101589],[101632,101640],[110576,110579],[110581,110587],[110589,110590],[110592,110895],[110898,110898],[110928,110930],[110933,110933],[110948,110951],[110960,111359],[126980,126980],[127183,127183],[127232,127242],[127248,127277],[127280,127337],[127344,127404],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128727],[128732,128735],[128747,128748],[128756,128764],[128992,129003],[129008,129008],[129292,129338],[129340,129349],[129351,129535],[129648,129660],[129664,129672],[129680,129725],[129727,129733],[129742,129755],[129760,129768],[129776,129784],[131072,196605],[196608,262141],[917760,917999],[983040,1048573],[1048576,1114109]],hterm.wc.unambiguous=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,12255],[12272,12350],[12352,12871],[12880,19903],[19968,42191],[43360,43391],[44032,55203],[63744,64255],[65040,65049],[65072,65135],[65281,65376],[65504,65510],[94176,94180],[94192,94193],[94208,101589],[101632,101640],[110576,110579],[110581,110587],[110589,110590],[110592,110895],[110898,110898],[110928,110930],[110933,110933],[110948,110951],[110960,111359],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128727],[128732,128735],[128747,128748],[128756,128764],[128992,129003],[129008,129008],[129292,129338],[129340,129349],[129351,129535],[129648,129660],[129664,129672],[129680,129725],[129727,129733],[129742,129755],[129760,129768],[129776,129784],[131072,196605],[196608,262141]],hterm.wc.binaryTableSearch_=function(e,t){let r,o=0,s=t.length-1;if(e<t[o][0]||e>t[s][1])return!1;for(;s>=o;)if(r=Math.floor((o+s)/2),e>t[r][1])o=r+1;else{if(!(e<t[r][0]))return!0;s=r-1}return!1},hterm.wc.isSpace=function(e){return hterm.wc.binaryTableSearch_(e,hterm.wc.combining)},hterm.wc.isCjkAmbiguous=function(e){return hterm.wc.binaryTableSearch_(e,hterm.wc.ambiguous)},hterm.wc.charWidth=function(e){return hterm.wc.regardCjkAmbiguous?hterm.wc.charWidthRegardAmbiguous(e):hterm.wc.charWidthDisregardAmbiguous(e)},hterm.wc.charWidthDisregardAmbiguous=function(e){return e<127?e>=32?1:0==e?hterm.wc.nulWidth:hterm.wc.controlWidth:e<160?hterm.wc.controlWidth:hterm.wc.isSpace(e)?0:hterm.wc.binaryTableSearch_(e,hterm.wc.unambiguous)?2:1},hterm.wc.charWidthRegardAmbiguous=function(e){return hterm.wc.isCjkAmbiguous(e)?hterm.wc.cjkAmbiguousWidth:hterm.wc.charWidthDisregardAmbiguous(e)},hterm.wc.strWidth=function(e){let t=0;for(let r=0;r<e.length;){const o=e.codePointAt(r),s=hterm.wc.charWidth(o);if(s<0)return-1;t+=s,r+=o<=65535?1:2}return t},hterm.wc.substr=function(e,t,r=void 0){let o=0;if(t)for(let r=0;o<e.length;){const s=e.codePointAt(o);if(r+=hterm.wc.charWidth(s),r>t)break;o+=s<=65535?1:2}if(void 0!==r){let t=o;for(let o=0;t<e.length;){const s=e.codePointAt(t);if(o+=hterm.wc.charWidth(s),o>r)break;t+=s<=65535?1:2}return e.substring(o,t)}return e.substr(o)},hterm.wc.substring=function(e,t,r){return hterm.wc.substr(e,t,r-t)};export{hterm};